"use strict";(self.webpackChunkUI_Base=self.webpackChunkUI_Base||[]).push([[742],{67742:(ne,L,p)=>{p.r(L),p.d(L,{ConfigurationModule:()=>so});var m=p(96814),u=p(18068),_=p(97582),C=p(85219),s=p(56223),w=p(93838),v=p(85571),f=p(78791),A=p(31290),e=p(65879),n=p(84221);const q=(0,n.PH)("[Master Configuration] Get Category List"),Q=(0,n.PH)("[Master Configuration] Save Status Updtae List"),x=(0,n.PH)("[Master Configuration] Reset Everything"),X=(0,n.PH)("[Master Configuration] Get Category List Success",(0,n.Ky)()),ee=(0,n.PH)("[Master Configuration] Get Configuration Details",(0,n.Ky)()),ae=(0,n.PH)("[Master Configuration] Get Configuration Details Success",(0,n.Ky)()),te=(0,n.PH)("[Master Configuration] Get Parent Configuration Details",(0,n.Ky)()),le=(0,n.PH)("[Master Configuration] Get Parent Configuration Details Success",(0,n.Ky)()),ce=(0,n.PH)("[Master Configuration] Save Configuration",(0,n.Ky)()),pe=(0,n.PH)("[Master Configuration] Save Configuration Success",(0,n.Ky)()),ie=(0,n.PH)("[Master Configuration] Get Department List"),oe=(0,n.PH)("[Master Configuration] Get Department List Success",(0,n.Ky)()),ue="TwoColConfigState",de=(0,n.Lq)({categories:[],departments:[],configurations:[],Parentconfigurations:[],saveStatus:null},(0,n.on)(X,(o,{categories:t})=>({...o,categories:t})),(0,n.on)(oe,(o,{departments:t})=>({...o,departments:t})),(0,n.on)(ae,(o,{configDetail:t})=>({...o,configurations:t})),(0,n.on)(le,(o,{configDetail:t})=>({...o,Parentconfigurations:t})),(0,n.on)(pe,(o,{details:t})=>({...o,saveStatus:{Status:t.status,message:t.message}})),(0,n.on)(Q,o=>({...o,saveStatus:null})),(0,n.on)(x,o=>({...o,categories:[],departments:[],configurations:[],Parentconfigurations:[],saveStatus:null}))),O=(0,n.ZF)(ue),re=(0,n.P1)(O,o=>o.categories),Ce=(0,n.P1)(O,o=>o.configurations),_e=(0,n.P1)(O,o=>o.saveStatus),ye=(0,n.P1)(O,o=>o.Parentconfigurations),d=(0,n.P1)(O,o=>o.departments);let h=(()=>{var o;class t{constructor(r){this.store=r,this.selectCategories$=this.store.select(re),this.selectDepartments$=this.store.select(d),this.selectSaveStatus$=this.store.select(_e),this.selectParentconfigurations$=this.store.select(ye),this.selectConfigurationList$=this.store.select(Ce)}getCategories(){this.store.dispatch(q())}getDepartments(){this.store.dispatch(ie())}updatesaveStatus(){this.store.dispatch(Q())}getConfigurationList(r,a,l,c,I){this.store.dispatch(ee({departmentId:r,configId:a,categoryId:l,parentConfigId:c,isActive:I}))}getParentConfigurationList(r,a,l,c){this.store.dispatch(te({departmentId:r,configId:a,categoryId:l,parentConfigId:c}))}saveConfiguration(r){this.store.dispatch(ce({configDetails:r}))}reset(){this.store.dispatch(x())}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(n.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})();var V,y=p(40707),k=p(53714),E=p(53965),G=p(45609),$=p(27561),N=p(74104),se=p(35154),U=p(38253);function At(o,t){if(1&o&&(e.TgZ(0,"div",11)(1,"label",24),e._uU(2,"Configuration "),e.TgZ(3,"span",25),e._uU(4),e.qZA()(),e._UZ(5,"p-dropdown",26)(6,"app-error-msg",14),e.qZA()),2&o){const i=e.oxw();e.xp6(4),e.Oqu(i.parentconfigtext),e.xp6(1),e.Q6J("options",i.configurations)("showClear",!0),e.xp6(1),e.Q6J("control",i.configurationForm.get("configuration"))}}function wt(o,t){if(1&o&&(e.TgZ(0,"div",11)(1,"label",27),e._uU(2,"Value"),e.qZA(),e._UZ(3,"input",28)(4,"app-error-msg",14),e.qZA()),2&o){const i=e.oxw();e.xp6(4),e.Q6J("control",i.configurationForm.get("value"))}}function It(o,t){if(1&o&&(e.TgZ(0,"div",11)(1,"label",29),e._uU(2,"Code"),e.qZA(),e._UZ(3,"input",30)(4,"app-error-msg",14),e.qZA()),2&o){const i=e.oxw();e.xp6(4),e.Q6J("control",i.configurationForm.get("code"))}}function kt(o,t){if(1&o&&e._UZ(0,"p-button",32),2&o){const i=e.oxw(2);e.Q6J("disabled",!i.configurationForm.valid)}}const Zt=function(o,t){return[o,t]};function Lt(o,t){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,kt,1,1,"p-button",31),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.Q6J("ngxPermissionsOnly",e.WLB(1,Zt,i.privleges.CONFIG_UPDATE,i.privleges.CONFIG_CREATE))}}const Et=function(o){return{color:o}};let be=((V=class{constructor(t,i,r){this.twoColConfigFacade=t,this.messageService=i,this.titlecasePipe=r,this.actions=[],this.isDependent=!1,this.title="Configuration",this.first=0,this.rows=10,this.total=0,this.hasCode=!1,this.defaultSortField="value",this.defaultSortOrder=1,this.currentStatus=!0,this.canShowAction=!0,this.privleges=A.UR}ngOnInit(){this.twoColConfigFacade.getCategories(),this.twoColConfigFacade.getDepartments(),this.twoColConfigFacade.selectCategories$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.originalcatgories=t,this.isDependent=!1,this.catgories=t.filter(i=>0==i.isDependent))}),this.twoColConfigFacade.selectDepartments$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.departments=t)}),this.twoColConfigFacade.selectSaveStatus$.pipe((0,f.t)(this)).subscribe(t=>{if(!t||t.Status!=v.cH&&t.Status!=v.nQ){if(t){this.configurationForm.get("id")?.patchValue(w.i.raw()),this.configurationForm.get("code")?.reset(),this.configurationForm.get("value")?.reset(),this.messageService.add({severity:"success",summary:"Success",detail:t?.message});const i=this.configurationForm.get("category")?.value,r=this.configurationForm.get("configuration")?.value,a=this.configurationForm.get("department")?.value;this.twoColConfigFacade.getConfigurationList(a,"",i,r||"",this.currentStatus)}}else this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message})}),this.twoColConfigFacade.selectConfigurationList$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.configurationList=t,this.total=t.length)}),this.twoColConfigFacade.selectParentconfigurations$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.configurations=t)}),this.configurationForm=new s.cw({department:new s.NI("",s.kI.required),category:new s.NI("",s.kI.required),id:new s.NI(w.i.raw()),configuration:new s.NI(""),value:new s.NI("",[s.kI.required]),code:new s.NI("")}),this.cols=[{field:"value",header:"Configuration Value",customExportHeader:"Configuration Value",sortablefield:"value",isSortable:!0},{field:"code",header:"Code",sortablefield:"code",isSortable:!0}],this.searchableColumns=["value","code"],this.actions=[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:A.UR.CONFIG_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:A.UR.CONFIG_DELETE}],this.configurationForm.get("department")?.valueChanges.subscribe(t=>{this.configurationForm.get("category")?.reset(),this.configurationForm.get("value")?.reset(),this.configurationForm.get("configuration")?.reset(),this.configurationForm.get("code")?.reset()}),this.configurationForm.get("category")?.valueChanges.subscribe(t=>{const i=this.configurationForm.get("department")?.value;if(t&&this.isDependent){const a=this.originalcatgories.find(c=>c.id==t),l=this.originalcatgories.find(c=>c.id==a.parentId);this.parentconfigtext=`(${l.category})`,l?this.twoColConfigFacade.getParentConfigurationList(i,"",l.id,""):this.configurations=[]}else this.isDependent||(this.twoColConfigFacade.getConfigurationList(i,"",t,"",this.currentStatus),this.configurations=[]);var r=this.originalcatgories.find(a=>a.id==t);r?(this.hasCode=r.hasCode,this.canShowAction=r.isEditable):this.hasCode=!1,this.hasCode?(this.configurationForm.get("code")?.addValidators(s.kI.required),this.cols=[{field:"value",header:"Configuration Value",customExportHeader:"Configuration Value",sortablefield:"value",isSortable:!0},{field:"code",header:"Code",sortablefield:"code",isSortable:!0}],this.searchableColumns=["value","code"]):(this.configurationForm.get("code")?.removeValidators(s.kI.required),this.cols=[{field:"value",header:"Configuration Value",customExportHeader:"Configuration Value",sortablefield:"value",isSortable:!0}],this.searchableColumns=["value"]),this.configurationForm.get("value")?.reset(),this.configurationForm.get("code")?.reset()}),this.configurationForm.get("configuration")?.valueChanges.subscribe(t=>{const i=this.configurationForm.get("department")?.value;this.configurationList=[],this.total=0,t&&(this.twoColConfigFacade.getConfigurationList(i,"","",t,this.currentStatus),this.configurationForm.get("id")?.patchValue(w.i.raw()),this.configurationForm.get("code")?.reset(),this.configurationForm.get("value")?.reset())})}changeEvent(t){this.configurationForm.reset(),this.configurationForm.get("id")?.patchValue(w.i.raw()),this.configurationList=[],this.total=0,this.parentconfigtext="",t.checked?(this.title="Dependent Configuration",this.configurationForm.get("configuration")?.addValidators(s.kI.required),this.catgories=this.originalcatgories.filter(i=>1==i.isDependent)):(this.title="Configuration",this.configurationForm.get("configuration")?.clearValidators(),this.catgories=this.originalcatgories.filter(i=>0==i.isDependent)),this.configurationForm.get("configuration")?.updateValueAndValidity()}changeStatus(t){const i=this.configurationForm.get("category")?.value,r=this.configurationForm.get("configuration")?.value,a=this.configurationForm.get("department")?.value;i&&(r&&this.isDependent||!r&&!this.isDependent)&&this.twoColConfigFacade.getConfigurationList(a,"",i,r||"",!t),this.configurationList=[],this.total=0,this.currentStatus=!t,this.actions=t?[{icon:"pi pi-undo",title:"Activate",type:"ACTIVATE",privilege:A.UR.CONFIG_UPDATE}]:[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:A.UR.CONFIG_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:A.UR.CONFIG_DELETE}]}submit(){this.twoColConfigFacade.updatesaveStatus(),this.twoColConfigFacade.saveConfiguration({departmentId:this.configurationForm.get("department")?.value,categoryId:this.configurationForm.get("category")?.value,id:this.configurationForm.get("id")?.value,configurationId:this.configurationForm.get("configuration")?.value,value:this.configurationForm.get("value")?.value,code:this.configurationForm.get("code")?.value?.toUpperCase(),isActive:!0})}getcontrol(t){return this.configurationForm.get(t)??new s.NI}resetForm(){this.configurationForm.reset(),this.configurationForm.get("id")?.patchValue(w.i.raw()),this.configurations=[],this.total=0}actioInvoked(t){t&&"INACTIVATE"==t.type?(this.twoColConfigFacade.updatesaveStatus(),this.twoColConfigFacade.saveConfiguration({...t.record,isActive:!1})):t&&"EDIT"==t.type?(this.configurationForm.get("id")?.patchValue(t.record.id),this.configurationForm.get("configurationId")?.patchValue(t.record.configurationId),this.configurationForm.get("value")?.patchValue(t.record.value),this.configurationForm.get("code")?.patchValue(t.record.code)):t&&"ACTIVATE"==t.type&&(this.twoColConfigFacade.updatesaveStatus(),this.twoColConfigFacade.saveConfiguration({...t.record,isActive:!0}))}ngOnDestroy(){this.twoColConfigFacade.reset()}}).\u0275fac=function(t){return new(t||V)(e.Y36(h),e.Y36(C.ez),e.Y36(m.rS))},V.\u0275cmp=e.Xpm({type:V,selectors:[["app-two-column-config"]],features:[e._Bn([C.YP,C.ez,m.rS])],decls:40,vars:30,consts:[[1,"card"],[1,"grid","formgrid"],[1,"col-12","lg:col-9","md:col-9"],[1,"col-6","lg:col-2","md:col-2",2,"text-align","end"],[1,"col-6","lg:col-1","md:col-1"],[3,"ngModel","onChange","ngModelChange"],[1,"grid","formgrid","mb-3"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"p-formgrid","grid"],[1,"col-12","flex","md:col-12","lg:col-10",2,"flex-wrap","wrap"],[1,"field","col-12","md:col-4","lg:col-4"],["htmlFor","category"],["optionLabel","text","optionValue","value","placeholder","Select a Department","formControlName","department",3,"options","showClear"],[3,"control"],["optionLabel","category","optionValue","id","placeholder","Select a Category","formControlName","category",3,"options","showClear"],["class","field col-12  md:col-4  lg:col-4",4,"ngIf"],[1,"col-12","md:col-12","lg:col-2",2,"display","flex","justify-content","center","align-items","center"],["class","col",4,"ngIf"],[1,"col"],["pButton","","type","button","label","Reset",1,"p-button-secondary",3,"click"],[1,"col-12","lg:col-9","md:col-9","flex"],[2,"font-size","small","font-weight","600","margin-left","5px",3,"ngStyle"],[3,"records","defaultSortField","defaultSortOrder","cols","fileName","rows","total","actions","defaultstatus","searchableColumns","hasActiveInactive","canShowAction","invokeAction","changeStatus"],["htmlFor","id"],[2,"color","blue","font-weight","600"],["optionLabel","value","optionValue","id","placeholder","Select a Configuration","formControlName","configuration",3,"options","showClear"],["htmlFor","value"],["pInputText","","formControlName","value","type","text"],["htmlFor","code"],["pInputText","","formControlName","code","type","text"],["type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],["type","submit","label","Submit",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"h4"),e._uU(7,"Dependent "),e.qZA()(),e.TgZ(8,"div",4)(9,"p-inputSwitch",5),e.NdJ("onChange",function(a){return i.changeEvent(a)})("ngModelChange",function(a){return i.isDependent=a}),e.qZA()()(),e.TgZ(10,"div",6)(11,"form",7),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"label",12),e._uU(17,"Department"),e.qZA(),e._UZ(18,"p-dropdown",13)(19,"app-error-msg",14),e.qZA(),e.TgZ(20,"div",11)(21,"label",12),e._uU(22,"Category"),e.qZA(),e._UZ(23,"p-dropdown",15)(24,"app-error-msg",14),e.qZA(),e.YNc(25,At,7,4,"div",16),e.YNc(26,wt,5,1,"div",16),e.YNc(27,It,5,1,"div",16),e.qZA(),e.TgZ(28,"div",17),e.YNc(29,Lt,2,4,"div",18),e.TgZ(30,"div",19)(31,"button",20),e.NdJ("click",function(){return i.resetForm()}),e.qZA()()()()()()(),e.TgZ(32,"div",1)(33,"div",21)(34,"h4"),e._uU(35),e.qZA(),e.TgZ(36,"span",22),e._uU(37),e.qZA()()(),e.TgZ(38,"app-datatable",23),e.NdJ("invokeAction",function(a){return i.actioInvoked(a)})("changeStatus",function(a){return i.changeStatus(a)}),e.qZA()(),e._UZ(39,"p-toast")),2&t&&(e.xp6(4),e.hij("",i.title," "),e.xp6(5),e.Q6J("ngModel",i.isDependent),e.xp6(2),e.Q6J("formGroup",i.configurationForm),e.xp6(7),e.Q6J("options",i.departments)("showClear",!0),e.xp6(1),e.Q6J("control",i.configurationForm.get("department")),e.xp6(4),e.Q6J("options",i.catgories)("showClear",!0),e.xp6(1),e.Q6J("control",i.configurationForm.get("category")),e.xp6(1),e.Q6J("ngIf",i.isDependent&&i.canShowAction),e.xp6(1),e.Q6J("ngIf",i.canShowAction),e.xp6(1),e.Q6J("ngIf",i.hasCode&&i.canShowAction),e.xp6(2),e.Q6J("ngIf",i.canShowAction),e.xp6(6),e.hij("",i.title," List "),e.xp6(1),e.Q6J("ngStyle",e.VKq(28,Et,i.currentStatus?"#0abb0a":"#fd7878")),e.xp6(1),e.hij(" ",i.currentStatus?"(Active)":"(In-Active)",""),e.xp6(1),e.Q6J("records",i.configurationList)("defaultSortField",i.defaultSortField)("defaultSortOrder",i.defaultSortOrder)("cols",i.cols)("fileName","Configuration")("rows",10)("total",i.configurationList?i.configurationList.length:0)("actions",i.actions)("defaultstatus",!i.currentStatus)("searchableColumns",i.searchableColumns)("hasActiveInactive",!0)("canShowAction",i.canShowAction))},dependencies:[m.O5,m.PC,s._Y,s.Fj,s.JJ,s.JL,s.On,y.Hq,y.zx,k.o,E.Lt,G.Ql,s.sg,s.u,$.u,N.FN,se.n,U.gE]}),V);be=(0,_.gn)([(0,f.c)()],be);const Pe=(0,n.PH)("[Master Configuration] Get Role List",(0,n.Ky)()),Me=(0,n.PH)("[Master Configuration] Get Role List Success",(0,n.Ky)()),xe=(0,n.PH)("[Master Configuration]  Save Role ",(0,n.Ky)()),Oe=(0,n.PH)("[Master Configuration] Save Role Success",(0,n.Ky)()),Ge=(0,n.PH)("[Master Configuration] Save Role Status"),Re=(0,n.PH)("[Master Configuration] Get Privilege List",(0,n.Ky)()),Je=(0,n.PH)("[Master Configuration] Get Privilege List Success",(0,n.Ky)()),Qe=(0,n.PH)("[Master Configuration]  Save Privilege ",(0,n.Ky)()),$e=(0,n.PH)("[Master Configuration]  Reset "),Ve=(0,n.PH)("[Master Configuration] Save Privilege Success",(0,n.Ky)()),Be=(0,n.PH)("[Master Configuration] Save Role Status"),Ye="RoleState",Nt=(0,n.Lq)({roles:[],saveStatus:null,privileges:[],savePrivilegeStatus:null},(0,n.on)(Me,(o,{roles:t})=>({...o,roles:t})),(0,n.on)(Oe,(o,{role:t})=>({...o,saveStatus:{Status:t.status,message:t.message}})),(0,n.on)(Ge,o=>({...o,saveStatus:null})),(0,n.on)(Je,(o,{privileges:t})=>({...o,privileges:t})),(0,n.on)(Ve,(o,{privilege:t})=>({...o,savePrivilegeStatus:{Status:t.status,message:t.message}})),(0,n.on)(Be,o=>({...o,savePrivilegeStatus:null})),(0,n.on)($e,o=>({...o,roles:[],saveStatus:null,privileges:[],savePrivilegeStatus:null}))),ge=(0,n.ZF)(Ye),Ut=(0,n.P1)(ge,o=>o.roles),Dt=(0,n.P1)(ge,o=>o.saveStatus),Pt=(0,n.P1)(ge,o=>o.privileges),Mt=(0,n.P1)(ge,o=>o.savePrivilegeStatus);let Te=(()=>{var o;class t{constructor(r){this.store=r,this.selectRoles$=this.store.select(Ut),this.selectSaveStatus$=this.store.select(Dt),this.selectPrivileges$=this.store.select(Pt),this.selectSavePrivilegesStatus$=this.store.select(Mt)}getRoles(r){this.store.dispatch(Pe({isActive:r}))}updatesaveStatus(){this.store.dispatch(Ge())}saverole(r){this.store.dispatch(xe({role:r}))}getPrivileges(r){this.store.dispatch(Re({roleId:r}))}updatesPrivilegeaveStatus(){this.store.dispatch(Be())}savePrivilege(r){this.store.dispatch(Qe({privilege:r}))}reset(){this.store.dispatch($e())}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(n.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})();var B;function xt(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.setPrivileges())}),e.qZA()}}function Ot(o,t){if(1&o&&e._UZ(0,"button",24),2&o){const i=e.oxw(2);e.Q6J("disabled",!i.roleForm.valid)}}const We=function(o){return[o]};function Gt(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",10)(1,"form",11),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(2,"div",12)(3,"div",13)(4,"div",14)(5,"label",15),e._uU(6,"Role Name"),e.qZA(),e._UZ(7,"input",16)(8,"app-error-msg",17),e.qZA(),e.TgZ(9,"div",14)(10,"label",18),e._uU(11,"Code"),e.qZA(),e._UZ(12,"input",19)(13,"app-error-msg",17),e.qZA(),e.TgZ(14,"div",20)(15,"div",21),e.YNc(16,Ot,1,1,"button",22),e.qZA(),e.TgZ(17,"div",21)(18,"button",23),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.resetForm())}),e.qZA()()()()()()()}if(2&o){const i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.roleForm),e.xp6(7),e.Q6J("control",i.roleForm.get("roleName")),e.xp6(5),e.Q6J("control",i.roleForm.get("code")),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.VKq(4,We,i.privleges.ROLE_CREATE))}}const Rt=function(o){return{color:o}};let Se=((B=class{constructor(t,i,r,a,l){this.roleConfigFacade=t,this.messageService=i,this.router=r,this.route=a,this.titlecasePipe=l,this.currentStatus=!0,this.actions=[],this.title="Role",this.first=0,this.rows=25,this.total=0,this.defaultSortField="roleName",this.defaultSortOrder=1,this.privleges=A.UR}ngOnInit(){this.roleConfigFacade.getRoles(this.currentStatus),this.roleForm=new s.cw({id:new s.NI(w.i.raw()),roleName:new s.NI("",[s.kI.required,s.kI.maxLength(200),s.kI.minLength(3)]),code:new s.NI("",[s.kI.required,s.kI.maxLength(5),s.kI.minLength(2)])}),this.cols=[{field:"roleName",header:"Role Name",customExportHeader:"Role Name",sortablefield:"roleName",isSortable:!0,isSearchable:!0},{field:"roleCode",header:"Role Code",sortablefield:"roleCode",isSortable:!0,isSearchable:!0},{field:"lastUpdatedUserName",header:"Last Updated By",sortablefield:"lastUpdatedUserName",isSortable:!0,isSearchable:!0},{field:"lastUpdatedDate",header:"Last Updated Date",sortablefield:"lastUpdatedDate",isSortable:!0}],this.searchableColumns=this.cols.filter(t=>1==t.isSearchable).flatMap(t=>t.field),this.actions=[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.ROLE_UPDATE,visibilityCheckFeild:"isChangeable"},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.ROLE_Delete,visibilityCheckFeild:"isChangeable"}],this.roleConfigFacade.selectRoles$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.configurationList=t)}),this.roleConfigFacade.selectSaveStatus$.pipe((0,f.t)(this)).subscribe(t=>{!t||t.Status!=v.cH&&t.Status!=v.nQ?t&&(this.roleForm.get("id")?.patchValue(w.i.raw()),this.roleForm.get("roleName")?.reset(),this.roleForm.get("code")?.reset(),this.messageService.add({severity:"success",summary:"Success",detail:t?.message}),this.roleConfigFacade.getRoles(this.currentStatus)):this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message})})}changeStatus(t){this.roleConfigFacade.getRoles(!t),this.currentStatus=!t,this.actions=t?[{icon:"pi pi-undo",title:"Activate",type:"ACTIVATE",privilege:this.privleges.ROLE_UPDATE}]:[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.ROLE_UPDATE,visibilityCheckFeild:"isChangeable"},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.ROLE_Delete,visibilityCheckFeild:"isChangeable"}]}resetForm(){this.roleForm.reset(),this.roleForm.get("id")?.patchValue(w.i.raw())}actioInvoked(t){t&&"INACTIVATE"==t.type?(this.roleConfigFacade.updatesaveStatus(),this.roleConfigFacade.saverole({...t.record,isActive:!1})):t&&"EDIT"==t.type?(this.roleForm.get("id")?.patchValue(t.record.id),this.roleForm.get("roleName")?.patchValue(t.record.roleName),this.roleForm.get("code")?.patchValue(t.record.roleCode)):t&&"ACTIVATE"==t.type&&(this.roleConfigFacade.updatesaveStatus(),this.roleConfigFacade.saverole({...t.record,isActive:!0}))}submit(){this.roleConfigFacade.updatesaveStatus(),this.roleConfigFacade.saverole({id:this.roleForm.get("id")?.value,roleName:this.roleForm.get("roleName")?.value,roleCode:this.roleForm.get("code")?.value?.toUpperCase(),isActive:!0})}setPrivileges(){this.router.navigateByUrl("configuration/role/privileges")}ngOnDestroy(){this.roleConfigFacade.reset()}}).\u0275fac=function(t){return new(t||B)(e.Y36(Te),e.Y36(C.ez),e.Y36(u.F0),e.Y36(u.gz),e.Y36(m.rS))},B.\u0275cmp=e.Xpm({type:B,selectors:[["app-role"]],features:[e._Bn([m.rS])],decls:15,vars:21,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,""],["pButton","","pRipple","","type","button","label","Privileges","class","p-button-secondary",3,"click",4,"ngxPermissionsOnly"],["class","grid formgrid mb-3",4,"ngIf"],[1,"grid","formgrid"],[1,"col-12","lg:col-9","md:col-9","flex"],[2,"font-size","small","font-weight","600","margin-left","5px",3,"ngStyle"],[3,"records","defaultSortField","defaultSortOrder","cols","fileName","rows","total","actions","searchableColumns","defaultstatus","hasActiveInactive","invokeAction","changeStatus"],["pButton","","pRipple","","type","button","label","Privileges",1,"p-button-secondary",3,"click"],[1,"grid","formgrid","mb-3"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"p-formgrid","grid"],[1,"field","col-12","md:col-6","lg:col-3"],["htmlFor","roleName"],["pInputText","","formControlName","roleName","type","text"],[3,"control"],["htmlFor","code"],["pInputText","","formControlName","code","type","text"],[1,"col-12","md:col-6","flex","lg:col-2",2,"margin-top","25px"],[1,"col"],["pButton","","type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Reset",1,"p-button-secondary",3,"click"],["pButton","","type","submit","label","Submit",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2),e.YNc(6,xt,1,0,"button",3),e.qZA()(),e.YNc(7,Gt,19,6,"div",4),e.TgZ(8,"div",5)(9,"div",6)(10,"h4"),e._uU(11),e.qZA(),e.TgZ(12,"span",7),e._uU(13),e.qZA()()(),e.TgZ(14,"app-datatable",8),e.NdJ("invokeAction",function(a){return i.actioInvoked(a)})("changeStatus",function(a){return i.changeStatus(a)}),e.qZA()()),2&t&&(e.xp6(4),e.hij("",i.title," "),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.VKq(17,We,i.privleges.ROLE_SET_PRIVILEGE)),e.xp6(1),e.Q6J("ngIf",i.currentStatus),e.xp6(4),e.hij("",i.title," List "),e.xp6(1),e.Q6J("ngStyle",e.VKq(19,Rt,i.currentStatus?"#0abb0a":"#fd7878")),e.xp6(1),e.hij(" ",i.currentStatus?"(Active)":"(In-Active)",""),e.xp6(1),e.Q6J("records",i.configurationList)("defaultSortField",i.defaultSortField)("defaultSortOrder",i.defaultSortOrder)("cols",i.cols)("fileName","Configuration")("rows",i.rows)("total",i.configurationList?i.configurationList.length:0)("actions",i.actions)("searchableColumns",i.searchableColumns)("defaultstatus",!i.currentStatus)("hasActiveInactive",!0))},dependencies:[m.O5,m.PC,s._Y,s.Fj,s.JJ,s.JL,y.Hq,k.o,s.sg,s.u,$.u,se.n,U.gE]}),B);var Y;function Jt(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",17)(1,"label",18),e._uU(2),e.qZA(),e.TgZ(3,"div")(4,"p-inputSwitch",19),e.NdJ("onChange",function(a){const c=e.CHM(i).$implicit,I=e.oxw(2);return e.KtG(I.changeEvent(a,c.privilegeId))}),e.qZA()()()}if(2&o){const i=t.$implicit;e.xp6(2),e.Oqu(i.privilegeType),e.xp6(2),e.Q6J("ngModel",i.isSelected)}}function Qt(o,t){if(1&o&&(e.TgZ(0,"div",10)(1,"div",11)(2,"h5",12),e._uU(3),e.qZA()(),e.TgZ(4,"div",13),e._UZ(5,"div",14),e.TgZ(6,"div",15),e.YNc(7,Jt,5,2,"div",16),e.qZA()()()),2&o){const i=t.$implicit;e.xp6(3),e.Oqu(i.moduleName),e.xp6(4),e.Q6J("ngForOf",i.privilege)}}Se=(0,_.gn)([(0,f.c)()],Se);const $t=function(){return{width:"100%"}},Vt=function(){return{float:"right"}};let Fe=((Y=class{constructor(t,i,r){this.roleConfigFacade=t,this.messageService=i,this.router=r,this.title="Privileges"}ngOnInit(){this.roleConfigFacade.getRoles(!0),this.roleConfigFacade.selectRoles$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.roles=t,t.length>0&&(this.roleConfigFacade.getPrivileges(t[0].id),this.selectedRoles=t[0].id))}),this.roleConfigFacade.selectPrivileges$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.privileges=t)}),this.roleConfigFacade.selectSavePrivilegesStatus$.pipe((0,f.t)(this)).subscribe(t=>{!t||t.Status!=v.cH&&t.Status!=v.nQ?t&&this.messageService.add({severity:"success",summary:"Success",detail:t?.message}):(this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message}),this.roleConfigFacade.getPrivileges(this.selectedRoles))})}changeRole(t){this.roleConfigFacade.getPrivileges(t.value)}changeEvent(t,i){this.roleConfigFacade.updatesPrivilegeaveStatus(),this.roleConfigFacade.savePrivilege(t.checked?{privilegeId:i,roleId:this.selectedRoles,isSelected:!0}:{privilegeId:i,roleId:this.selectedRoles,isSelected:!1})}back(){this.router.navigateByUrl("configuration/role")}ngOnDestroy(){this.roleConfigFacade.reset()}}).\u0275fac=function(t){return new(t||Y)(e.Y36(Te),e.Y36(C.ez),e.Y36(u.F0))},Y.\u0275cmp=e.Xpm({type:Y,selectors:[["app-privileges"]],features:[e._Bn([C.YP,C.ez])],decls:14,vars:11,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between"],[1,"col"],[1,"col",2,"text-align","center"],["optionLabel","roleName","optionValue","id","placeholder","Select a Role",3,"options","showClear","ngModel","onChange","ngModelChange"],["pButton","","pRipple","","label","Back","icon","pi pi-arrow-left",1,"p-button-secondary",3,"click"],[1,"grid","formgrid","mb-3"],[1,"col-12"],[1,"card","p-fluid",2,"padding-bottom","10px","margin-top","10px"],["class","p-formgrid grid","style","margin-bottom: 10px;",4,"ngFor","ngForOf"],[1,"p-formgrid","grid",2,"margin-bottom","10px"],[1,"col-12",2,"margin-top","20px"],[2,"background-color","#f0eded","padding","5px","border-radius","5px"],[1,"row","col-12"],[1,"col-1"],[1,"col-11",2,"display","flex","flex-wrap","wrap"],["class","field col-6  md:col-6  lg:col-2",4,"ngFor","ngForOf"],[1,"field","col-6","md:col-6","lg:col-2"],["htmlFor","value"],[3,"ngModel","onChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"p-dropdown",4),e.NdJ("onChange",function(a){return i.changeRole(a)})("ngModelChange",function(a){return i.selectedRoles=a}),e.qZA()(),e.TgZ(7,"div",2)(8,"button",5),e.NdJ("click",function(){return i.back()}),e.qZA()()(),e.TgZ(9,"div",6)(10,"div",7)(11,"div",8),e.YNc(12,Qt,8,2,"div",9),e.qZA()()()(),e._UZ(13,"p-toast")),2&t&&(e.xp6(4),e.Oqu(i.title),e.xp6(2),e.Akn(e.DdM(9,$t)),e.Q6J("options",i.roles)("showClear",!1)("ngModel",i.selectedRoles),e.xp6(2),e.Akn(e.DdM(10,Vt)),e.xp6(4),e.Q6J("ngForOf",i.privileges))},dependencies:[m.sg,s.JJ,s.On,y.Hq,E.Lt,G.Ql,N.FN]}),Y);Fe=(0,_.gn)([(0,f.c)()],Fe);var R=p(87423);const Ke=(0,n.PH)("[Master Configuration] Get Quick Link List",(0,n.Ky)()),je=(0,n.PH)("[Master Configuration] Get Quick Link List Success",(0,n.Ky)()),He=(0,n.PH)("[Master Configuration]  Save Quick Link ",(0,n.Ky)()),ze=(0,n.PH)("[Master Configuration] Save Quick Link Success",(0,n.Ky)()),Xe=(0,n.PH)("[Master Configuration] Save Quick Link Status"),et=(0,n.PH)("[Master Configuration] Get user Group List"),tt=(0,n.PH)("[Master Configuration] Get userGroup List Success",(0,n.Ky)()),it=(0,n.PH)("[Master Configuration] asc Reset "),ot="QuickLinkState",Yt=(0,n.Lq)({quickLinks:[],saveStatus:null,userGroups:[]},(0,n.on)(je,(o,{quicklinks:t})=>({...o,quickLinks:t})),(0,n.on)(tt,(o,{userGroups:t})=>({...o,userGroups:t})),(0,n.on)(ze,(o,{quicklink:t})=>({...o,saveStatus:{Status:t.status,message:t.message}})),(0,n.on)(Xe,o=>({...o,saveStatus:null})),(0,n.on)(it,o=>({...o,quickLinks:[],saveStatus:null,userGroups:[]}))),Ae=(0,n.ZF)(ot),Wt=(0,n.P1)(Ae,o=>o.quickLinks),Kt=(0,n.P1)(Ae,o=>o.userGroups),jt=(0,n.P1)(Ae,o=>o.saveStatus);let rt=(()=>{var o;class t{constructor(r){this.store=r,this.selectQuickLinks$=this.store.select(Wt),this.selectSaveStatus$=this.store.select(jt),this.selectuserGroups$=this.store.select(Kt)}getQuickLinks(r){this.store.dispatch(Ke({isActive:r}))}userGroupListGet(r){this.store.dispatch(et())}updatesaveStatus(){this.store.dispatch(Xe())}saveQuickLink(r){this.store.dispatch(He({quicklink:r}))}reset(){this.store.dispatch(it())}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(n.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})();var W,we=p(34055);function Ht(o,t){if(1&o&&(e.TgZ(0,"div",29)(1,"span",30),e._uU(2),e.qZA()()),2&o){const i=t.$implicit;e.xp6(2),e.Oqu(i.text)}}function zt(o,t){if(1&o&&e._UZ(0,"button",31),2&o){const i=e.oxw();e.Q6J("disabled",!i.quickLinkForm.valid)}}const Xt=function(){return{width:"100%",margin:"0px 20px"}},ei=function(o,t){return[o,t]},ti=function(o){return{color:o}};let Ie=((W=class{constructor(t,i,r,a,l){this.quickLinkConfigFacade=t,this.messageService=i,this.router=r,this.route=a,this.titlecasePipe=l,this.currentStatus=!0,this.userGroups=[],this.actions=[],this.title="Quick Links",this.first=0,this.rows=10,this.total=0,this.defaultSortField="name",this.defaultSortOrder=1,this.privleges=A.UR}ngOnInit(){this.quickLinkConfigFacade.getQuickLinks(this.currentStatus),this.quickLinkConfigFacade.userGroupListGet(this.currentStatus),this.quickLinkForm=new s.cw({id:new s.NI(w.i.raw()),name:new s.NI("",[s.kI.required,s.kI.maxLength(200),s.kI.minLength(3)]),fileType:new s.NI("",[s.kI.required]),userGroupIdList:new s.NI(null,[s.kI.required]),link:new s.NI("",[s.kI.required])}),this.quickLinkForm.controls.link.valueChanges.subscribe(t=>{t&&t.includes(".")&&this.quickLinkForm.get("fileType")?.patchValue(t.split(".").pop())}),this.cols=[{field:"name",header:"File Name",customExportHeader:"File Name",sortablefield:"name",isSortable:!0,isSearchable:!0},{field:"fileType",header:"File Type",sortablefield:"fileType",isSortable:!0,isSearchable:!0},{field:"link",header:"Link",sortablefield:"link",isLink:!0},{field:"lastUpdatedUserName",header:"Last Updated By",sortablefield:"lastUpdatedUserName",isSortable:!0,isSearchable:!0},{field:"lastUpdatedDate",header:"Last Updated Date",sortablefield:"lastUpdatedDate",isSortable:!0}],this.searchableColumns=this.cols.filter(t=>1==t.isSearchable).flatMap(t=>t.field),this.actions=[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.QL_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.QL_DELETE}],this.quickLinkConfigFacade.selectQuickLinks$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.configurationList=t)}),this.quickLinkConfigFacade.selectuserGroups$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.userGroups=t)}),this.quickLinkConfigFacade.selectSaveStatus$.pipe((0,f.t)(this)).subscribe(t=>{!t||t.Status!=v.cH&&t.Status!=v.nQ?t&&(this.resetForm(),this.messageService.add({severity:"success",summary:"Success",detail:t?.message}),this.quickLinkConfigFacade.getQuickLinks(this.currentStatus)):this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message})})}changeStatus(t){this.quickLinkConfigFacade.getQuickLinks(!t),this.currentStatus=!t,this.actions=t?[{icon:"pi pi-undo",title:"Activate",type:"ACTIVATE",privilege:this.privleges.QL_UPDATE}]:[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.QL_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.QL_DELETE}]}resetForm(){this.quickLinkForm.reset(),this.quickLinkForm.get("id")?.patchValue(w.i.raw())}actioInvoked(t){t&&"INACTIVATE"==t.type?(this.quickLinkConfigFacade.updatesaveStatus(),this.quickLinkConfigFacade.saveQuickLink({...t.record,isActive:!1})):t&&"EDIT"==t.type?(this.quickLinkForm.get("id")?.patchValue(t.record.id),this.quickLinkForm.get("name")?.patchValue(t.record.name),this.quickLinkForm.get("fileType")?.patchValue(t.record.fileType),this.quickLinkForm.get("userGroupIdList")?.patchValue(t.record.userGroupIdList),this.quickLinkForm.get("link")?.patchValue(t.record.link)):t&&"ACTIVATE"==t.type&&(this.quickLinkConfigFacade.updatesaveStatus(),this.quickLinkConfigFacade.saveQuickLink({...t.record,isActive:!0}))}submit(){this.quickLinkConfigFacade.updatesaveStatus(),this.quickLinkConfigFacade.saveQuickLink({id:this.quickLinkForm.get("id")?.value,name:this.quickLinkForm.get("name")?.value,fileType:this.quickLinkForm.get("fileType")?.value,userGroupIdList:this.quickLinkForm.get("userGroupIdList")?.value,link:this.quickLinkForm.get("link")?.value,isActive:!0})}ngOnDestroy(){this.quickLinkConfigFacade.reset()}}).\u0275fac=function(t){return new(t||W)(e.Y36(rt),e.Y36(C.ez),e.Y36(u.F0),e.Y36(u.gz),e.Y36(m.rS))},W.\u0275cmp=e.Xpm({type:W,selectors:[["app-quick-links"]],features:[e._Bn([m.rS])],decls:45,vars:29,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,""],[1,"grid","formgrid","mb-3"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"p-formgrid","grid"],[1,"col-12","flex","md:col-12","lg:col-10",2,"flex-wrap","wrap"],[1,"field","col-12","md:col-6","lg:col-6"],["htmlFor","name"],["pInputText","","formControlName","name","type","text"],[3,"control"],["htmlFor","userGroupIdList"],["formControlName","userGroupIdList","placeholder","Select a User Group","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngStyle"],["pTemplate","item"],[1,"field","col-12","md:col-10","lg:col-10"],["htmlFor","link"],["pInputText","","formControlName","link","type","text"],[1,"field","col-12","md:col-2","lg:col-2"],["htmlFor","fileType"],["pInputText","","readonly","","formControlName","fileType","type","text"],[1,"col-12","md:col-12","lg:col-2",2,"display","flex","justify-content","center","align-items","center"],[1,"col"],["pButton","","type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Reset",1,"p-button-secondary",3,"click"],[1,"grid","formgrid"],[1,"col-12","lg:col-9","md:col-9","flex"],[2,"font-size","small","font-weight","600","margin-left","5px",3,"ngStyle"],[3,"records","defaultSortField","defaultSortOrder","cols","fileName","rows","total","actions","searchableColumns","defaultstatus","hasActiveInactive","invokeAction","changeStatus"],[1,"flex","align-items-center"],[1,"ml-2"],["pButton","","type","submit","label","Submit",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e._UZ(5,"div",2),e.qZA(),e.TgZ(6,"div",3)(7,"form",4),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"label",9),e._uU(13,"Name"),e.qZA(),e._UZ(14,"input",10)(15,"app-error-msg",11),e.qZA(),e.TgZ(16,"div",8)(17,"label",12),e._uU(18,"User Group "),e.qZA(),e.TgZ(19,"p-multiSelect",13),e.YNc(20,Ht,3,1,"ng-template",14),e.qZA(),e._UZ(21,"app-error-msg",11),e.qZA(),e.TgZ(22,"div",15)(23,"label",16),e._uU(24,"Link"),e.qZA(),e._UZ(25,"input",17)(26,"app-error-msg",11),e.qZA(),e.TgZ(27,"div",18)(28,"label",19),e._uU(29,"File Type"),e.qZA(),e._UZ(30,"input",20)(31,"app-error-msg",11),e.qZA()(),e.TgZ(32,"div",21)(33,"div",22),e.YNc(34,zt,1,1,"button",23),e.qZA(),e.TgZ(35,"div",22)(36,"button",24),e.NdJ("click",function(){return i.resetForm()}),e.qZA()()()()()()(),e.TgZ(37,"div",25)(38,"div",26)(39,"h4"),e._uU(40),e.qZA(),e.TgZ(41,"span",27),e._uU(42),e.qZA()()(),e.TgZ(43,"app-datatable",28),e.NdJ("invokeAction",function(a){return i.actioInvoked(a)})("changeStatus",function(a){return i.changeStatus(a)}),e.qZA()(),e._UZ(44,"p-toast")),2&t&&(e.xp6(4),e.hij("",i.title," "),e.xp6(3),e.Q6J("formGroup",i.quickLinkForm),e.xp6(8),e.Q6J("control",i.quickLinkForm.get("name")),e.xp6(4),e.Q6J("options",i.userGroups)("ngStyle",e.DdM(23,Xt)),e.xp6(2),e.Q6J("control",i.quickLinkForm.get("userGroupIdList")),e.xp6(5),e.Q6J("control",i.quickLinkForm.get("link")),e.xp6(5),e.Q6J("control",i.quickLinkForm.get("fileType")),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.WLB(24,ei,i.privleges.QL_CREATE,i.privleges.QL_UPDATE)),e.xp6(6),e.hij("",i.title," List "),e.xp6(1),e.Q6J("ngStyle",e.VKq(27,ti,i.currentStatus?"#0abb0a":"#fd7878")),e.xp6(1),e.hij(" ",i.currentStatus?"(Active)":"(In-Active)",""),e.xp6(1),e.Q6J("records",i.configurationList)("defaultSortField",i.defaultSortField)("defaultSortOrder",i.defaultSortOrder)("cols",i.cols)("fileName","Configuration")("rows",10)("total",i.configurationList?i.configurationList.length:0)("actions",i.actions)("searchableColumns",i.searchableColumns)("defaultstatus",!i.currentStatus)("hasActiveInactive",!0))},dependencies:[m.mk,m.PC,s._Y,s.Fj,s.JJ,s.JL,C.jx,y.Hq,k.o,we.NU,s.sg,s.u,$.u,N.FN,se.n,U.gE]}),W);Ie=(0,_.gn)([(0,f.c)()],Ie);var K,ke=p(40987),st=p(30505),Ze=p(90354);function ii(o,t){if(1&o&&e._UZ(0,"button",40),2&o){const i=e.oxw(2);e.Q6J("disabled",!i.templateForm.valid)}}const oi=function(o,t){return[o,t]};function ri(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",8)(1,"form",9),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13)(6,"label",14),e._uU(7,"Department"),e.qZA(),e._UZ(8,"p-dropdown",15)(9,"app-error-msg",16),e.qZA(),e.TgZ(10,"div",17)(11,"label",18),e._uU(12,"Name"),e.qZA(),e._UZ(13,"input",19)(14,"app-error-msg",16),e.qZA(),e.TgZ(15,"div",17)(16,"label",20),e._uU(17,"Strength"),e.qZA(),e._UZ(18,"input",21)(19,"app-error-msg",16),e.qZA(),e.TgZ(20,"div",22)(21,"label",23),e._uU(22,"Code"),e.qZA(),e._UZ(23,"input",24)(24,"app-error-msg",16),e.qZA(),e.TgZ(25,"div",13)(26,"label",25),e._uU(27,"Duration in Days"),e.qZA(),e.TgZ(28,"span",26),e._UZ(29,"p-inputNumber",27),e.qZA(),e._UZ(30,"app-error-msg",16),e.qZA(),e.TgZ(31,"div",13)(32,"label",28),e._uU(33,"Work Type"),e.qZA(),e._UZ(34,"p-dropdown",29)(35,"app-error-msg",16),e.qZA(),e.TgZ(36,"div",13)(37,"label",30),e._uU(38,"Sub Work Type"),e.qZA(),e._UZ(39,"p-dropdown",31)(40,"app-error-msg",16),e.qZA(),e.TgZ(41,"div",13)(42,"label",32),e._uU(43,"Service Type"),e.qZA(),e._UZ(44,"p-dropdown",33)(45,"app-error-msg",16),e.qZA(),e.TgZ(46,"div",13)(47,"label",34),e._uU(48,"Category Type"),e.qZA(),e._UZ(49,"p-dropdown",35)(50,"app-error-msg",16),e.qZA()(),e.TgZ(51,"div",36)(52,"div",37),e.YNc(53,ii,1,1,"button",38),e.qZA(),e.TgZ(54,"div",37)(55,"button",39),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.resetForm())}),e.qZA()()()()()()()}if(2&o){const i=e.oxw();e.xp6(1),e.Q6J("formGroup",i.templateForm),e.xp6(7),e.Q6J("options",i.departments)("showClear",!0),e.xp6(1),e.Q6J("control",i.templateForm.get("departmentId")),e.xp6(5),e.Q6J("control",i.templateForm.get("name")),e.xp6(5),e.Q6J("control",i.templateForm.get("strength")),e.xp6(5),e.Q6J("control",i.templateForm.get("templateCode")),e.xp6(6),e.Q6J("control",i.templateForm.get("durationInDays")),e.xp6(4),e.Q6J("options",i.workTypes)("showClear",!0),e.xp6(1),e.Q6J("control",i.templateForm.get("workTypeId")),e.xp6(4),e.Q6J("options",i.subWorkTypes)("showClear",!0),e.xp6(1),e.Q6J("control",i.templateForm.get("subWorkTypeId")),e.xp6(4),e.Q6J("options",i.serviceTypes)("showClear",!0),e.xp6(1),e.Q6J("control",i.templateForm.get("servicetypeId")),e.xp6(4),e.Q6J("options",i.categoryTypes)("showClear",!0),e.xp6(1),e.Q6J("control",i.templateForm.get("categorytypeId")),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.WLB(21,oi,i.privleges.TEMPLATE_CREATE,i.privleges.TEMPLATE_UPDATE))}}const si=function(o){return{color:o}};let Le=((K=class{constructor(t,i,r,a,l,c){this.templateConfigFacade=t,this.twoColConfigService=i,this.messageService=r,this.router=a,this.route=l,this.titlecasePipe=c,this.currentStatus=!0,this.actions=[],this.title="Templates",this.first=0,this.rows=10,this.total=0,this.defaultSortField="templateNumber",this.defaultSortOrder=1,this.privleges=A.UR}ngOnInit(){this.templateConfigFacade.getTemplates(this.currentStatus),this.templateConfigFacade.getworkTypeList(),this.templateConfigFacade.getserviceList(),this.templateConfigFacade.getcategoryTypeList(),this.twoColConfigService.getAllDepartments().subscribe(t=>{this.departments=t.data},t=>{}),this.templateForm=new s.cw({id:new s.NI(w.i.raw()),name:new s.NI("",[s.kI.required,s.kI.maxLength(200),s.kI.minLength(3)]),durationInDays:new s.NI("",[s.kI.required,s.kI.min(1),s.kI.max(3650)]),workTypeId:new s.NI("",[s.kI.required]),strength:new s.NI("",[s.kI.required]),templateCode:new s.NI("",[s.kI.required]),subWorkTypeId:new s.NI("",[s.kI.required]),departmentId:new s.NI("",[s.kI.required]),servicetypeId:new s.NI("",[s.kI.required]),categorytypeId:new s.NI("",[s.kI.required])}),this.cols=[{field:"department",header:"Department",customExportHeader:"Department",sortablefield:"department",isSortable:!0,isSearchable:!0},{field:"name",header:"Name",customExportHeader:"Name",sortablefield:"name",isSortable:!0,isSearchable:!0},{field:"templateCode",header:"Code",customExportHeader:"Code",sortablefield:"templateCode",isSortable:!0,isSearchable:!0},{field:"strength",header:"Strength",customExportHeader:"Strength",sortablefield:"strength",isSortable:!0,isSearchable:!0},{field:"workType",header:"Work",customExportHeader:"Work Type",sortablefield:"workType",isSortable:!0,isSearchable:!0},{field:"subWorkType",header:"Sub Work",customExportHeader:"Sub Work Type",sortablefield:"subWorkType",isSortable:!0,isSearchable:!0},{field:"serviceType",header:"serviceType",customExportHeader:"Service Type",sortablefield:"serviceType",isSortable:!0,isSearchable:!0},{field:"categoryType",header:"categoryType",customExportHeader:"Category Type",sortablefield:"categoryType",isSortable:!0,isSearchable:!0},{field:"durationInDays",header:"Days",sortablefield:"durationInDays",isSortable:!0,isSearchable:!0},{field:"status",header:"Status",sortablefield:"status",isSortable:!0,isSearchable:!0,isBadge:!0,badgeColor:"#ff0000"},{field:"lastUpdatedDate",header:"Last Updated Date",sortablefield:"lastUpdatedDate",isSortable:!0}],this.searchableColumns=this.cols.filter(t=>1==t.isSearchable).flatMap(t=>t.field),this.actions=[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.TEMPLATE_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.TEMPLATE_DELETE},{icon:"pi pi-arrow-right",title:"Set Milestone",type:"MILESTONE",privilege:this.privleges.TEMPLATE_SET_MILESTONE}],this.templateConfigFacade.selectTemplates$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.configurationList=t)}),this.templateConfigFacade.selectWorkTypes$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.workTypes=t)}),this.templateConfigFacade.selectServiceTypes$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.serviceTypes=t)}),this.templateConfigFacade.selectCategoryTypes$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.categoryTypes=t)}),this.templateConfigFacade.selectsubWorkTypes$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.subWorkTypes=t)}),this.templateConfigFacade.selectSaveStatus$.pipe((0,f.t)(this)).subscribe(t=>{!t||t.Status!=v.cH&&t.Status!=v.nQ?t&&(this.resetForm(),this.messageService.add({severity:"success",summary:"Success",detail:t?.message}),this.templateConfigFacade.updatesaveStatus(),this.templateConfigFacade.getTemplates(this.currentStatus)):this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message})}),this.templateForm.get("workTypeId")?.valueChanges.subscribe(t=>{this.templateConfigFacade.getsubworkTypeList(t)})}changeStatus(t){this.templateConfigFacade.getTemplates(!t),this.currentStatus=!t,this.actions=t?[{icon:"pi pi-undo",title:"Activate",type:"ACTIVATE",privilege:this.privleges.TEMPLATE_UPDATE}]:[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.TEMPLATE_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.TEMPLATE_DELETE},{icon:"pi pi-arrow-right",title:"Set Milestone",type:"MILESTONE",privilege:this.privleges.TEMPLATE_SET_MILESTONE}]}resetForm(){this.templateConfigFacade.updatesaveStatus(),this.templateForm.reset(),this.templateForm.get("id")?.patchValue(w.i.raw())}actioInvoked(t){t&&"INACTIVATE"==t.type?(this.templateConfigFacade.updatesaveStatus(),this.templateConfigFacade.saveTemplates({...t.record,isActive:!1})):t&&"EDIT"==t.type?(this.templateForm.get("id")?.patchValue(t.record.id),this.templateForm.get("name")?.patchValue(t.record.name),this.templateForm.get("departmentId")?.patchValue(t.record.departmentId),this.templateForm.get("durationInDays")?.patchValue(t.record.durationInDays),this.templateForm.get("strength")?.patchValue(t.record.strength),this.templateForm.get("subWorkTypeId")?.patchValue(t.record.subWorkTypeId),this.templateForm.get("templateCode")?.patchValue(t.record.templateCode),this.templateForm.get("workTypeId")?.patchValue(t.record.workTypeId),this.templateForm.get("servicetypeId")?.patchValue(t.record.serviceTypeId),this.templateForm.get("categorytypeId")?.patchValue(t.record.categoryTypeId)):t&&"ACTIVATE"==t.type?(this.templateConfigFacade.updatesaveStatus(),this.templateConfigFacade.saveTemplates({...t.record,isActive:!0})):t&&"MILESTONE"==t.type&&this.router.navigate(["configuration/milestones",t.record.id])}submit(){this.templateConfigFacade.updatesaveStatus(),this.templateConfigFacade.saveTemplates({id:this.templateForm.get("id")?.value,name:this.templateForm.get("name")?.value,durationInDays:this.templateForm.get("durationInDays")?.value,workTypeId:this.templateForm.get("workTypeId")?.value,serviceTypeId:this.templateForm.get("servicetypeId")?.value,categoryTypeId:this.templateForm.get("categorytypeId")?.value,isActive:!0,subWorkTypeId:this.templateForm.get("subWorkTypeId")?.value,departmentId:this.templateForm.get("departmentId")?.value,strength:this.templateForm.get("strength")?.value,templateCode:this.templateForm.get("templateCode")?.value})}ngOnDestroy(){this.templateConfigFacade.reset()}}).\u0275fac=function(t){return new(t||K)(e.Y36(ke.S),e.Y36(st.g),e.Y36(C.ez),e.Y36(u.F0),e.Y36(u.gz),e.Y36(m.rS))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-templates"]],features:[e._Bn([m.rS])],decls:15,vars:18,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,""],["class","grid formgrid mb-3",4,"ngIf"],[1,"grid","formgrid"],[1,"col-12","lg:col-9","md:col-9","flex"],[2,"font-size","small","font-weight","600","margin-left","5px",3,"ngStyle"],[3,"records","defaultSortField","defaultSortOrder","cols","fileName","rows","total","actions","searchableColumns","defaultstatus","hasActiveInactive","invokeAction","changeStatus"],[1,"grid","formgrid","mb-3"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"p-formgrid","grid"],[1,"col-12","flex","md:col-12","lg:col-10",2,"flex-wrap","wrap"],[1,"field","col-12","md:col-4","lg:col-4"],["htmlFor","departmentId"],["optionLabel","text","optionValue","value","placeholder","Select a Department","formControlName","departmentId",3,"options","showClear"],[3,"control"],[1,"field","col-12","md:col-3","lg:col-3"],["htmlFor","name"],["pInputText","","formControlName","name","type","text"],["htmlFor","strength"],["pInputText","","formControlName","strength","type","text"],[1,"field","col-12","md:col-2","lg:col-2"],["htmlFor","templateCode"],["pInputText","","formControlName","templateCode","type","text"],["htmlFor","durationInDays"],[1,"p-float-label"],["inputId","inputnumber","formControlName","durationInDays"],["htmlFor","workTypeId"],["optionLabel","text","optionValue","value","placeholder","Select a Work Type","formControlName","workTypeId",3,"options","showClear"],["htmlFor","subWorkTypeId"],["optionLabel","value","optionValue","id","placeholder","Select a Sub work Type","formControlName","subWorkTypeId",3,"options","showClear"],["htmlFor","servicetypeId"],["optionLabel","text","optionValue","value","placeholder","Select a Service Type","formControlName","servicetypeId",3,"options","showClear"],["htmlFor","categorytypeId"],["optionLabel","text","optionValue","value","placeholder","Select a Category Type","formControlName","categorytypeId",3,"options","showClear"],[1,"col-12","md:col-12","lg:col-2",2,"display","flex","justify-content","center","align-items","center"],[1,"col"],["pButton","","type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Reset",1,"p-button-secondary",3,"click"],["pButton","","type","submit","label","Submit",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e._UZ(5,"div",2),e.qZA(),e.YNc(6,ri,56,24,"div",3),e.TgZ(7,"div",4)(8,"div",5)(9,"h4"),e._uU(10),e.qZA(),e.TgZ(11,"span",6),e._uU(12),e.qZA()()(),e.TgZ(13,"app-datatable",7),e.NdJ("invokeAction",function(a){return i.actioInvoked(a)})("changeStatus",function(a){return i.changeStatus(a)}),e.qZA()(),e._UZ(14,"p-toast")),2&t&&(e.xp6(4),e.Oqu(i.title),e.xp6(2),e.Q6J("ngIf",i.currentStatus),e.xp6(4),e.hij("",i.title," List"),e.xp6(1),e.Q6J("ngStyle",e.VKq(16,si,i.currentStatus?"#0abb0a":"#fd7878")),e.xp6(1),e.hij(" ",i.currentStatus?"(Active)":"(In-Active)",""),e.xp6(1),e.Q6J("records",i.configurationList)("defaultSortField",i.defaultSortField)("defaultSortOrder",i.defaultSortOrder)("cols",i.cols)("fileName","Configuration")("rows",10)("total",i.configurationList?i.configurationList.length:0)("actions",i.actions)("searchableColumns",i.searchableColumns)("defaultstatus",!i.currentStatus)("hasActiveInactive",!0))},dependencies:[m.O5,m.PC,s._Y,s.Fj,s.JJ,s.JL,y.Hq,k.o,E.Lt,Ze.Rn,s.sg,s.u,$.u,N.FN,se.n,U.gE]}),K);Le=(0,_.gn)([(0,f.c)()],Le);var j,D=p(68352),ni=p(46804),Ee=p(31494);const ai=function(){return{"margin-right":"20px;"}};function li(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"p-button",27),e.NdJ("onClick",function(a){e.CHM(i);const l=e.oxw(2);return e.KtG(l.addnewRow(a))}),e.qZA()}2&o&&e.Q6J("ngStyle",e.DdM(1,ai))}const me=function(o){return[o]};function ci(o,t){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,li,1,2,"p-button",26),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,me,i.privleges.TEMPLATE_SET_MILESTONE))}}function pi(o,t){if(1&o&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.Oqu(i.milestoneNameErrorMsg)}}function ui(o,t){if(1&o&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&o){const i=e.oxw();e.xp6(1),e.Oqu(i.milestoneCodeErrorMsg)}}function di(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(a){e.CHM(i);const l=e.oxw(2).$implicit,c=e.oxw().index,I=e.oxw();return e.KtG(I.actioInvoked(l.type,c,a))}),e.qZA()}if(2&o){const i=e.oxw(2).$implicit;e.Q6J("icon",i.icon)("title",i.title)}}function gi(o,t){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,di,1,2,"button",38),e.qZA()),2&o){const i=e.oxw(3);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,me,i.privleges.TEMPLATE_SET_MILESTONE))}}function mi(o,t){if(1&o&&(e.ynx(0),e.YNc(1,gi,2,3,"div",10),e.BQk()),2&o){const i=t.$implicit,r=e.oxw().index,a=e.oxw();e.xp6(1),e.Q6J("ngIf",!a.defaultstatus&&!a.milestoneList[r].controls.id.value&&"DELETE"==i.type||!a.defaultstatus&&a.milestoneList[r].controls.id.value&&"INACTIVATE"==i.type||a.defaultstatus&&"ACTIVATE"==i.type)}}function fi(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"tr",28)(1,"td",29),e._UZ(2,"i",30),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",31),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"input",32),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"p-inputNumber",33),e.qZA(),e.TgZ(10,"td",34)(11,"p-inputSwitch",35),e.NdJ("onChange",function(a){const c=e.CHM(i).index,I=e.oxw();return I.isPaymentRequired(a),e.KtG(I.milestoneList[c].controls.paymentPercentage.setValue(0))}),e.qZA()(),e.TgZ(12,"td"),e._UZ(13,"p-inputNumber",36),e.qZA(),e.TgZ(14,"td"),e.YNc(15,mi,2,1,"ng-container",37),e.qZA()()}if(2&o){const i=t.index,r=e.oxw();e.Q6J("formGroupName",i),e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.Q6J("maxlength",250),e.xp6(2),e.Q6J("maxlength",10),e.xp6(2),e.Q6J("max",73e3),e.xp6(4),e.Q6J("max",100)("readonly",!r.milestoneList[i].controls.isPaymentRequired.value),e.xp6(2),e.Q6J("ngForOf",r.actions)}}function hi(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(a){e.CHM(i);const l=e.oxw(2);return e.KtG(l.publish(a))}),e.qZA()}if(2&o){const i=e.oxw(2);e.Q6J("disabled",!i.milestoneForm.valid||i.durationErrorMsg||i.milestoneNameErrorMsg||i.paymentreqErrorMsg)}}function vi(o,t){if(1&o&&e._UZ(0,"button",46),2&o){const i=e.oxw(2);e.Q6J("disabled",!i.milestoneForm.valid||i.durationErrorMsg||i.milestoneNameErrorMsg||i.paymentreqErrorMsg)}}function Ci(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"div",40)(1,"div",41),e.YNc(2,hi,1,1,"button",42),e.qZA(),e.TgZ(3,"div",41),e.YNc(4,vi,1,1,"button",43),e.qZA(),e.TgZ(5,"div",2)(6,"button",44),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return e.KtG(a.resetForm())}),e.qZA()()()}if(2&o){const i=e.oxw();e.xp6(2),e.Q6J("ngxPermissionsOnly",e.VKq(2,me,i.privleges.TEMPLATE_SET_MILESTONE)),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.VKq(4,me,i.privleges.TEMPLATE_SET_MILESTONE))}}const _i=function(){return{float:"right"}},yi=function(){return{width:"10em"}};let qe=((j=class{get f(){return this.milestoneForm.controls}get t(){return this.f.milestones}get milestoneList(){return this.t.controls}get milestoneNameErrorMsg(){var t;return this.milestoneList.map(i=>{i.controls.milestoneName.errors&&(t=i.controls.milestoneName.errors)}),this.defaultstatus?null:t&&t.required?"Required":null}get milestoneCodeErrorMsg(){var t;return this.milestoneList.map(i=>{i.controls.milestoneCode.errors&&(t=i.controls.milestoneCode.errors)}),this.defaultstatus?null:t&&t.required?"Required":null}get durationErrorMsg(){var t;return this.milestoneList.map(i=>{i.controls.durationInDays.errors&&(t=i.controls.durationInDays.errors)}),this.defaultstatus?null:t&&t.required?"Required":this.totaldays!=(this.templateWithMilestone?.durationInDays??0)?`Sum of days should be ${this.templateWithMilestone?.durationInDays??0}`:null}get paymentreqErrorMsg(){var t;return this.milestoneList.map(i=>{i.controls.paymentPercentage.errors&&(t=i.controls.paymentPercentage.errors)}),this.defaultstatus?null:t&&t.required?"Required":100!=this.totalpercenatge?"Sum of % should be 100":null}get totaldays(){let t=0;return this.milestoneList.map(i=>t+=i.controls.durationInDays.value),t}get totalpercenatge(){let t=0;return this.milestoneList.map(i=>t+=i.controls.paymentPercentage.value),t}constructor(t,i,r,a,l,c,I){this.messageService=t,this.router=i,this.cdr=r,this.confirmationService=a,this.route=l,this.formBuilder=c,this.templateConfigFacade=I,this.title="Milestone",this.defaultstatus=!1,this.onLabel="Show Active",this.offLabel="Show In-Active",this.actions=[],this.isPublish=!1,this.privleges=A.UR}ngOnInit(){this.isPublish=!1,this.route.params.subscribe(t=>{this.templateId=t.id}),this.templateConfigFacade.templateWithMilestoneListGet(this.templateId,!this.defaultstatus,!0,""),this.milestoneForm=this.formBuilder.group({milestones:new s.Oe([])}),this.templateConfigFacade.selectTemplateWithMilestones$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.templateWithMilestone=t,this.generateDefaultRows(this.templateWithMilestone.templateMilestones))}),this.actions=[{icon:"pi pi-trash",title:"Delete",type:"DELETE"},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE"}],this.templateConfigFacade.selectmilestoneSaveStatus$.pipe((0,f.t)(this)).subscribe(t=>{!t||t.Status!=v.cH&&t.Status!=v.nQ?t&&(this.messageService.add({severity:"success",summary:"Success",detail:t?.message}),this.templateConfigFacade.updatemilestonessaveStatus(),this.isPublish&&this.router.navigateByUrl("configuration/templates"),this.templateConfigFacade.templateWithMilestoneListGet(this.templateId,!this.defaultstatus,!0,"")):(this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message}),this.templateConfigFacade.updatemilestonessaveStatus(),this.templateConfigFacade.templateWithMilestoneListGet(this.templateId,!this.defaultstatus,!0,""))})}drop(t){(0,D.bA)(this.milestoneList,t.previousIndex,t.currentIndex);let i=0;this.t.controls.map(r=>{i++,r.controls.orderNumber.setValue(i)})}changeEvent(t){this.templateConfigFacade.templateWithMilestoneListGet(this.templateId,!this.defaultstatus,!0,""),this.actions=t.checked?[{icon:"pi pi-undo",title:"Activate",type:"ACTIVATE"}]:[{icon:"pi pi-trash",title:"Delete",type:"DELETE"},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE"}]}generateDefaultRows(t){this.t.clear(),t&&t.forEach(i=>{this.t.push(this.formBuilder.group({id:[i.id],templateId:[i.templateId,[s.kI.required]],milestoneName:[i.milestoneName,[s.kI.required]],orderNumber:[i.orderNumber,[s.kI.required]],milestoneCode:[i.milestoneCode,[s.kI.required]],durationInDays:[i.durationInDays,[s.kI.required]],isPaymentRequired:[i.isPaymentRequired,[s.kI.required]],paymentPercentage:[i.paymentPercentage,[s.kI.required]],isActive:[i.isActive,[s.kI.required]],isPublished:[!1,[s.kI.required]]}))})}addnewRow(t){this.confirmationService.confirm({key:"confirm2",target:t.target||new EventTarget,message:"Are you sure that you want to Add?",icon:"pi pi-exclamation-triangle",accept:()=>{this.t.push(this.formBuilder.group({id:[null],templateId:[this.templateId,[s.kI.required]],milestoneName:[null,[s.kI.required]],milestoneCode:[null,[s.kI.required]],orderNumber:[1,[s.kI.required]],durationInDays:[null,[s.kI.required]],isPaymentRequired:[!1,[s.kI.required]],paymentPercentage:[0,[s.kI.required]],isActive:[!0,[s.kI.required]],isPublished:[!1,[s.kI.required]]}))},reject:()=>{}})}isPaymentRequired(t){}submit(t=!1){const i=this.milestoneForm.controls.milestones.value;var r=1;this.isPublish=t,i.forEach(a=>{a.orderNumber=r,a.isPublished=t,r++}),this.templateConfigFacade.savemilestones(i)}publish(t){this.confirmationService.confirm({key:"confirm2",target:t.target||new EventTarget,message:"Are you sure that you want to Publish?",icon:"pi pi-exclamation-triangle",accept:()=>{this.submit(!0)},reject:()=>{}})}resetForm(){this.router.navigateByUrl("configuration/templates")}back(){this.router.navigateByUrl("configuration/templates")}actioInvoked(t,i,r){"INACTIVATE"==t?this.confirmationService.confirm({key:"confirm2",target:r.target||new EventTarget,message:"Are you sure that you want to InActivate?",icon:"pi pi-exclamation-triangle",accept:()=>{this.t.controls[i].controls.isActive.setValue(!1),this.submit()},reject:()=>{}}):"DELETE"==t?this.confirmationService.confirm({key:"confirm2",target:r.target||new EventTarget,message:"Are you sure that you want to Delete?",icon:"pi pi-exclamation-triangle",accept:()=>{this.t.removeAt(i)},reject:()=>{}}):"ACTIVATE"==t&&this.confirmationService.confirm({key:"confirm2",target:r.target||new EventTarget,message:"Are you sure that you want to Activate?",icon:"pi pi-exclamation-triangle",accept:()=>{this.t.controls[i].controls.isActive.setValue(!0),this.submit()},reject:()=>{}})}ngOnDestroy(){this.templateConfigFacade.reset()}}).\u0275fac=function(t){return new(t||j)(e.Y36(C.ez),e.Y36(u.F0),e.Y36(e.sBO),e.Y36(C.YP),e.Y36(u.gz),e.Y36(s.qu),e.Y36(ke.S))},j.\u0275cmp=e.Xpm({type:j,selectors:[["app-template-milestone"]],features:[e._Bn([C.YP])],decls:87,vars:28,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,""],["pButton","","pRipple","","label","Back","icon","pi pi-arrow-left",1,"p-button-secondary",3,"click"],[1,"grid","formgrid","mb-3"],[1,"col-12"],[1,"card","p-fluid",2,"padding-bottom","10px","background-color","#e6e7ff"],[1,"p-formgrid","grid",2,"text-align","center"],[1,"col","boldlabel"],[1,"col","hedsr",2,"display","flex","text-align","end","justify-content","end"],[4,"ngIf"],[3,"ngModel","onLabel","offLabel","ngModelChange","onChange"],["key","confirm2"],[1,"grid","formgrid","mb-3",2,"margin-bottom","40px !important"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"p-formgrid","grid",2,"overflow-x","auto"],[1,"table"],[2,"min-width","300px"],["class","tableheadererrormsg",4,"ngIf"],[2,"min-width","100px"],[2,"font-weight","300"],[1,"tableheadererrormsg"],["cdkDropList","","formArrayName","milestones",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",3,"formGroupName",4,"ngFor","ngForOf"],["class","col-12 md:col-12 lg:col-12","style","display: flex;justify-content: end;",4,"ngIf"],["icon","pi pi-plus",3,"ngStyle","onClick",4,"ngxPermissionsOnly"],["icon","pi pi-plus",3,"ngStyle","onClick"],["cdkDrag","","cdkDragLockAxis","y",3,"formGroupName"],["cdkDragHandle","",2,"cursor","grabbing"],[1,"pi","pi-bars","mr-2"],["pInputText","","formControlName","milestoneName","type","text",3,"maxlength"],["pInputText","","formControlName","milestoneCode","type","text",3,"maxlength"],["inputId","inputnumber","formControlName","durationInDays",3,"max"],[2,"text-align","center"],["formControlName","isPaymentRequired",3,"onChange"],["inputId","inputnumber","formControlName","paymentPercentage",3,"max","readonly"],[4,"ngFor","ngForOf"],["type","button","pButton","","pRipple","","class","p-button-text mr-2","styleClass","p-button-text",3,"icon","title","click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","styleClass","p-button-text",1,"p-button-text","mr-2",3,"icon","title","click"],[1,"col-12","md:col-12","lg:col-12",2,"display","flex","justify-content","end"],[1,"",2,"margin-right","20px"],["pButton","","type","button","label","Publish","class","p-button-success",3,"disabled","click",4,"ngxPermissionsOnly"],["pButton","","type","submit","label","Save",3,"disabled",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Cancel",1,"p-button-secondary",3,"click"],["pButton","","type","button","label","Publish",1,"p-button-success",3,"disabled","click"],["pButton","","type","submit","label","Save",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return i.back()}),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"span"),e._uU(13,"Name: "),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"div",8)(16,"span"),e._uU(17,"Code: "),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"div",8)(20,"span"),e._uU(21,"Duration: "),e.qZA(),e._uU(22),e.qZA(),e.TgZ(23,"div",8)(24,"span"),e._uU(25,"Strength: "),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"div",8)(28,"span"),e._uU(29,"Work: "),e.qZA(),e._uU(30),e.qZA(),e.TgZ(31,"div",8)(32,"span"),e._uU(33,"Sub Work: "),e.qZA(),e._uU(34),e.qZA(),e.TgZ(35,"div",8)(36,"span"),e._uU(37,"Service Type: "),e.qZA(),e._uU(38),e.qZA(),e.TgZ(39,"div",8)(40,"span"),e._uU(41,"Category Type: "),e.qZA(),e._uU(42),e.qZA()()()()(),e.TgZ(43,"div",9),e.YNc(44,ci,2,3,"div",10),e.TgZ(45,"div")(46,"p-toggleButton",11),e.NdJ("ngModelChange",function(a){return i.defaultstatus=a})("onChange",function(a){return i.changeEvent(a)}),e.qZA()()(),e._UZ(47,"p-confirmPopup",12),e.TgZ(48,"div",13)(49,"form",14),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(50,"div",15)(51,"div",16)(52,"table",17)(53,"thead")(54,"tr")(55,"th"),e._uU(56,"S.No"),e.qZA(),e.TgZ(57,"th",18),e._uU(58,"Milestone Name "),e._UZ(59,"br"),e.YNc(60,pi,2,1,"span",19),e.qZA(),e.TgZ(61,"th",20),e._uU(62,"Milestone Code "),e._UZ(63,"br"),e.YNc(64,ui,2,1,"span",19),e.qZA(),e.TgZ(65,"th"),e._uU(66,"Duration In Days "),e.TgZ(67,"span",21),e._uU(68),e.qZA(),e._UZ(69,"br"),e.TgZ(70,"span",22),e._uU(71),e.qZA()(),e.TgZ(72,"th"),e._uU(73,"is Payment Required"),e.qZA(),e.TgZ(74,"th"),e._uU(75,"Payment Percentage "),e.TgZ(76,"span",21),e._uU(77),e.qZA(),e._UZ(78,"br"),e.TgZ(79,"span",22),e._uU(80),e.qZA()(),e.TgZ(81,"th"),e._uU(82,"Action"),e.qZA()()(),e.TgZ(83,"tbody",23),e.NdJ("cdkDropListDropped",function(a){return i.drop(a)}),e.YNc(84,fi,16,8,"tr",24),e.qZA()()()(),e.YNc(85,Ci,7,6,"div",25),e.qZA()()(),e._UZ(86,"p-toast")),2&t&&(e.xp6(4),e.Oqu(i.title),e.xp6(2),e.Akn(e.DdM(26,_i)),e.xp6(8),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.name)||""," "),e.xp6(4),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.templateCode)||""," "),e.xp6(4),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.durationInDays)||0," - Days "),e.xp6(4),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.strength)||""," "),e.xp6(4),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.workType)||""," "),e.xp6(4),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.subWorkType)||""," "),e.xp6(4),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.serviceType)||""," "),e.xp6(4),e.hij(" ",(null==i.templateWithMilestone?null:i.templateWithMilestone.categoryType)||""," "),e.xp6(2),e.Q6J("ngIf",!i.defaultstatus),e.xp6(2),e.Akn(e.DdM(27,yi)),e.Q6J("ngModel",i.defaultstatus)("onLabel",i.onLabel)("offLabel",i.offLabel),e.xp6(3),e.Q6J("formGroup",i.milestoneForm),e.xp6(11),e.Q6J("ngIf",i.milestoneNameErrorMsg),e.xp6(4),e.Q6J("ngIf",i.milestoneCodeErrorMsg),e.xp6(4),e.hij("(",i.totaldays,")"),e.xp6(3),e.Oqu(i.durationErrorMsg),e.xp6(6),e.hij("(",i.totalpercenatge,")"),e.xp6(3),e.Oqu(i.paymentreqErrorMsg),e.xp6(4),e.Q6J("ngForOf",i.t.controls),e.xp6(1),e.Q6J("ngIf",!i.defaultstatus))},dependencies:[m.sg,m.O5,m.PC,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.On,y.Hq,y.zx,k.o,Ze.Rn,ni.CO,G.Ql,s.sg,s.u,s.x0,s.CE,Ee.P,N.FN,D.Wj,D.Zt,D.Bh,U.gE],styles:[".hedsr button{margin-right:20px}.boldlabel[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.tableheadererrormsg[_ngcontent-%COMP%]{font-weight:400;color:#ff0052}"]}),j);qe=(0,_.gn)([(0,f.c)()],qe);const nt=(0,n.PH)("[Approval Flow Configuration] Get Approval Flow Role List",(0,n.Ky)()),at=(0,n.PH)("[Approval Flow Configuration] Get Approval Flow Role List Success",(0,n.Ky)()),lt=(0,n.PH)("[Approval Flow Configuration] Get Approval Flow List",(0,n.Ky)()),ct=(0,n.PH)("[Approval Flow Configuration] Get Work Type Success",(0,n.Ky)()),pt=(0,n.PH)("[Approval Flow Configuration]  Save Approval Flow ",(0,n.Ky)()),ut=(0,n.PH)("[Approval Flow Configuration] Save Approval Flow Success",(0,n.Ky)()),dt=(0,n.PH)("[Approval Flow Configuration] Save Approval Flow Status"),gt=(0,n.PH)("[Approval Flow Configuration] Get Approval Flow With Milestone List",(0,n.Ky)()),mt=(0,n.PH)("[Approval Flow Configuration] Save Approval Flow Role Success",(0,n.Ky)()),ft=(0,n.PH)("[Approval Flow Configuration] Save Approval Flow Role Status"),ht=(0,n.PH)("[Approval Flow Configuration] Reset"),vt="ApprovalFlowState",Ti=(0,n.Lq)({ApprovalFlow:[],saveStatus:null,Roles:[],AddRoleStatus:null},(0,n.on)(ct,(o,{approvalFlow:t})=>({...o,ApprovalFlow:t})),(0,n.on)(at,(o,{roles:t})=>({...o,Roles:t})),(0,n.on)(ut,(o,{approvalFlow:t})=>({...o,saveStatus:{Status:t.status,message:t.message}})),(0,n.on)(dt,o=>({...o,saveStatus:null})),(0,n.on)(mt,(o,{adddedrole:t})=>({...o,saveStatus:{Status:t.status,message:t.message}})),(0,n.on)(ft,o=>({...o,milestoneSaveStatus:null})),(0,n.on)(ht,o=>({...o,ApprovalFlow:[],saveStatus:null,Roles:[],AddRoleStatus:null}))),fe=(0,n.ZF)(vt),Si=(0,n.P1)(fe,o=>o.ApprovalFlow),Fi=(0,n.P1)(fe,o=>o.saveStatus),Ai=(0,n.P1)(fe,o=>o.Roles),wi=(0,n.P1)(fe,o=>o.AddRoleStatus);let Ct=(()=>{var o;class t{constructor(r){this.store=r,this.selectAddRoleStatus$=this.store.select(wi),this.selectSaveStatus$=this.store.select(Fi),this.selectRoles$=this.store.select(Ai),this.selectApprovalFlow$=this.store.select(Si)}getApprovalFlowRoles(r){this.store.dispatch(nt({departmentId:r}))}approvalFlowGet(r){this.store.dispatch(lt({departmentId:r}))}updatesaveStatus(){this.store.dispatch(dt())}saveApprovalFlow(r){this.store.dispatch(pt({approvalFlow:r}))}addRoleforApprovalFlow(r){this.store.dispatch(gt({roles:r}))}updateaddRoleStatus(){this.store.dispatch(ft())}reset(){this.store.dispatch(ht())}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(n.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})();var H,Ii=p(33259);function ki(o,t){if(1&o&&(e.TgZ(0,"div",22)(1,"span",23),e._uU(2),e.qZA()()),2&o){const i=t.$implicit;e.xp6(2),e.Oqu(i.text)}}const Zi=function(){return{"margin-right":"20px;"}};function Li(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"p-button",24),e.NdJ("onClick",function(a){e.CHM(i);const l=e.oxw();return e.KtG(l.addRoles(a))}),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("disabled",!(i.department&&""!==i.department&&i.selectedRoles&&i.selectedRoles.length>0))("ngStyle",e.DdM(2,Zi))}}function Ei(o,t){if(1&o&&(e.TgZ(0,"tr",25)(1,"td",26),e._UZ(2,"i",27),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"p-dropdown",28),e.qZA(),e.TgZ(8,"td"),e._UZ(9,"p-dropdown",29),e.qZA()()),2&o){const i=t.index,r=e.oxw();e.Q6J("formGroupName",i),e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.hij("",r.milestoneList[i].controls.roleName.value," "),e.xp6(2),e.Q6J("options",r.rolesForApproval)("showClear",!1),e.xp6(2),e.Q6J("options",r.rolesForApproval)("showClear",!1)}}function qi(o,t){1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2,"No Records Found."),e.qZA()()),2&o&&(e.xp6(1),e.uIk("colspan",4))}function Ni(o,t){if(1&o&&e._UZ(0,"button",30),2&o){const i=e.oxw();e.Q6J("disabled",!i.approvalFlowForm.valid)}}const _t=function(){return{width:"100%",margin:"0px 20px"}},yt=function(o){return[o]};let Ne=((H=class{get f(){return this.approvalFlowForm.controls}get t(){return this.f.roles}get milestoneList(){return this.t.controls}constructor(t,i,r,a,l){this.approvalFlowFacade=t,this.twoColConfigFacade=i,this.messageService=r,this.formBuilder=a,this.cdr=l,this.title="Approval Flow",this.privleges=A.UR}ngOnInit(){this.twoColConfigFacade.getDepartments(),this.approvalFlowForm=this.formBuilder.group({roles:new s.Oe([])}),this.twoColConfigFacade.selectDepartments$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.departments=t)}),this.approvalFlowFacade.selectRoles$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.roles=t,this.selectedRoles=this.roles.filter(i=>i.selected).flatMap(i=>i.value),this.generateApprovalRoles(),this.generateDefaultRows(this.approvalFlows))}),this.approvalFlowFacade.selectApprovalFlow$.pipe((0,f.t)(this)).subscribe(t=>{t&&(this.approvalFlows=t,this.generateApprovalRoles(),this.generateDefaultRows(this.approvalFlows))}),this.approvalFlowFacade.selectSaveStatus$.pipe((0,f.t)(this)).subscribe(t=>{!t||t.Status!=v.cH&&t.Status!=v.nQ?t&&this.messageService.add({severity:"success",summary:"Success",detail:t?.message}):this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message}),this.approvalFlowFacade.approvalFlowGet(this.department)}),this.approvalFlowFacade.selectAddRoleStatus$.pipe((0,f.t)(this)).subscribe(t=>{!t||t.Status!=v.cH&&t.Status!=v.nQ?t&&(this.messageService.add({severity:"success",summary:"Success",detail:t?.message}),this.approvalFlowFacade.approvalFlowGet(this.department)):(this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message}),this.approvalFlowFacade.approvalFlowGet(this.department))})}changeDepartments(){this.approvalFlowFacade.getApprovalFlowRoles(this.department),this.approvalFlowFacade.approvalFlowGet(this.department)}drop(t){(0,D.bA)(this.milestoneList,t.previousIndex,t.currentIndex);let i=0;this.t.controls.map(r=>{i++,r.controls.orderNumber.setValue(i)})}generateApprovalRoles(){this.rolesForApproval=[],this.rolesForApproval=this.roles?.filter(t=>this.approvalFlows?.some(i=>i.roleId==t.value)),this.rolesForApproval.unshift({text:"Is NA",value:"-1"}),this.rolesForApproval.push({text:"Is Final",value:"-2"})}roleChanged(t){}addRoles(t){this.approvalFlowFacade.addRoleforApprovalFlow({roleIds:this.selectedRoles,departmentId:this.department})}generateDefaultRows(t){this.t.clear(),t&&t.forEach(i=>{this.t.push(this.formBuilder.group({id:[i.id,s.kI.required],roleName:[i.roleName,[s.kI.required]],roleId:[i.roleId,[s.kI.required]],approvalFlowId:[i.approvalFlowId,[s.kI.required]],orderNumber:[i.orderNumber,[s.kI.required]],returnFlowId:[i.returnFlowId,[s.kI.required]]}))})}submit(){this.approvalFlowFacade.saveApprovalFlow(this.approvalFlowForm.controls.roles.value)}resetForm(){this.approvalFlowForm.reset()}ngOnDestroy(){this.selectedRoles=[],this.approvalFlowFacade.reset()}}).\u0275fac=function(t){return new(t||H)(e.Y36(Ct),e.Y36(h),e.Y36(C.ez),e.Y36(s.qu),e.Y36(e.sBO))},H.\u0275cmp=e.Xpm({type:H,selectors:[["app-approval-flow"]],features:[e._Bn([C.YP,C.ez])],decls:36,vars:19,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,"col-12","lg:col-2"],[1,"col-12","lg:col-4"],["optionLabel","text","optionValue","value","placeholder","Select a Department","ngClass","dd",3,"options","ngModel","showClear","ngStyle","ngModelChange"],[1,"col-12","lg:col-4","flex"],["placeholder","Select a Role","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","ngStyle","ngModelChange"],["pTemplate","item"],["tooltip","Click to add role"],["icon","pi pi-arrow-right","label","Generate","pTooltip","Click to add role",3,"disabled","ngStyle","onClick",4,"ngxPermissionsOnly"],["key","confirm2"],[1,"grid","formgrid","mb-3",2,"margin-top","20px !important"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"p-formgrid","grid"],[1,"table"],["cdkDropList","","formArrayName","roles",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",3,"formGroupName",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-12","md:col-12","lg:col-12",2,"display","flex","justify-content","end"],[1,"",2,"margin-right","20px"],["pButton","","type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],[1,"flex","align-items-center"],[1,"ml-2"],["icon","pi pi-arrow-right","label","Generate","pTooltip","Click to add role",3,"disabled","ngStyle","onClick"],["cdkDrag","","cdkDragLockAxis","y",3,"formGroupName"],["cdkDragHandle","",2,"cursor","grabbing"],[1,"pi","pi-bars","mr-2"],["optionLabel","text","optionValue","value","placeholder","Select a Role","formControlName","approvalFlowId",3,"options","showClear"],["optionLabel","text","optionValue","value","placeholder","Select a Role","formControlName","returnFlowId",3,"options","showClear"],["pButton","","type","submit","label","Submit",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"p-dropdown",4),e.NdJ("ngModelChange",function(a){return i.department=a})("ngModelChange",function(){return i.changeDepartments()}),e.qZA()(),e.TgZ(7,"div",5)(8,"p-multiSelect",6),e.NdJ("ngModelChange",function(a){return i.selectedRoles=a})("ngModelChange",function(a){return i.roleChanged(a)}),e.YNc(9,ki,3,1,"ng-template",7),e.qZA(),e.TgZ(10,"div",8),e.YNc(11,Li,1,3,"p-button",9),e.qZA()(),e._UZ(12,"div",2),e.qZA(),e._UZ(13,"p-confirmPopup",10),e.TgZ(14,"div",11)(15,"form",12),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(16,"div",13)(17,"div",14)(18,"table",15)(19,"thead")(20,"tr")(21,"th"),e._uU(22,"S.No"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Role Name"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Approval Flow"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Return Flow"),e.qZA()()(),e.TgZ(29,"tbody",16),e.NdJ("cdkDropListDropped",function(a){return i.drop(a)}),e.YNc(30,Ei,10,7,"tr",17),e.YNc(31,qi,3,1,"tr",18),e.qZA()()()(),e.TgZ(32,"div",19)(33,"div",20),e.YNc(34,Ni,1,1,"button",21),e.qZA()()()()(),e._UZ(35,"p-toast")),2&t&&(e.xp6(4),e.Oqu(i.title),e.xp6(2),e.Q6J("options",i.departments)("ngModel",i.department)("showClear",!0)("ngStyle",e.DdM(13,_t)),e.xp6(2),e.Q6J("options",i.roles)("ngModel",i.selectedRoles)("ngStyle",e.DdM(14,_t)),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.VKq(15,yt,i.privleges.APPROVALFLOW_CREATE)),e.xp6(4),e.Q6J("formGroup",i.approvalFlowForm),e.xp6(15),e.Q6J("ngForOf",i.t.controls),e.xp6(1),e.Q6J("ngIf",0==i.t.length),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.VKq(17,yt,i.privleges.APPROVALFLOW_UPDATE)))},dependencies:[m.mk,m.sg,m.O5,m.PC,s._Y,s.JJ,s.JL,s.On,C.jx,y.Hq,y.zx,E.Lt,we.NU,s.sg,s.u,s.x0,s.CE,Ee.P,N.FN,D.Wj,D.Zt,D.Bh,Ii.u,U.gE],styles:[".dd>.p-multiselect{width:100%}  .dd>.p-dropdown{width:100%}"]}),H);Ne=(0,_.gn)([(0,f.c)()],Ne);var M=p(20553),Ue=p(21525),bt=p(69862);let Tt=(()=>{var o;class t{constructor(r,a){this.router=r,this.http=a}getAlertconfigForm(){return this.http.get(`${M.N.apiUrl}/Settings/Alert_Configuration_Form`)}getAlertconfig(r="",a="",l="",c=!0,I=""){return this.http.get(`${M.N.apiUrl}/Settings/Alert_Primary_Get?Id=${r}&Type=${a}&Object=${l}&IsActive=${c}&Department=${I}`)}getAlertSecodaryconfig(r="",a=!0){return this.http.get(`${M.N.apiUrl}/Settings/Alert_Secondary_Get/?PrimaryId=${r}&IsActive=${a}`)}saveAlertCongig(r){return this.http.post(`${M.N.apiUrl}/Settings/AlertPrimary_Config_SaveUpdate`,r,Ue.c)}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(u.F0),e.LFG(bt.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),t})();const Ui=function(){return{"margin-right":"20px;"}};function Di(o,t){if(1&o){const i=e.EpF();e.TgZ(0,"p-button",7),e.NdJ("onClick",function(a){e.CHM(i);const l=e.oxw();return e.KtG(l.addnewRow(a))}),e.qZA()}2&o&&e.Q6J("ngStyle",e.DdM(1,Ui))}const Pi=function(o){return[o]};let Mi=(()=>{var o;class t{constructor(r,a,l,c,I,J,P,he){this.messageService=r,this.titlecasePipe=a,this.router=l,this.cdr=c,this.confirmationService=I,this.alertConfigService=J,this.route=P,this.formBuilder=he,this.title="Alert Configuration",this.currentStatus=!0,this.userGroups=[],this.actions=[],this.first=0,this.rows=10,this.total=0,this.defaultSortField="name",this.defaultSortOrder=1,this.privleges=A.UR}ngOnInit(){this.getAlertsconfig(!0),this.cols=[{field:"departmentName",header:"Department Name",sortablefield:"departmentName",isSortable:!0,isSearchable:!0},{field:"type",header:"Type",sortablefield:"type",isSortable:!0,isSearchable:!0},{field:"object",header:"Object",sortablefield:"object",isSortable:!0,isSearchable:!0},{field:"name",header:"Name",sortablefield:"name",isSortable:!0,isSearchable:!0},{field:"alertNumber",header:"Code",sortablefield:"alertNumber",isSortable:!0,isSearchable:!0},{field:"lastUpdatedUserName",header:"Last Updated By",sortablefield:"lastUpdatedUserName",isSortable:!0,isSearchable:!0},{field:"lastUpdatedDate",header:"Last Updated Date",sortablefield:"lastUpdatedDate",isSortable:!0}],this.searchableColumns=this.cols.filter(r=>1==r.isSearchable).flatMap(r=>r.field),this.actions=[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.ALERT_CONFIG_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.ALERT_CONFIG_DELETE}]}submit(){}resetForm(){}addnewRow(r){this.router.navigate(["configuration","alert-config-create",0],{})}actioInvoked(r){r&&"INACTIVATE"==r.type?this.saveupdateAlertconfig({...r.record,isActive:!1}):r&&"EDIT"==r.type?this.router.navigate(["configuration","alert-config-create",r.record.id]):r&&"ACTIVATE"==r.type&&this.saveupdateAlertconfig({...r.record,isActive:!0})}changeStatus(r){this.getAlertsconfig(!r),this.currentStatus=!r,this.actions=r?[{icon:"pi pi-undo",title:"Activate",type:"ACTIVATE",privilege:this.privleges.ALERT_CONFIG_UPDATE}]:[{icon:"pi pi-pencil",title:"Edit",type:"EDIT",privilege:this.privleges.ALERT_CONFIG_UPDATE},{icon:"pi pi-times",title:"In-Activate",type:"INACTIVATE",privilege:this.privleges.ALERT_CONFIG_DELETE}]}getAlertsconfig(r){this.alertConfigService.getAlertconfig("","","",r).subscribe(a=>{a.status==v.BA&&(this.alertconfigs=a.data)},a=>{})}saveupdateAlertconfig(r){this.alertConfigService.saveAlertCongig(r).subscribe(a=>{a.status==v.BA&&this.getAlertsconfig(this.currentStatus)},a=>{})}}return(o=t).\u0275fac=function(r){return new(r||o)(e.Y36(C.ez),e.Y36(m.rS),e.Y36(u.F0),e.Y36(e.sBO),e.Y36(C.YP),e.Y36(Tt),e.Y36(u.gz),e.Y36(s.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-alert-config"]],features:[e._Bn([C.YP,C.ez,m.rS])],decls:11,vars:15,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,""],["icon","pi pi-plus",3,"ngStyle","onClick",4,"ngxPermissionsOnly"],[1,"col","hedsr",2,"text-align","end"],["key","confirm2"],[3,"records","defaultSortField","defaultSortOrder","cols","fileName","rows","total","actions","searchableColumns","defaultstatus","hasActiveInactive","invokeAction","changeStatus"],["icon","pi pi-plus",3,"ngStyle","onClick"]],template:function(r,a){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2),e.YNc(6,Di,1,2,"p-button",3),e.qZA()(),e._UZ(7,"div",4)(8,"p-confirmPopup",5),e.TgZ(9,"app-datatable",6),e.NdJ("invokeAction",function(c){return a.actioInvoked(c)})("changeStatus",function(c){return a.changeStatus(c)}),e.qZA()(),e._UZ(10,"p-toast")),2&r&&(e.xp6(4),e.Oqu(a.title),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.VKq(13,Pi,a.privleges.ALERT_CONFIG_CREATE)),e.xp6(3),e.Q6J("records",a.alertconfigs)("defaultSortField",a.defaultSortField)("defaultSortOrder",a.defaultSortOrder)("cols",a.cols)("fileName","Configuration")("rows",10)("total",a.alertconfigs?a.alertconfigs.length:0)("actions",a.actions)("searchableColumns",a.searchableColumns)("defaultstatus",!a.currentStatus)("hasActiveInactive",!0))},dependencies:[m.PC,y.zx,Ee.P,N.FN,se.n,U.gE]}),t})();var z;function xi(o,t){if(1&o&&(e.TgZ(0,"tr",39)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._UZ(6,"p-dropdown",40),e.qZA(),e.TgZ(7,"td"),e._UZ(8,"p-dropdown",41),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"p-inputNumber",42),e.qZA(),e.TgZ(11,"td"),e._UZ(12,"p-dropdown",43),e.qZA()()),2&o){const i=t.index,r=e.oxw();e.Q6J("formGroupName",i),e.xp6(2),e.hij("",i+1," "),e.xp6(2),e.hij("",r.severityBasedList[i].controls.severity.value," "),e.xp6(2),e.Q6J("options",r.fieldList)("showClear",!0),e.xp6(2),e.Q6J("options",r.baseList)("showClear",!0),e.xp6(2),e.Q6J("max",73e3),e.xp6(2),e.Q6J("options",r.calculationList)("showClear",!0)}}function Oi(o,t){if(1&o&&(e.TgZ(0,"div",44)(1,"span",45),e._uU(2),e.qZA()()),2&o){const i=t.$implicit;e.xp6(2),e.Oqu(i.text)}}function Gi(o,t){if(1&o&&(e.TgZ(0,"div",44)(1,"span",45),e._uU(2),e.qZA()()),2&o){const i=t.$implicit;e.xp6(2),e.Oqu(i.text)}}function Ri(o,t){if(1&o&&e._UZ(0,"button",46),2&o){const i=e.oxw();e.Q6J("disabled",!i.alertconfigForm.valid)}}const St=function(){return{width:"100%",margin:"0px 20px"}},Ji=function(o,t){return[o,t]};let De=((z=class{get ef(){return this.alertconfigForm.controls}get et(){return this.ef.alertConfigurationSecondary}get severityBasedList(){return this.et.controls}get subtypeErrorMsg(){var t;return this.severityBasedList.map(i=>{i.controls.severity.errors&&(t=i.controls.severity.errors)}),t&&t.required?"Required":null}get fieldErrorMsg(){var t;return this.severityBasedList.map(i=>{i.controls.field.errors&&(t=i.controls.field.errors)}),t&&t.required?"Required":null}get baseFieldErrorMsg(){var t;return this.severityBasedList.map(i=>{i.controls.baseField.errors&&(t=i.controls.baseField.errors)}),t&&t.required?"Required":null}get calculationTypeErrorMsg(){var t;return this.severityBasedList.map(i=>{i.controls.calculationType.errors&&(t=i.controls.calculationType.errors)}),t&&t.required?"Required":null}get calculationNoErrorMsg(){var t;return this.severityBasedList.map(i=>{i.controls.calculationNo.errors&&(t=i.controls.calculationNo.errors)}),t&&t.required?"Required":null}constructor(t,i,r,a,l,c,I){this.messageService=t,this.router=i,this.route=r,this.formBuilder=a,this.titlecasePipe=l,this.cdr=c,this.alertConfigService=I,this.title="Alert Config Create",this.isNew=!0,this.privleges=A.UR}ngOnInit(){this.getalertcreateFormdetails(),this.routeSub=this.route.params.pipe((0,f.t)(this)).subscribe(t=>{this.alertconfigId=t.id,"0"!==this.alertconfigId?(this.isNew=!1,this.getalertcreatedetails(this.alertconfigId)):(this.isNew=!0,this.alertconfigId=w.i.raw(),this.getalertcreatedetails(this.alertconfigId))}),this.alertconfigForm=new s.cw({id:new s.NI(w.i.raw()),department:new s.NI("",[s.kI.required]),type:new s.NI("",[s.kI.required]),object:new s.NI("",[s.kI.required]),name:new s.NI("",[s.kI.required,s.kI.maxLength(200),s.kI.minLength(3)]),alertNumber:new s.NI(""),emailfrequency:new s.NI(""),smsfrequency:new s.NI(""),emailuserGroupList:new s.NI(""),smsuserGroupsList:new s.NI(""),isActive:new s.NI(!0),alertConfigurationSecondary:new s.Oe([])})}generateseverityrows(t){this.et.clear(),t&&t.forEach(i=>{this.et.push(this.formBuilder.group({id:[i.id],primaryId:[i.primaryId,[s.kI.required]],severity:[i.severity,[s.kI.required]],field:[i.field,[s.kI.required]],baseField:[i.baseField,[s.kI.required]],calculationType:[i.calculationType,[s.kI.required]],calculationNo:[i.calculationNo,[s.kI.required]],isActive:[!0,[s.kI.required]]})),this.cdr.markForCheck(),this.cdr.detectChanges()})}Generatedefaultrows(){this.et.clear(),this.severityList&&(this.severityList.forEach(t=>{this.et.push(this.formBuilder.group({id:[w.i.raw()],primaryId:[this.alertconfigId,[s.kI.required]],severity:[t.value,[s.kI.required]],field:[null,[s.kI.required]],baseField:[null,[s.kI.required]],calculationType:[null,[s.kI.required]],calculationNo:[null,[s.kI.required]],isActive:[!0,[s.kI.required]]}))}),this.cdr.reattach(),this.cdr.detectChanges())}getalertcreatedetails(t){this.alertConfigService.getAlertconfig(t).subscribe(i=>{i.status==v.BA&&i&&i.data.length>0?(this.alertDetails=i.data[0],this.setformDetails(),this.alertDetails?.alertConfigurationSecondary&&this.alertDetails?.alertConfigurationSecondary.length>0?this.generateseverityrows(this.alertDetails?.alertConfigurationSecondary):this.Generatedefaultrows()):this.Generatedefaultrows()},i=>{})}setformDetails(){this.alertconfigForm.get("id")?.patchValue(this.alertDetails?.id),this.alertconfigForm.get("department")?.patchValue(this.alertDetails?.department),this.alertconfigForm.get("type")?.patchValue(this.alertDetails?.type),this.alertconfigForm.get("object")?.patchValue(this.alertDetails?.object),this.alertconfigForm.get("name")?.patchValue(this.alertDetails?.name),this.alertconfigForm.get("alertNumber")?.patchValue(this.alertDetails?.alertNumber),this.alertconfigForm.get("emailfrequency")?.patchValue(this.alertDetails?.emailFrequency),this.alertconfigForm.get("smsfrequency")?.patchValue(this.alertDetails?.smsFrequency),this.alertconfigForm.get("emailuserGroupList")?.patchValue(this.alertDetails?.emailuserGroupList),this.alertconfigForm.get("smsuserGroupsList")?.patchValue(this.alertDetails?.smsuserGroupsList)}getalertcreateFormdetails(){this.alertConfigService.getAlertconfigForm().subscribe(t=>{t.status==v.BA&&(this.formdets=t.data,this.departmentList=this.formdets.departmentList,this.typeList=this.formdets.typeList,this.objectList=this.formdets.objectList,this.severityList=this.formdets.severityList,this.fieldList=this.formdets.fieldList,this.baseList=this.formdets.baseFieldList,this.calculationList=this.formdets.calculationTypeList,this.usergroupList=this.formdets.userGroupList,this.frequencyTypeList=this.formdets.frequencyTypeList,0==this.et.length&&this.Generatedefaultrows())},t=>{})}back(){this.router.navigate(["configuration","alert-config"])}submit(){var t=this.alertconfigForm.value;t.emailuserGroupList=""==t.emailuserGroupList?null:t.emailuserGroupList,t.smsuserGroupsList=""==t.smsuserGroupsList?null:t.smsuserGroupsList,this.alertConfigService.saveAlertCongig(t).subscribe(i=>{i.status==v.BA&&(this.messageService.add({severity:"success",summary:"Success",detail:i?.message}),this.router.navigate(["configuration","alert-config"]))},i=>{})}resetForm(){this.router.navigate(["configuration","alert-config"])}}).\u0275fac=function(t){return new(t||z)(e.Y36(C.ez),e.Y36(u.F0),e.Y36(u.gz),e.Y36(s.qu),e.Y36(m.rS),e.Y36(e.sBO),e.Y36(Tt))},z.\u0275cmp=e.Xpm({type:z,selectors:[["app-alert-config-create"]],features:[e._Bn([m.rS])],decls:98,vars:31,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,""],["icon","pi pi-arrow-left",3,"onClick"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"p-fluid"],[1,"flex","grid","formgrid"],[1,"field","col-12","md:col-6","lg:col-6"],["htmlFor","department"],["optionLabel","text","optionValue","value","placeholder","Select a Role","formControlName","department",3,"options","showClear"],[3,"control"],["htmlFor","type"],["optionLabel","text","optionValue","value","placeholder","Select a Role","formControlName","type",3,"options","showClear"],["htmlFor","object"],["optionLabel","text","optionValue","value","placeholder","Select a Role","formControlName","object",3,"options","showClear"],["htmlFor","name"],["pInputText","","formControlName","name","type","text"],[1,"col-12"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"p-formgrid","grid"],[1,"table"],[2,"min-width","100px"],["formArrayName","alertConfigurationSecondary"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-12","mt-4"],[1,"field","col-12","md:col-6","lg:col-4"],["htmlFor","emailfrequency"],[1,"optioanlcls"],["optionLabel","text","optionValue","value","placeholder","Select a Frequency","formControlName","emailfrequency",3,"options","showClear"],["formControlName","emailuserGroupList","placeholder","Select a User Group","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngStyle"],["pTemplate","item"],["htmlFor","smsfrequency"],["optionLabel","text","optionValue","value","placeholder","Select a Frequency","formControlName","smsfrequency",3,"options","showClear"],["htmlFor","smsuserGroupsList"],["formControlName","smsuserGroupsList","placeholder","Select a User Group","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngStyle"],[1,"col-12","flex",2,"margin-top","25px","justify-content","end","flex-wrap","wrap"],[1,"col-12","md:col-2","lg:col-1"],["pButton","","type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Cancel",1,"p-button-secondary",3,"click"],[3,"formGroupName"],["optionLabel","text","optionValue","value","placeholder","Select a Field","formControlName","field",3,"options","showClear"],["optionLabel","text","optionValue","value","placeholder","Select a Base field","formControlName","baseField",3,"options","showClear"],["inputId","inputnumber","formControlName","calculationNo",3,"max"],["optionLabel","text","optionValue","value","placeholder","Select a Type","formControlName","calculationType",3,"options","showClear"],[1,"flex","align-items-center"],[1,"ml-2"],["pButton","","type","submit","label","Submit",3,"disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2)(6,"p-button",3),e.NdJ("onClick",function(){return i.back()}),e.qZA()()(),e.TgZ(7,"form",4),e.NdJ("ngSubmit",function(){return i.submit()}),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Department "),e.qZA(),e._UZ(13,"p-dropdown",9)(14,"app-error-msg",10),e.qZA(),e.TgZ(15,"div",7)(16,"label",11),e._uU(17,"Type"),e.qZA(),e._UZ(18,"p-dropdown",12)(19,"app-error-msg",10),e.qZA(),e.TgZ(20,"div",7)(21,"label",13),e._uU(22,"Object"),e.qZA(),e._UZ(23,"p-dropdown",14)(24,"app-error-msg",10),e.qZA(),e.TgZ(25,"div",7)(26,"label",15),e._uU(27,"Name"),e.qZA(),e._UZ(28,"input",16)(29,"app-error-msg",10),e.qZA(),e.TgZ(30,"div",17)(31,"h5"),e._uU(32,"Severities"),e.qZA(),e.TgZ(33,"div",18)(34,"div",19)(35,"table",20)(36,"thead")(37,"tr")(38,"th"),e._uU(39,"S.No"),e.qZA(),e.TgZ(40,"th",21),e._uU(41,"Severity "),e.qZA(),e.TgZ(42,"th",21),e._uU(43,"Field "),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Base Field "),e.qZA(),e.TgZ(46,"th"),e._uU(47,"Calucation No (Days/Cost) "),e.qZA(),e.TgZ(48,"th"),e._uU(49,"Calculation Type"),e.qZA()()(),e.TgZ(50,"tbody",22),e.YNc(51,xi,13,10,"tr",23),e.qZA()()()()(),e.TgZ(52,"div",24)(53,"h5"),e._uU(54,"Email"),e.qZA(),e.TgZ(55,"div",5)(56,"div",6)(57,"div",25)(58,"label",26),e._uU(59,"Frequency"),e.TgZ(60,"span",27),e._uU(61," (Optional)"),e.qZA()(),e._UZ(62,"p-dropdown",28)(63,"app-error-msg",10),e.qZA(),e.TgZ(64,"div",25)(65,"label",11),e._uU(66,"User Groups"),e.TgZ(67,"span",27),e._uU(68," (Optional)"),e.qZA()(),e.TgZ(69,"p-multiSelect",29),e.YNc(70,Oi,3,1,"ng-template",30),e.qZA(),e._UZ(71,"app-error-msg",10),e.qZA()()()(),e.TgZ(72,"div",17)(73,"h5"),e._uU(74,"SMS"),e.qZA(),e.TgZ(75,"div",5)(76,"div",6)(77,"div",25)(78,"label",31),e._uU(79,"Frequency"),e.TgZ(80,"span",27),e._uU(81," (Optional)"),e.qZA()(),e._UZ(82,"p-dropdown",32)(83,"app-error-msg",10),e.qZA(),e.TgZ(84,"div",25)(85,"label",33),e._uU(86,"User Groups"),e.TgZ(87,"span",27),e._uU(88," (Optional)"),e.qZA()(),e.TgZ(89,"p-multiSelect",34),e.YNc(90,Gi,3,1,"ng-template",30),e.qZA(),e._UZ(91,"app-error-msg",10),e.qZA()()()(),e.TgZ(92,"div",35)(93,"div",36),e.YNc(94,Ri,1,1,"button",37),e.qZA(),e.TgZ(95,"div",36)(96,"button",38),e.NdJ("click",function(){return i.resetForm()}),e.qZA()()()()()()(),e._UZ(97,"p-toast")),2&t&&(e.xp6(4),e.Oqu(i.title),e.xp6(3),e.Q6J("formGroup",i.alertconfigForm),e.xp6(6),e.Q6J("options",i.departmentList)("showClear",!0),e.xp6(1),e.Q6J("control",i.alertconfigForm.get("department")),e.xp6(4),e.Q6J("options",i.typeList)("showClear",!0),e.xp6(1),e.Q6J("control",i.alertconfigForm.get("type")),e.xp6(4),e.Q6J("options",i.objectList)("showClear",!0),e.xp6(1),e.Q6J("control",i.alertconfigForm.get("object")),e.xp6(5),e.Q6J("control",i.alertconfigForm.get("name")),e.xp6(22),e.Q6J("ngForOf",i.et.controls),e.xp6(11),e.Q6J("options",i.frequencyTypeList)("showClear",!0),e.xp6(1),e.Q6J("control",i.alertconfigForm.get("emailfrequency")),e.xp6(6),e.Q6J("options",i.usergroupList)("ngStyle",e.DdM(26,St)),e.xp6(2),e.Q6J("control",i.alertconfigForm.get("emailuserGroupList")),e.xp6(11),e.Q6J("options",i.frequencyTypeList)("showClear",!0),e.xp6(1),e.Q6J("control",i.alertconfigForm.get("smsfrequency")),e.xp6(6),e.Q6J("options",i.usergroupList)("ngStyle",e.DdM(27,St)),e.xp6(2),e.Q6J("control",i.alertconfigForm.get("smsuserGroupsList")),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.WLB(28,Ji,i.privleges.ALERT_CONFIG_CREATE,i.privleges.ALERT_CONFIG_UPDATE)))},dependencies:[m.mk,m.sg,m.PC,s._Y,s.Fj,s.JJ,s.JL,C.jx,y.Hq,y.zx,k.o,E.Lt,Ze.Rn,we.NU,s.sg,s.u,s.x0,s.CE,$.u,N.FN,U.gE]}),z);De=(0,_.gn)([(0,f.c)()],De);const Qi=[{path:"",component:be},{path:"role",component:Se},{path:"role/privileges",component:Fe,canActivate:[R.a]},{path:"quicklinks",component:Ie,canActivate:[R.a]},{path:"templates",component:Le,canActivate:[R.a]},{path:"alert-config",component:Mi,canActivate:[R.a]},{path:"alert-config-create/:id",component:De,canActivate:[R.a]},{path:"milestones/:id",component:qe,canActivate:[R.a]},{path:"approval-flow",component:Ne,canActivate:[R.a]}];let $i=(()=>{var o;class t{}return(o=t).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(Qi),u.Bz]}),t})();var Vi=p(39232),Bi=p(97680),g=p(16465),b=p(22096),T=p(67634),S=p(37398),F=p(26306);let Yi=(()=>{var o;class t{constructor(r,a){this.actions$=r,this.twoColConfigService=a,this.getCategoryList$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(q),(0,T.z)(()=>this.twoColConfigService.getAllCategory().pipe((0,S.U)(l=>X({categories:l.data})),(0,F.K)(l=>(0,b.of)()))))),this.getAllDepartments$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(ie),(0,T.z)(()=>this.twoColConfigService.getAllDepartments().pipe((0,S.U)(l=>oe({departments:l.data})),(0,F.K)(l=>(0,b.of)()))))),this.getCategoryDetailsList$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(ee),(0,T.z)(({departmentId:l,configId:c,categoryId:I,parentConfigId:J,isActive:P})=>this.twoColConfigService.getConfigurationDetailsbyId(l,c,I,J,P).pipe((0,S.U)(he=>ae({configDetail:he.data})),(0,F.K)(he=>(0,b.of)()))))),this.getParentDetailsList$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(te),(0,T.z)(({departmentId:l,configId:c,categoryId:I,parentConfigId:J})=>this.twoColConfigService.getConfigurationDetailsbyId(l,c,I,J).pipe((0,S.U)(P=>le({configDetail:P.data})),(0,F.K)(P=>(0,b.of)()))))),this.saveConfiguration$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(ce),(0,T.z)(({configDetails:l})=>this.twoColConfigService.saveConfiguration(l).pipe((0,S.U)(c=>pe({details:c})),(0,F.K)(c=>(0,b.of)())))))}sdf(){}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(g.eX),e.LFG(st.g))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})();var Wi=p(34386),Ki=p(30442),ji=p(9502),Hi=p(45468);let zi=(()=>{var o;class t{constructor(r,a){this.actions$=r,this.roleService=a,this.getRoles$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Pe),(0,T.z)(({isActive:l})=>this.roleService.getRoles(l).pipe((0,S.U)(c=>Me({roles:c.data})),(0,F.K)(c=>(0,b.of)()))))),this.saverole$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(xe),(0,T.z)(({role:l})=>this.roleService.saveRole(l).pipe((0,S.U)(c=>Oe({role:c})),(0,F.K)(c=>(0,b.of)()))))),this.getPrivileages$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Re),(0,T.z)(({roleId:l})=>this.roleService.getPrivileges(l).pipe((0,S.U)(c=>Je({privileges:c.data})),(0,F.K)(c=>(0,b.of)()))))),this.savePrivilegee$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Qe),(0,T.z)(({privilege:l})=>this.roleService.savePrivileges(l).pipe((0,S.U)(c=>Ve({privilege:c})),(0,F.K)(c=>(0,b.of)())))))}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(g.eX),e.LFG(Hi.N))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})();var Xi=p(59986);let eo=(()=>{var o;class t{constructor(r,a){this.actions$=r,this.quicklinkService=a,this.getQuicklinks$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Ke),(0,T.z)(({isActive:l})=>this.quicklinkService.getQuickLinks(l).pipe((0,S.U)(c=>je({quicklinks:c.data})),(0,F.K)(c=>(0,b.of)()))))),this.getUserGroups$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(et),(0,T.z)(({})=>this.quicklinkService.getUserGroups().pipe((0,S.U)(l=>tt({userGroups:l.data})),(0,F.K)(l=>(0,b.of)()))))),this.savequicklink$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(He),(0,T.z)(({quicklink:l})=>this.quicklinkService.saveQuickLink(l).pipe((0,S.U)(c=>ze({quicklink:c})),(0,F.K)(c=>(0,b.of)())))))}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(g.eX),e.LFG(Xi.P))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})();var Ft=p(17153),Z=p(55977),to=p(52543);let io=(()=>{var o;class t{constructor(r,a){this.actions$=r,this.templateService=a,this.gettemplates$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.iD),(0,T.z)(({isActive:l})=>this.templateService.getTemplates(l).pipe((0,S.U)(c=>Z.qB({templates:c.data})),(0,F.K)(c=>(0,b.of)()))))),this.getWorkTypes$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.iM),(0,T.z)(()=>this.templateService.getWorkTypes().pipe((0,S.U)(l=>Z.zC({worktypes:l.data})),(0,F.K)(l=>(0,b.of)()))))),this.getServiceTypes$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.Y3),(0,T.z)(()=>this.templateService.getServiceTypes().pipe((0,S.U)(l=>Z.RL({servicetypes:l.data})),(0,F.K)(l=>(0,b.of)()))))),this.getCategoryTypes$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.CM),(0,T.z)(()=>this.templateService.getCategoryTypes().pipe((0,S.U)(l=>Z.m({categorytypes:l.data})),(0,F.K)(l=>(0,b.of)()))))),this.subworkTypeListGet$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.s0),(0,T.z)(({workTypeId:l})=>this.templateService.getConfigurationDetailsbyId(l).pipe((0,S.U)(c=>Z.wP({subworktypes:c.data})),(0,F.K)(c=>(0,b.of)()))))),this.savetemplate$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.p1),(0,T.z)(({template:l})=>this.templateService.saveTemplates(l).pipe((0,S.U)(c=>Z.b0({template:c})),(0,F.K)(c=>(0,b.of)()))))),this.getTemplateWithMilestone$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.Qy),(0,T.z)(({IsActive_template:l,IsActive_milestone:c,Id:I,WorkTypeId:J})=>this.templateService.get_Template_With_Milestone(I,l,c,J).pipe((0,S.U)(P=>Z.xx({templates:P.data[0]})),(0,F.K)(P=>(0,b.of)()))))),this.save_Milestone$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.Do),(0,T.z)(({milestones:l})=>this.templateService.save_Milestone(l).pipe((0,S.U)(c=>Z.CB({milestones:c})),(0,F.K)(c=>(0,b.of)()))))),this.publishMilestone$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Z.oO),(0,T.z)(({id:l})=>this.templateService.publishTemplate(l).pipe((0,S.U)(c=>Z.pE({milestones:c})),(0,F.K)(c=>(0,b.of)())))))}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(g.eX),e.LFG(to.b))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})(),oo=(()=>{var o;class t{constructor(r,a){this.router=r,this.http=a}getApprovalFlows(r){return this.http.get(`${M.N.apiUrl}/Settings/ApprovalFlow_Get?DepartmentId=${r}`)}getRoles(r){return this.http.get(`${M.N.apiUrl}/Settings/ApprovalFlow_GetRoleList?DepartmentId=${r}`)}saveApprovalFlows(r){return this.http.post(`${M.N.apiUrl}/Settings/ApprovalFlow_SaveUpdate\n      `,r,Ue.c)}save_roles(r){return this.http.post(`${M.N.apiUrl}/Settings/ApprovalFlow_Add_Role\n      `,r,Ue.c)}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(u.F0),e.LFG(bt.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),t})(),ro=(()=>{var o;class t{constructor(r,a){this.actions$=r,this.ApprovalFlowService=a,this.getApprovalFlows$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(lt),(0,T.z)(({departmentId:l})=>this.ApprovalFlowService.getApprovalFlows(l).pipe((0,S.U)(c=>ct({approvalFlow:c.data})),(0,F.K)(c=>(0,b.of)()))))),this.approvalFlowRoleListGet$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(nt),(0,T.z)(({departmentId:l})=>this.ApprovalFlowService.getRoles(l).pipe((0,S.U)(c=>at({roles:c.data})),(0,F.K)(c=>(0,b.of)()))))),this.saveApprovalFlow$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(pt),(0,T.z)(({approvalFlow:l})=>this.ApprovalFlowService.saveApprovalFlows(l).pipe((0,S.U)(c=>ut({approvalFlow:c})),(0,F.K)(c=>(0,b.of)()))))),this.save_Milestone$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(gt),(0,T.z)(({roles:l})=>this.ApprovalFlowService.save_roles(l).pipe((0,S.U)(c=>mt({adddedrole:c})),(0,F.K)(c=>(0,b.of)())))))}}return(o=t).\u0275fac=function(r){return new(r||o)(e.LFG(g.eX),e.LFG(oo))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),t})(),so=(()=>{var o;class t{}return(o=t).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[h,Te,rt,ke.S,Ct],imports:[m.ez,$i,Ki.W,Vi.U$,y.hJ,Bi.L,n.Aw.forFeature(ue,de),n.Aw.forFeature(Ye,Nt),n.Aw.forFeature(ot,Yt),n.Aw.forFeature(Ft.gs,Ft.RG),n.Aw.forFeature(vt,Ti),g.sQ.forFeature([Yi,zi,eo,io,ro]),Wi.x,ji.$,N.EV,D._t,U.VI.forChild()]}),t})()},30505:(ne,L,p)=>{p.d(L,{g:()=>w});var m=p(20553),u=p(21525),_=p(65879),C=p(18068),s=p(69862);let w=(()=>{var v;class f{constructor(e,n){this.router=e,this.http=n}getAllCategory(){return this.http.get(`${m.N.apiUrl}/Settings/Configuration_Category_Get`)}getConfigurationDetailsbyId(e,n,q,Q,x=!0){return this.http.get(`${m.N.apiUrl}/Settings/Configuration_Get?ConfigurationId=${n}&CategoryId=${q}&ParentConfigurationId=${Q}&IsActive=${x}&DepartmentId=${e}`)}saveConfiguration(e){return this.http.post(`${m.N.apiUrl}/Settings/Configuration_SaveUpdate`,e,u.c)}getAllDepartments(){return this.http.get(`${m.N.apiUrl}/Settings/Configuration_Department_Get`)}getAllDivisions(){return this.http.get(`${m.N.apiUrl}/Settings/Configuration_Division_Get`)}}return(v=f).\u0275fac=function(e){return new(e||v)(_.LFG(C.F0),_.LFG(s.eN))},v.\u0275prov=_.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),f})()},27561:(ne,L,p)=>{p.d(L,{u:()=>w});var m=p(56223),u=p(65879),_=p(96814);function C(v,f){if(1&v&&(u.TgZ(0,"span",3),u._uU(1),u.qZA()),2&v){const A=f.$implicit;u.xp6(1),u.Oqu(A)}}function s(v,f){if(1&v&&(u.TgZ(0,"div",1),u.YNc(1,C,2,1,"span",2),u.qZA()),2&v){const A=u.oxw();u.xp6(1),u.Q6J("ngForOf",A.errors)}}let w=(()=>{var v;class f{constructor(){this.errors=[],this.control=new m.NI}ngOnInit(){this.control?.valueChanges.subscribe(e=>{this.updateErrorMsg(this.control)})}set _control(e){this.control=e,this.updateErrorMsg(e)}updateErrorMsg(e){this.errors=[],e&&e.invalid&&(e.dirty||e.touched)&&e.errors&&Object.keys(e.errors).forEach(q=>{switch(q){case"required":this.errors.includes("Required")||(this.errors=[...this.errors,"Required"]);break;case"minlength":this.errors.includes("Minimum")||(this.errors=[...this.errors,"Minimum of "+(e?.errors?.minlength?e?.errors?.minlength.requiredLength:0)+" characters required"]);break;case"maxlength":this.errors.includes("Maximum")||(this.errors=[...this.errors,"Maximum of "+(e?.errors?.maxlength?e?.errors?.maxlength.requiredLength:0)+" characters allowed"]);break;case"email":this.errors.includes("Email")||(this.errors=[...this.errors,"Email is Invalid"]);break;case"min":this.errors.includes("Minimum")||(this.errors=[...this.errors,"Minimum of "+(e?.errors?.min?e?.errors?.min.min:0)+" is required"]);break;case"max":this.errors.includes("Maximum")||(this.errors=[...this.errors,"Maximum of "+(e?.errors?.max?e?.errors?.max.max:0)+" is required"])}})}}return(v=f).\u0275fac=function(e){return new(e||v)},v.\u0275cmp=u.Xpm({type:v,selectors:[["app-error-msg"]],inputs:{_control:["control","_control"]},decls:1,vars:1,consts:[["class","control-error-msg flex flex-column",4,"ngIf"],[1,"control-error-msg","flex","flex-column"],["class","error-msg",4,"ngFor","ngForOf"],[1,"error-msg"]],template:function(e,n){1&e&&u.YNc(0,s,2,1,"div",0),2&e&&u.Q6J("ngIf",n.errors)},dependencies:[_.sg,_.O5],styles:[".control-error-msg[_ngcontent-%COMP%]{margin-top:5px;color:#e24c4c}"]}),f})()},93838:(ne,L)=>{var m=function(){function u(_){if(!_)throw new TypeError("Invalid argument; `value` has no value.");this.value=u.EMPTY,_&&u.isGuid(_)&&(this.value=_)}return u.isGuid=function(_){var C=_.toString();return _&&(_ instanceof u||u.validator.test(C))},u.create=function(){return new u([u.gen(2),u.gen(1),u.gen(1),u.gen(1),u.gen(3)].join("-"))},u.createEmpty=function(){return new u("emptyguid")},u.parse=function(_){return new u(_)},u.raw=function(){return[u.gen(2),u.gen(1),u.gen(1),u.gen(1),u.gen(3)].join("-")},u.gen=function(_){for(var C="",s=0;s<_;s++)C+=(65536*(1+Math.random())|0).toString(16).substring(1);return C},u.prototype.equals=function(_){return u.isGuid(_)&&this.value===_.toString()},u.prototype.isEmpty=function(){return this.value===u.EMPTY},u.prototype.toString=function(){return this.value},u.prototype.toJSON=function(){return{value:this.value}},u.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),u.EMPTY="00000000-0000-0000-0000-000000000000",u}();L.i=m},78791:(ne,L,p)=>{p.d(L,{c:()=>pe,t:()=>_e});var m=p(78645),u=p(47394),_=p(9666),C=p(36232),s=p(65879),w=p(9769),v=p(59773);const f=s.GuJ,e=Symbol("__destroy"),n=Symbol("__decoratorApplied");function q(d){return"string"==typeof d?Symbol(`__destroy__${d}`):e}function x(d,h){d[h]||(d[h]=new m.x)}function X(d,h){d[h]&&(d[h].next(),d[h].complete(),d[h]=null)}function ee(d){d instanceof u.w0&&d.unsubscribe()}function te(d,h){return function(){if(d&&d.call(this),X(this,q()),h.arrayName&&function ae(d){Array.isArray(d)&&d.forEach(ee)}(this[h.arrayName]),h.checkProperties)for(const y in this)h.blackList?.includes(y)||ee(this[y])}}function pe(d={}){return h=>{!function A(d){return!!d[f]}(h)?function le(d,h){d.prototype.ngOnDestroy=te(d.prototype.ngOnDestroy,h)}(h,d):function ce(d,h){const y=d.\u0275pipe;y.onDestroy=te(y.onDestroy,h)}(h,d),function Q(d){d.prototype[n]=!0}(h)}}const ie=7,oe=Symbol("CheckerHasBeenSet");function de(d){const h=s.dqk.Zone;return h&&"function"==typeof h.root?.run?h.root.run(d):d()}const re=!1;function _e(d,h){return y=>{const k=q(h);"string"==typeof h?function Ce(d,h,y){const k=d[h];if(re&&"function"!=typeof k)throw new Error(`${d.constructor.name} is using untilDestroyed but doesn't implement ${h}`);x(d,y),d[h]=function(){k.apply(this,arguments),X(this,y),d[h]=k}}(d,h,k):(re&&function ye(d){const h=Object.getPrototypeOf(d);if(!(n in h))throw new Error("untilDestroyed operator cannot be used inside directives or components or providers that are not decorated with UntilDestroy decorator")}(d),x(d,k));const E=d[k];return re&&function ue(d,h){d[oe]||function ve(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha||typeof process<"u"&&"[object process]"===Object.prototype.toString.call(process)}()||(de(()=>(0,_.D)(Promise.resolve()).pipe((0,w.z)(()=>{let y;try{y=(0,s.EEQ)(d)}catch{y=null}const k=y?.lView;if(null==k)return C.E;const E=k[ie]||(k[ie]=[]),G=new m.x;return E.push(function(){de(()=>{G.next(),G.complete()})}),G}),(0,w.z)(()=>Promise.resolve())).subscribe(()=>{(h.observed??h.observers.length>0)&&console.warn(function O(d){return`\n  The ${d.constructor.name} still has subscriptions that haven't been unsubscribed.\n  This may happen if the class extends another class decorated with @UntilDestroy().\n  The child class implements its own ngOnDestroy() method but doesn't call super.ngOnDestroy().\n  Let's look at the following example:\n  @UntilDestroy()\n  @Directive()\n  export abstract class BaseDirective {}\n  @Component({ template: '' })\n  export class ConcreteComponent extends BaseDirective implements OnDestroy {\n    constructor() {\n      super();\n      someObservable$.pipe(untilDestroyed(this)).subscribe();\n    }\n    ngOnDestroy(): void {\n      // Some logic here...\n    }\n  }\n  The BaseDirective.ngOnDestroy() will not be called since Angular will call ngOnDestroy()\n  on the ConcreteComponent, but not on the BaseDirective.\n  One of the solutions is to declare an empty ngOnDestroy method on the BaseDirective:\n  @UntilDestroy()\n  @Directive()\n  export abstract class BaseDirective {\n    ngOnDestroy(): void {}\n  }\n  @Component({ template: '' })\n  export class ConcreteComponent extends BaseDirective implements OnDestroy {\n    constructor() {\n      super();\n      someObservable$.pipe(untilDestroyed(this)).subscribe();\n    }\n    ngOnDestroy(): void {\n      // Some logic here...\n      super.ngOnDestroy();\n    }\n  }\n  `}(d))})),d[oe]=!0)}(d,E),y.pipe((0,v.R)(E))}}}}]);