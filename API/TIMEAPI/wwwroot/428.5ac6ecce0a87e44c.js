"use strict";(self.webpackChunkUI_Base=self.webpackChunkUI_Base||[]).push([[428],{12428:(C,h,n)=>{n.r(h),n.d(h,{AlertsModule:()=>N});var v=n(96814),l=n(18068),m=n(56223),b=n(85571),e=n(65879),x=n(48244),a=n(85219),d=n(40707),c=n(96218),r=n(27561),_=n(31494),A=n(27213);function T(t,u){if(1&t){const i=e.EpF();e.TgZ(0,"ul",17)(1,"li",18)(2,"div",19),e._UZ(3,"i",20),e.qZA(),e.TgZ(4,"span",21),e._uU(5),e.TgZ(6,"span",22),e._uU(7),e.TgZ(8,"span",23),e.NdJ("click",function(s){const p=e.CHM(i).$implicit,f=e.oxw();return e.KtG(f.resolve(p.id,s))}),e._uU(9,"Resolve"),e.qZA()()()()()}if(2&t){const i=u.$implicit;e.xp6(5),e.hij("",i.type," "),e.xp6(2),e.hij(" ",i.message," ")}}function Z(t,u){if(1&t){const i=e.EpF();e.TgZ(0,"ul",24)(1,"li",25)(2,"div",19),e._UZ(3,"i",20),e.qZA(),e.TgZ(4,"span",21),e._uU(5),e.TgZ(6,"span",22),e._uU(7),e.TgZ(8,"span",23),e.NdJ("click",function(s){const p=e.CHM(i).$implicit,f=e.oxw();return e.KtG(f.resolve(p.id,s))}),e._uU(9,"Resolve"),e.qZA()()()()()}if(2&t){const i=u.$implicit;e.xp6(5),e.hij("",i.type," "),e.xp6(2),e.hij(" ",i.message," ")}}function M(t,u){1&t&&(e.TgZ(0,"span",26),e._uU(1,"Resolve"),e.qZA())}function y(t,u){if(1&t){const i=e.EpF();e.TgZ(0,"div",27),e._UZ(1,"button",28),e.TgZ(2,"button",29),e.NdJ("click",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.resetform())}),e.qZA()()}if(2&t){const i=e.oxw();e.xp6(1),e.Q6J("disabled",!i.amountupdateForm.valid)}}const F=function(){return{width:"50vw"}},E=[{path:"",component:(()=>{var t;class u{constructor(o,s,g,p,f){this.router=o,this.route=s,this.dashboardService=g,this.confirmationService=p,this.messageService=f,this.title="Alerts",this.filterModel={columnSearch:null,divisionIds:null,roleId:null,searchString:null,skip:0,take:99999999,sorting:null,typeIds:null,types:null},this.result=[],this.highAlerts=[],this.moderateAlerts=[],this.amountmodalvisible=!1}ngOnInit(){this.getalerts(),this.amountupdateForm=new m.cw({Id:new m.NI("",m.kI.required),updatedNote:new m.NI("",m.kI.required)})}getalerts(){this.dashboardService.getAlerts(this.filterModel).subscribe(o=>{this.result=o.data,this.highAlerts=this.result.filter(s=>"Red"==s.severity),this.moderateAlerts=this.result.filter(s=>"Yellow"==s.severity)})}resolve(o,s){this.confirmationService.confirm({key:"confirm2",target:s.target||new EventTarget,message:"Are you sure that you want to resolve?",icon:"pi pi-exclamation-triangle",accept:()=>{this.amountupdateForm.get("Id")?.patchValue(o),this.amountmodalvisible=!0},reject:()=>{}})}amountUpdateSubmit(){this.dashboardService.alert_Resolve({id:this.amountupdateForm.get("Id")?.value,updatedNote:this.amountupdateForm.get("updatedNote")?.value}).subscribe(o=>{o&&o.data&&(o.status==b.cH||o.status==b.nQ)?(this.messageService.add({severity:"error",life:8e4,summary:"Error",detail:o.message}),this.amountmodalvisible=!1,this.amountupdateForm.reset(),this.getalerts()):(this.messageService.add({severity:"success",life:8e4,summary:"Success",detail:o.message}),this.amountmodalvisible=!1,this.amountupdateForm.reset(),this.getalerts())})}resetform(){this.amountmodalvisible=!1,this.amountupdateForm.reset()}}return(t=u).\u0275fac=function(o){return new(o||t)(e.Y36(l.F0),e.Y36(l.gz),e.Y36(x.s),e.Y36(a.YP),e.Y36(a.ez))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-alerts"]],decls:23,vars:12,consts:[[1,"card"],[1,"flex","align-items-center","justify-content-between","mb-4"],[1,"block","text-600","font-medium","mb-3"],["class","p-0 mx-0 mt-0 mb-4 list-none",4,"ngFor","ngForOf"],["class","p-0 m-0 list-none",4,"ngFor","ngForOf"],["key","confirm2"],[1,"col-12",3,"formGroup","ngSubmit"],["header","Header",3,"visible","modal","draggable","resizable","closable","visibleChange","onHide"],["pTemplate","header"],[1,"p-fluid"],[1,"p-formgrid","grid"],[1,"col-12","flex","md:col-12","lg:col-12",2,"flex-wrap","wrap"],[1,"field","col-12","md:col-12","lg:col-12"],["htmlFor","type",2,"margin-bottom","20px"],["rows","2","pInputTextarea","","formControlName","updatedNote"],[3,"control"],["pTemplate","footer"],[1,"p-0","mx-0","mt-0","mb-4","list-none"],[1,"flex","align-items-center","py-2","border-bottom-1","surface-border",2,"background-color","#ffbbbb","border-radius","10pc"],[1,"w-3rem","h-3rem","flex","align-items-center","justify-content-center","bg-blue-100","border-circle","mr-3","flex-shrink-0",2,"margin-left","7px"],[1,"pi","pi-exclamation-triangle","text-xl","text-blue-500"],[1,"text-900","line-height-3",2,"font-size","medium","font-weight","600"],[1,"text-700"],[1,"text-blue-500",2,"cursor","pointer",3,"click"],[1,"p-0","m-0","list-none"],[1,"flex","align-items-center","py-2","border-bottom-1","surface-border",2,"background-color","#f9f996","border-radius","10pc"],[1,"text-xl","font-bold"],[1,"row",2,"justify-content","end"],["pButton","","type","submit","label","Submit",3,"disabled"],["pButton","","type","button","label","Cancel",1,"p-button-secondary",3,"click"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Alerts"),e.qZA()(),e.TgZ(4,"span",2),e._uU(5,"HIGH"),e.qZA(),e.YNc(6,T,10,2,"ul",3),e.TgZ(7,"span",2),e._uU(8,"MODERATE"),e.qZA(),e.YNc(9,Z,10,2,"ul",4),e.qZA(),e._UZ(10,"p-confirmPopup",5),e.TgZ(11,"form",6),e.NdJ("ngSubmit",function(){return s.amountUpdateSubmit()}),e.TgZ(12,"p-dialog",7),e.NdJ("visibleChange",function(p){return s.amountmodalvisible=p})("onHide",function(){return s.resetform()}),e.YNc(13,M,2,0,"ng-template",8),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12)(18,"label",13),e._uU(19,"Reason"),e.qZA(),e._UZ(20,"textarea",14)(21,"app-error-msg",15),e.qZA()()()(),e.YNc(22,y,3,1,"ng-template",16),e.qZA()()),2&o&&(e.xp6(6),e.Q6J("ngForOf",s.highAlerts),e.xp6(3),e.Q6J("ngForOf",s.moderateAlerts),e.xp6(2),e.Q6J("formGroup",s.amountupdateForm),e.xp6(1),e.Akn(e.DdM(11,F)),e.Q6J("visible",s.amountmodalvisible)("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),e.xp6(9),e.Q6J("control",s.amountupdateForm.get("updatedNote")))},dependencies:[v.sg,m._Y,m.Fj,m.JJ,m.JL,a.jx,d.Hq,c.g,m.sg,m.u,r.u,_.P,A.V]}),u})()}];let U=(()=>{var t;class u{}return(t=u).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(E),l.Bz]}),u})();var I=n(30442);let N=(()=>{var t;class u{}return(t=u).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.ez,U,I.W]}),u})()},27561:(C,h,n)=>{n.d(h,{u:()=>x});var v=n(56223),l=n(65879),m=n(96814);function b(a,d){if(1&a&&(l.TgZ(0,"span",3),l._uU(1),l.qZA()),2&a){const c=d.$implicit;l.xp6(1),l.Oqu(c)}}function e(a,d){if(1&a&&(l.TgZ(0,"div",1),l.YNc(1,b,2,1,"span",2),l.qZA()),2&a){const c=l.oxw();l.xp6(1),l.Q6J("ngForOf",c.errors)}}let x=(()=>{var a;class d{constructor(){this.errors=[],this.control=new v.NI}ngOnInit(){this.control?.valueChanges.subscribe(r=>{this.updateErrorMsg(this.control)})}set _control(r){this.control=r,this.updateErrorMsg(r)}updateErrorMsg(r){this.errors=[],r&&r.invalid&&(r.dirty||r.touched)&&r.errors&&Object.keys(r.errors).forEach(A=>{switch(A){case"required":this.errors.includes("Required")||(this.errors=[...this.errors,"Required"]);break;case"minlength":this.errors.includes("Minimum")||(this.errors=[...this.errors,"Minimum of "+(r?.errors?.minlength?r?.errors?.minlength.requiredLength:0)+" characters required"]);break;case"maxlength":this.errors.includes("Maximum")||(this.errors=[...this.errors,"Maximum of "+(r?.errors?.maxlength?r?.errors?.maxlength.requiredLength:0)+" characters allowed"]);break;case"email":this.errors.includes("Email")||(this.errors=[...this.errors,"Email is Invalid"]);break;case"min":this.errors.includes("Minimum")||(this.errors=[...this.errors,"Minimum of "+(r?.errors?.min?r?.errors?.min.min:0)+" is required"]);break;case"max":this.errors.includes("Maximum")||(this.errors=[...this.errors,"Maximum of "+(r?.errors?.max?r?.errors?.max.max:0)+" is required"])}})}}return(a=d).\u0275fac=function(r){return new(r||a)},a.\u0275cmp=l.Xpm({type:a,selectors:[["app-error-msg"]],inputs:{_control:["control","_control"]},decls:1,vars:1,consts:[["class","control-error-msg flex flex-column",4,"ngIf"],[1,"control-error-msg","flex","flex-column"],["class","error-msg",4,"ngFor","ngForOf"],[1,"error-msg"]],template:function(r,_){1&r&&l.YNc(0,e,2,1,"div",0),2&r&&l.Q6J("ngIf",_.errors)},dependencies:[m.sg,m.O5],styles:[".control-error-msg[_ngcontent-%COMP%]{margin-top:5px;color:#e24c4c}"]}),d})()}}]);