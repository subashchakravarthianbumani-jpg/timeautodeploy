"use strict";(self.webpackChunkUI_Base=self.webpackChunkUI_Base||[]).push([[315],{67741:(R,T,d)=>{d.d(T,{n:()=>ht});var a=d(31290),m=d(16676),e=d(65879),b=d(18068),w=d(80290),u=d(57853),f=d(65031),D=d(43859),c=d(96814),p=d(56223),A=d(85219),g=d(23212),C=d(53965),x=d(34055),v=d(92655),Z=d(10217),N=d(20553),U=d(99907),q=d(63316),I=d(40707),F=d(53714),E=d(96218),O=d(27561),Y=d(31494),L=d(27213),k=d(39232),Q=d(66651),W=d(33259),H=d(51712),$=d(8720),V=d(94532),j=d(6263),G=d(14953),K=d(26239),z=d(48804);function X(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){e.CHM(o),e.oxw();const t=e.MAs(2);return e.KtG(t.exportCSV())}),e.qZA(),e.TgZ(2,"button",45),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.exportExcel())}),e.qZA(),e.TgZ(3,"button",46),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.exportPdf())}),e.qZA()(),e.TgZ(4,"div",43)(5,"input",47),e.NdJ("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.tenderSearchString=t)})("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.onGlobalFilter(t))}),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(5),e.Q6J("ngModel",o.tenderSearchString)}}function ee(n,s){1&n&&(e.TgZ(0,"th"),e._uU(1,"Action"),e.qZA())}function te(n,s){if(1&n&&e._UZ(0,"p-sortIcon",51),2&n){const o=e.oxw().$implicit;e.Q6J("field",o.sortablefield)}}function ie(n,s){if(1&n&&(e.TgZ(0,"th",49),e._uU(1),e.ALo(2,"titlecase"),e.YNc(3,te,1,1,"p-sortIcon",50),e.qZA()),2&n){const o=s.$implicit;e.Q6J("pSortableColumn",o.sortablefield),e.xp6(1),e.hij(" ",e.lcZ(2,3,o.header)," "),e.xp6(2),e.Q6J("ngIf",o.sortablefield)}}function oe(n,s){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,ee,2,0,"th",40),e.YNc(2,ie,4,5,"th",48),e.qZA()),2&n){const o=s.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.canShowAction),e.xp6(1),e.Q6J("ngForOf",o)}}function ne(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(t){e.CHM(o);const l=e.oxw(2).$implicit,r=e.oxw(2).$implicit,M=e.oxw();return e.KtG(M.makeAction(l.type,r,t))}),e.qZA()}if(2&n){const o=e.oxw(2).$implicit;e.Q6J("icon",o.icon)("title",o.title)}}function le(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ne,1,2,"button",58),e.qZA()),2&n){const o=e.oxw().$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!o.visibilityCheckFeild||i[o.visibilityCheckFeild])}}function se(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(t){e.CHM(o);const l=e.oxw(2).$implicit,r=e.oxw(2).$implicit,M=e.oxw();return e.KtG(M.makeAction(l.type,r,t))}),e.qZA()}if(2&n){const o=e.oxw(2).$implicit;e.Q6J("label",o.title)}}function re(n,s){if(1&n&&e.YNc(0,se,1,1,"button",60),2&n){const o=e.oxw().$implicit,i=e.oxw(2).$implicit;e.Q6J("ngIf",!o.visibilityCheckFeild||i[o.visibilityCheckFeild])}}function ae(n,s){if(1&n&&(e.ynx(0),e.YNc(1,le,2,1,"div",56),e.YNc(2,re,1,1,"ng-template",null,57,e.W1O),e.BQk()),2&n){const o=s.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",o.isIcon)("ngIfElse",i)}}function de(n,s){if(1&n&&(e.TgZ(0,"td",55),e.YNc(1,ae,4,2,"ng-container",23),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",o.actions)}}function pe(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const o=e.oxw(3).$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i[o.field]," days delay ")}}function ce(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const o=e.oxw(3).$implicit,i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.getAbs(i[o.field])," days ahead ")}}const me=function(n){return{"background-color":n,color:"white","border-radius":"12px",padding:"2px 10px","font-size":"12px","font-weight":"bold",display:"inline-block"}};function _e(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"span",64),e.YNc(2,pe,2,1,"ng-container",40),e.YNc(3,ce,2,1,"ng-container",40),e.qZA(),e.BQk()),2&n){const o=e.oxw(2).$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngStyle",e.VKq(3,me,i[o.field]>1?"#ff4d4f":"#52c41a")),e.xp6(1),e.Q6J("ngIf",i[o.field]>1),e.xp6(1),e.Q6J("ngIf",i[o.field]<1&&0!==i[o.field])}}function ue(n,s){if(1&n&&(e.ynx(0),e.YNc(1,_e,4,5,"ng-container",40),e.BQk()),2&n){const o=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null!==i[o.field]&&""!==i[o.field])}}function ge(n,s){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"p-progressBar",66),e.qZA()),2&n){const o=e.oxw(2).$implicit,i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J("value",i[o.field])("color",t.getcolorforProgress(i[o.field],o.field))}}function he(n,s){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const o=e.oxw(3).$implicit,i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.dc(i[o.field],o.field)," ")}}function fe(n,s){if(1&n&&(e.TgZ(0,"div")(1,"a",69),e._uU(2," Link "),e.qZA()()),2&n){const o=e.oxw(4).$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("title",i[o.field])("href",i[o.field],e.LSH)}}function ve(n,s){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"p-tag",71),e.qZA()),2&n){const o=e.oxw(5).$implicit,i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.getBtnSeverity(i[o.field]))("value",i[o.field])}}function Me(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div")(1,"p-button",73),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(6).$implicit,l=e.oxw().$implicit,r=e.oxw();return e.KtG(r.maketableFilter(t,l))}),e.qZA()()}if(2&n){const o=e.oxw(6).$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("label",i[o.field])}}function ye(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div")(1,"p-button",75),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(7).$implicit,l=e.oxw().$implicit,r=e.oxw();return e.KtG(r.showPopup(t.popupType,l))}),e.qZA()()}if(2&n){const o=e.oxw(7).$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("label",i[o.field])}}function Ce(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"p",79),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(9).$implicit,l=e.oxw().$implicit,r=e.oxw();return e.KtG(r.downloadFile(t.field,l))}),e._uU(1),e.qZA()}if(2&n){const o=e.oxw(9).$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i[o.field]," ")}}function Te(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"img",80),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(9).$implicit,l=e.oxw().$implicit,r=e.oxw();return e.KtG(r.showimg(t.field,l))}),e.qZA()}if(2&n){const o=e.oxw(9).$implicit,i=e.oxw().$implicit,t=e.oxw();e.Q6J("src",t.geturl(o.field,i),e.LSH)}}function be(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ce,2,1,"p",77),e.YNc(2,Te,1,1,"img",78),e.qZA()),2&n){const o=e.oxw(8).$implicit,i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isImage(i[o.field])),e.xp6(1),e.Q6J("ngIf",t.isImage(i[o.field]))}}function we(n,s){if(1&n&&e._uU(0),2&n){const o=e.oxw(8).$implicit,i=e.oxw().$implicit;e.hij(" ",i[o.field]," ")}}function Ze(n,s){if(1&n&&(e.YNc(0,be,3,2,"div",56),e.YNc(1,we,1,1,"ng-template",null,76,e.W1O)),2&n){const o=e.MAs(2),i=e.oxw(7).$implicit,t=e.oxw().$implicit;e.Q6J("ngIf",i.isDownloadable&&t[i.field]&&""!=t[i.field])("ngIfElse",o)}}function De(n,s){if(1&n&&(e.YNc(0,ye,2,1,"div",56),e.YNc(1,Ze,3,2,"ng-template",null,74,e.W1O)),2&n){const o=e.MAs(2),i=e.oxw(6).$implicit;e.Q6J("ngIf",i.isPopup)("ngIfElse",o)}}function Ae(n,s){if(1&n&&(e.YNc(0,Me,2,1,"div",56),e.YNc(1,De,3,2,"ng-template",null,72,e.W1O)),2&n){const o=e.MAs(2),i=e.oxw(5).$implicit;e.Q6J("ngIf",i.isAnchortagforFilter)("ngIfElse",o)}}function xe(n,s){if(1&n&&(e.YNc(0,ve,2,2,"div",56),e.YNc(1,Ae,3,2,"ng-template",null,70,e.W1O)),2&n){const o=e.MAs(2),i=e.oxw(4).$implicit;e.Q6J("ngIf",i.isBadge)("ngIfElse",o)}}function Ne(n,s){if(1&n&&(e.YNc(0,fe,3,2,"div",56),e.YNc(1,xe,3,2,"ng-template",null,68,e.W1O)),2&n){const o=e.MAs(2),i=e.oxw(3).$implicit;e.Q6J("ngIf",i.isLink)("ngIfElse",o)}}function ke(n,s){if(1&n&&(e.YNc(0,he,2,1,"div",56),e.YNc(1,Ne,3,2,"ng-template",null,67,e.W1O)),2&n){const o=e.MAs(2),i=e.oxw(2).$implicit;e.Q6J("ngIf","lastUpdatedDate"===i.field||"createdDate"===i.field||"startDate"===i.field||"endDate"===i.field||"workCommencementDate"===i.field||"workCompletionDate"===i.field||"tenderOpenedDate"===i.field)("ngIfElse",o)}}function Se(n,s){if(1&n&&(e.YNc(0,ge,2,2,"div",56),e.YNc(1,ke,3,2,"ng-template",null,65,e.W1O)),2&n){const o=e.MAs(2),i=e.oxw().$implicit;e.Q6J("ngIf",i.isProgress)("ngIfElse",o)}}function Be(n,s){if(1&n&&(e.TgZ(0,"td",62),e.YNc(1,ue,2,1,"ng-container",56),e.YNc(2,Se,3,2,"ng-template",null,63,e.W1O),e.qZA()),2&n){const o=s.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf","dateDifference"===o.field)("ngIfElse",i)}}function Re(n,s){if(1&n&&(e.TgZ(0,"tr",52),e.YNc(1,de,2,1,"td",53),e.YNc(2,Be,4,2,"td",54),e.qZA()),2&n){const o=s.$implicit,i=s.columns,t=e.oxw();e.Q6J("pSelectableRow",o),e.xp6(1),e.Q6J("ngIf",t.canShowAction),e.xp6(1),e.Q6J("ngForOf",i)}}function Ue(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2,"No Records Found."),e.qZA()()),2&n){const o=e.oxw();e.xp6(1),e.uIk("colspan",o.cols.length+1)}}function Ie(n,s){1&n&&(e.TgZ(0,"span",81),e._uU(1,"View Work"),e.qZA())}function qe(n,s){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"h5"),e._uU(4,"Template"),e.qZA(),e.TgZ(5,"div",14)(6,"div",15)(7,"span"),e._uU(8,"Work Template Name: "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",15)(11,"span"),e._uU(12,"Work Type: "),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"div",15)(15,"span"),e._uU(16,"Sub Work Type: "),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"div",15)(19,"span"),e._uU(20,"Service Type: "),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"div",15)(23,"span"),e._uU(24,"Category Type: "),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"div",15)(27,"span"),e._uU(28,"Strength: "),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"div",15)(31,"span"),e._uU(32,"Template Code: "),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div",15)(35,"span"),e._uU(36,"Duration in Days: "),e.qZA(),e._uU(37),e.qZA()()()()()),2&n){const o=e.oxw();e.xp6(9),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.workTemplateName?o.templateWithMilestone.workTemplateName:""," "),e.xp6(4),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.workType?o.templateWithMilestone.workType:""," "),e.xp6(4),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.subWorkType?o.templateWithMilestone.subWorkType:""," "),e.xp6(4),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.serviceType?o.templateWithMilestone.serviceType:""," "),e.xp6(4),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.categoryType?o.templateWithMilestone.categoryType:""," "),e.xp6(4),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.strength?o.templateWithMilestone.strength:""," "),e.xp6(4),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.templateCode?o.templateWithMilestone.templateCode:""," "),e.xp6(4),e.hij("",o.templateWithMilestone&&o.templateWithMilestone.workDurationInDays?o.templateWithMilestone.workDurationInDays:""," ")}}function Fe(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"div",17)(15,"div",82),e._UZ(16,"p-progressBar",83),e.qZA(),e.TgZ(17,"div",84),e._uU(18),e.ALo(19,"round"),e.qZA()()(),e.TgZ(20,"td")(21,"div",17)(22,"div",82),e._UZ(23,"p-progressBar",85),e.qZA(),e.TgZ(24,"div",84),e._uU(25),e.ALo(26,"round"),e.qZA()()(),e.TgZ(27,"td"),e._uU(28),e.qZA(),e.TgZ(29,"td"),e._UZ(30,"p-tag",86),e.qZA(),e.TgZ(31,"td"),e._UZ(32,"p-tag",86),e.qZA()()),2&n){const o=s.$implicit,i=s.index,t=e.oxw(2);e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(o.milestoneName),e.xp6(2),e.Oqu(o.milestoneCode),e.xp6(2),e.Oqu(t.dc(o.startDate)),e.xp6(2),e.Oqu(o.durationInDays),e.xp6(2),e.Oqu(t.dc(o.endDate)),e.xp6(4),e.Q6J("value",o.percentageCompleted)("showValue",!1)("color",t.getcolorforProgress(o.percentageCompleted,"percentageCompleted")),e.xp6(2),e.hij(" ",e.lcZ(19,19,o.percentageCompleted),"% "),e.xp6(5),e.Q6J("value",o.paymentPercentage)("showValue",!1)("color",t.getcolorforProgress(o.paymentPercentage,"paymentPercentage")),e.xp6(2),e.hij(" ",e.lcZ(26,21,o.paymentPercentage),"% "),e.xp6(3),e.Oqu(o.milestoneAmount),e.xp6(2),e.Q6J("severity",t.getBtnSeverity(o.paymentStatusName))("value",o.paymentStatusName),e.xp6(2),e.Q6J("severity",t.getBtnSeverity(o.milestoneStatusName))("value",o.milestoneStatusName)}}function Le(n,s){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"h5"),e._uU(4,"Stage of work"),e.qZA(),e.TgZ(5,"div",14)(6,"table",22)(7,"thead")(8,"tr")(9,"th"),e._uU(10,"S. No"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Milestone Name"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Milestone Code"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"Start Date"),e.qZA(),e.TgZ(17,"th"),e._uU(18,"Days"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"End Date"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Completed Percentage"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Payment Percentage"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Payment Value"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Payment Status"),e.qZA(),e.TgZ(29,"th"),e._uU(30,"Milestone Status"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,Fe,33,23,"tr",23),e.qZA()()()()()()),2&n){const o=e.oxw();e.xp6(32),e.Q6J("ngForOf",o.templateWithMilestone.milestones)}}function Pe(n,s){if(1&n&&(e.TgZ(0,"small",93),e._uU(1),e.qZA()),2&n){const o=s.$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(i.dcwt(o.createdDate))}}function Ee(n,s){1&n&&e._uU(0),2&n&&e.hij(" ",s.$implicit.activityMessage," ")}function Oe(n,s){if(1&n&&(e.TgZ(0,"div",87)(1,"div",88)(2,"h5"),e._uU(3,"Activity Log"),e.qZA(),e.TgZ(4,"ng-scrollbar",89)(5,"p-timeline",90),e.YNc(6,Pe,2,1,"ng-template",91),e.YNc(7,Ee,1,1,"ng-template",92),e.qZA()()()()),2&n){const o=e.oxw();e.xp6(5),e.Q6J("value",o.activitiesevents)}}function Ye(n,s){1&n&&(e.TgZ(0,"span",98),e._UZ(1,"i",99),e.qZA()),2&n&&e.Udp("background-color",s.$implicit.color)}function Je(n,s){if(1&n&&(e.TgZ(0,"p-card",100)(1,"p"),e._uU(2),e.qZA()()),2&n){const o=s.$implicit,i=e.oxw(2);e.Q6J("header",o.subjectText)("subheader",i.dcwt(o.commentDate)),e.xp6(2),e.hij(" ",o.commentsText," ")}}function Qe(n,s){if(1&n&&(e.TgZ(0,"div",87)(1,"div",11)(2,"div",94)(3,"div",95)(4,"h5"),e._uU(5,"Comments"),e.qZA()()(),e.TgZ(6,"ng-scrollbar",89)(7,"p-timeline",96),e.YNc(8,Ye,2,2,"ng-template",97),e.YNc(9,Je,3,3,"ng-template",91),e.qZA()()()()),2&n){const o=e.oxw();e.xp6(7),e.Q6J("value",o.events)}}function We(n,s){1&n&&(e.TgZ(0,"span",81),e._uU(1,"View M-Book"),e.qZA())}function He(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",101),e.NdJ("click",function(){const l=e.CHM(o).$implicit,r=e.oxw();return e.KtG(r.downloadMilestoneFiles(l.id,l.originalFileName))}),e.qZA()()()}if(2&n){const o=s.$implicit,i=s.index,t=e.oxw();e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(o.originalFileName),e.xp6(2),e.Oqu(o.createdByUserName),e.xp6(2),e.Oqu(t.dcwt(o.createdDate))}}function $e(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(o);const t=e.oxw().$implicit,l=e.oxw();return e.KtG(l.download(t.id,t.originalFileName))}),e.qZA()}}function Ve(n,s){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",102),e.YNc(8,$e,1,0,"button",103),e.qZA()()),2&n){const o=s.$implicit,i=s.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(o.fileType),e.xp6(2),e.Oqu(o.savedFileName),e.xp6(2),e.Q6J("ngIf",o.originalFileName)}}function je(n,s){1&n&&(e.TgZ(0,"tr")(1,"td",105),e._uU(2,"No Records Found."),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("colSpan",5))}function Ge(n,s){1&n&&(e.TgZ(0,"h5"),e._uU(1," Approval History "),e.qZA())}function Ke(n,s){if(1&n&&(e.TgZ(0,"div",37)(1,"div",38)(2,"div",106),e._UZ(3,"app-view-mbook-history",107),e.qZA()()()),2&n){const o=e.oxw();e.xp6(3),e.Q6J("history",null==o.mBookDetails?null:o.mBookDetails.approvalHistory)}}function ze(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"span",81),e._uU(1),e.qZA(),e.TgZ(2,"button",110),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.download(t.imgDetails.fileId,t.imgDetails.name))}),e._uU(3," Download "),e.qZA()}if(2&n){const o=e.oxw(2);e.xp6(1),e.Oqu(o.imgDetails.name)}}const P=function(){return{width:"80vw"}};function Xe(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"p-dialog",108),e.NdJ("visibleChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.imgVisible=t)})("onHide",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.resetimg())}),e.YNc(1,ze,4,1,"ng-template",4),e.TgZ(2,"div",11),e._UZ(3,"img",109),e.qZA()()}if(2&n){const o=e.oxw();e.Akn(e.DdM(8,P)),e.Q6J("visible",o.imgVisible)("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),e.xp6(3),e.Q6J("src",o.imgDetails.url,e.LSH)}}const et=function(){return{"min-width":"50rem"}},tt=function(){return{display:"flex"}};let it=(()=>{var n;class s{get f(){return this.mBookForm?.controls}get t(){return this.f.documents}get fileListd(){return this.t.controls}constructor(i,t,l,r){this.confirmationService=i,this.generalService=t,this.mbookService=l,this.tenderService=r,this.rows=10,this.total=0,this.defaultSortOrder=1,this.canShowAction=!0,this.invokeAction=new e.vpe,this.changecolFilter=new e.vpe,this.changefilter=new e.vpe,this.entirerecords=[],this.first=0,this.tenderVisible=!1,this.bookVisible=!1,this.imgVisible=!1,this.filesList=[],this.MbbokfilesList=[],this.imgExtension=a.iB,this.commentfiletrModel={columnSearch:null,searchString:null,skip:0,sorting:null,take:5e5},this.tenderSearchString="",this.mBookForm=new p.cw({id:new p.NI(""),date:new p.NI("",[p.kI.required]),actuals:new p.NI("",[p.kI.required]),notes:new p.NI("",[p.kI.required])})}ngOnChanges(){this.rowsPerPageOptions=[5,10,25,50,this.total]}lazyload(i){this.filterModel={...this.filterModel,sorting:{fieldName:i.sortField&&""!==i.sortField?i.sortField:this.defaultSortField,sort:1==i.sortOrder?"ASC":"DESC"}},this.changefilter.emit(this.filterModel)}next(){this.first=this.first+this.rows}prev(){this.first=this.first-this.rows}isLastPage(){return!this.entirerecords||this.first===this.entirerecords.length-this.rows}isFirstPage(){return!this.entirerecords||0===this.first}onPageChange(i){this.first=i.first,this.rows=i.rows;const t=Math.min(this.total-1,this.first);Math.min(this.total,this.first+this.rows),this.filterModel={...this.filterModel,skip:t,take:i.rows},this.changefilter.emit(this.filterModel)}maketableFilter(i,t){this.changecolFilter.emit({type:i,record:t})}showPopup(i,t){"WORK"==i||"MILESTONE"==i?this.tenderService.getTenderById(t.tenderId).subscribe(l=>{this.tender=l.data,this.tenderService.GetWorkTemplate(l.data.id).subscribe(r=>{this.templateWithMilestone=r.data[0],this.tenderVisible=!0,this.bookVisible=!1}),this.tenderService.getCommentList({...this.commentfiletrModel,where:{type:"TENDER",typeId:t.tenderId}}).subscribe(r=>{this.events=r.data}),this.tenderService.getactivityList({...this.commentfiletrModel,where:{type:"TENDER",typeId:t.tenderId},ids:null,types:null}).subscribe(r=>{this.activitiesevents=r.data})}):this.mbookService.getMBookbyId(t.id).subscribe(l=>{l&&(this.mBookDetails=l.data,this.tenderService.MilestoneFiles(this.mBookDetails?.workTemplateMilestoneId??"").subscribe(r=>{r&&(this.filesList=r.data,this.mBookForm.get("date")?.patchValue(this.mBookDetails?.date?m(this.mBookDetails?.date).toDate():null),this.mBookForm.get("id")?.patchValue(this.mBookDetails?.id),this.mBookForm.get("actuals")?.patchValue(this.mBookDetails?.actualAmount),this.mBookForm.get("notes")?.patchValue(this.mBookDetails?.workNotes),this.tenderVisible=!1,this.bookVisible=!0)}))})}onGlobalFilter(i){this.filterModel={...this.filterModel,searchString:this.tenderSearchString},this.changefilter.emit(this.filterModel)}makeAction(i,t,l){"DELETE"==i?this.confirmationService.confirm({key:"confirm2",target:l.target||new EventTarget,message:"Are you sure that you want to delete?",icon:"pi pi-exclamation-triangle",accept:()=>{this.invokeAction.emit({type:i,record:t})},reject:()=>{}}):"INACTIVATE"==i?this.confirmationService.confirm({key:"confirm2",target:l.target||new EventTarget,message:"Are you sure that you want to InActivate?",icon:"pi pi-exclamation-triangle",accept:()=>{this.invokeAction.emit({type:i,record:t})},reject:()=>{}}):"ACTIVATE"==i?this.confirmationService.confirm({key:"confirm2",target:l.target||new EventTarget,message:"Are you sure that you want to Activate?",icon:"pi pi-exclamation-triangle",accept:()=>{this.invokeAction.emit({type:i,record:t})},reject:()=>{}}):this.invokeAction.emit({type:i,record:t})}dc(i,t){return"startDate"===t||"endDate"===t||"tenderOpenedDate"===t?i?(0,a.ql)(i):"":(0,a.gv)(i)}getBtnSeverity(i){return(0,a.x)(i)}getcolorforProgress(i,t){return(0,a.xM)(i,t)}exportPdf(){this.exportColumns=this.cols.map(t=>({title:t.header,dataKey:t.field}));var i="{total_pages_count_string}";d.e(846).then(d.bind(d,69846)).then(t=>{Promise.all([d.e(846),d.e(403)]).then(d.t.bind(d,33403,23)).then(l=>{const r=new t.default("l","px","a3");var M=this.fileName;r.autoTable(this.exportColumns,this.records),r.autoTable({willDrawPage:function(y){r.setFontSize(20),r.setTextColor(40),r.text(M+" Report",y.settings.margin.left,20)},didDrawPage:function(y){var _="Page "+r.internal.getNumberOfPages();"function"==typeof r.putTotalPages&&(_=_+" of "+i),r.setFontSize(10);var h=r.internal.pageSize,B=h.height?h.height:h.getHeight();r.text(_,y.settings.margin.left,B-10)},theme:"striped"}),"function"==typeof r.putTotalPages&&r.putTotalPages(i),r.setProperties({title:this.fileName+"_Report"}),r.save(this.fileName+"_Report_"+(new Date).getTime()+".pdf")})})}exportExcel(){d.e(486).then(d.bind(d,11486)).then(i=>{this.cols.reduce((_,h)=>(_[h.field]=h.header,_),{});const l=this.records.map(_=>{const h={};return this.cols.forEach(B=>{h[B.header]=_[B.field]}),h}),r=i.utils.json_to_sheet(l),y=i.write({Sheets:{[this.fileName||"Sheet1"]:r},SheetNames:[this.fileName||"Sheet1"]},{bookType:"xlsx",type:"array"});Promise.resolve().then(d.t.bind(d,10217,23)).then(_=>{(_.default||_.saveAs)(new Blob([y],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),(this.fileName||"Export")+"_Report_"+(new Date).getTime()+".xlsx")})})}gettimestanp(){return(new Date).getTime()}saveAsExcelFile(i,t){const M=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Z.saveAs(M,t+".xlsx")}resetform(){}convertoWordsIND(i){return(0,a.i7)(i)}dcwt(i){return(0,a.gv)(i)}download(i,t){this.generalService.downloads(i,t)}downloadMilestoneFiles(i,t){this.generalService.downloads(i,t??"File.png")}downloadFile(i,t){this.generalService.downloads("milestoneFile1Original"==i?t.milestoneFile1Saved.split("|")[0]:"milestoneFile2Original"==i?t.milestoneFile2Saved.split("|")[0]:"","milestoneFile1Original"==i?t.milestoneFile1Original:"milestoneFile2Original"==i?t.milestoneFile2Original:"File.png")}geturl(i,t){var l="milestoneFile1Original"==i?t.milestoneFile1Saved.split("|")[1]:"milestoneFile2Original"==i?t.milestoneFile2Saved.split("|")[1]:"";return`${N.N.apiUrl.replace("/api/","")}/images/${l}`}isImage(i){if(i&&""!=i){var t=i.substring(i.lastIndexOf("."),i.length);return this.imgExtension.includes(t.toLowerCase())}return!1}showimg(i,t){var l="milestoneFile1Original"==i?t.milestoneFile1Saved:"milestoneFile2Original"==i?t.milestoneFile2Saved:"";this.imgVisible=!0;var r=`${N.N.apiUrl.replace("/api/","")}/images/${l.split("|")[1]}`;this.imgDetails={name:t[i],url:r,fileId:l.split("|")[0]}}resetimg(){}getAbs(i){return Math.abs(i)}}return(n=s).\u0275fac=function(i){return new(i||n)(e.Y36(A.YP),e.Y36(U.m),e.Y36(q.B),e.Y36(w.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-report-milestone"]],inputs:{records:"records",cols:"cols",filterColumns:"filterColumns",actions:"actions",fileName:"fileName",rows:"rows",total:"total",defaultSortField:"defaultSortField",defaultSortOrder:"defaultSortOrder",filterModel:"filterModel",canShowAction:"canShowAction"},outputs:{invokeAction:"invokeAction",changecolFilter:"changecolFilter",changefilter:"changefilter"},features:[e.TTD],decls:250,vars:94,consts:[[1,"wd",2,"margin-top","20px"],["responsiveLayout","scroll",3,"columns","value","exportFilename","customSort","paginator","rows","lazy","totalRecords","loading","tableStyle","onLazyLoad"],["dt",""],["pTemplate","caption","style","display: flex",3,"ngStyle"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"showCurrentPageReport","first","rows","totalRecords","rowsPerPageOptions","onPageChange"],["key","confirm2"],["header","View Work",3,"visible","modal","draggable","resizable","closable","visibleChange","onHide"],[1,""],[1,"card","p-fluid",2,"padding","20px 20px 20px 20px","background-color","#e6e7ff"],[1,"p-formgrid","grid"],[1,"col-12"],[1,"col-12","row"],[1,"lg:col-4","md:col-4","sm:col-12","boldlabelinsiderow"],["class","card p-fluid","style","padding: 20px 20px 20px 20px; background-color: #e6e7ff",4,"ngIf"],[1,"row"],["class","lg:col-6 md:col-6",4,"ngIf"],["header","View M-Book",3,"visible","modal","draggable","resizable","closable","visibleChange","onHide"],[1,"col-11"],[1,"stablediv",2,"padding","20px","margin-bottom","10px","margin-top","10px","text-align","left"],[1,"table","sssdt"],[4,"ngFor","ngForOf"],[3,"formGroup"],[3,"disabled"],[1,"p-fluid"],[1,"flex","grid","formgrid"],[1,"field","sm:col-12","md:col-6","lg:col-6"],["htmlFor","category"],["formControlName","date","inputId","icon",3,"showIcon"],[3,"control"],["pInputText","","formControlName","actuals","type","text",3,"maxlength"],[1,"field","sm:col-12","md:col-12","lg:col-12"],["rows","2","pInputTextarea","","formControlName","notes"],[1,"row","flex"],[1,"col"],[1,"formgrid","mb-3"],[1,"card","p-fluid",2,"padding-bottom","10px"],[1,"table"],[4,"ngIf"],["class","formgrid mb-3",4,"ngIf"],["header","View Image",3,"visible","modal","style","draggable","resizable","closable","visibleChange","onHide",4,"ngIf"],[1,"col-6",2,"padding","0px"],["type","button","pButton","","pRipple","","icon","pi pi-file","pTooltip","CSV","tooltipPosition","bottom",1,"mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-warning","mr-2",3,"click"],["placeholder","Search Keyword and Click Enter",1,"p-inputtext","p-component","p-element","w-full",3,"ngModel","ngModelChange"],["style","text-wrap: nowrap",3,"pSortableColumn",4,"ngFor","ngForOf"],[2,"text-wrap","nowrap",3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],["class","dttable","style","display: flex",4,"ngIf"],["class","dttable",4,"ngFor","ngForOf"],[1,"dttable",2,"display","flex"],[4,"ngIf","ngIfElse"],["buttn",""],["type","button","style","background-color: aliceblue","pButton","","pRipple","","class","mr-2 p-element p-ripple p-button p-button p-button-outlined p-button p-component p-button",3,"icon","title","click",4,"ngIf"],["type","button","pButton","","pRipple","",1,"mr-2","p-element","p-ripple","p-button","p-button","p-button-outlined","p-button","p-component","p-button",2,"background-color","aliceblue",3,"icon","title","click"],["pButton","","pRipple","","type","button","class","mr-2 p-element p-ripple p-button p-button p-button-outlined p-button p-component p-button",3,"label","click",4,"ngIf"],["pButton","","pRipple","","type","button",1,"mr-2","p-element","p-ripple","p-button","p-button","p-button-outlined","p-button","p-component","p-button",3,"label","click"],[1,"dttable"],["normalCell",""],[3,"ngStyle"],["noprog",""],[3,"value","color"],["elspe",""],["link",""],["target","_blank",3,"title","href"],["nobadge",""],[3,"ngClass","value"],["nogen",""],["styleClass","p-button-link",3,"label","click"],["popp",""],["styleClass","p-button-link text-decoration-underline",3,"label","click"],["nodown",""],["style","\n                              color: rgb(135, 135, 250);\n                              text-decoration: underline;\n                              cursor: pointer;\n                            ",3,"click",4,"ngIf"],["width","50","height","50","style","cursor: pointer","alt","image",3,"src","click",4,"ngIf"],[2,"color","rgb(135, 135, 250)","text-decoration","underline","cursor","pointer",3,"click"],["width","50","height","50","alt","image",2,"cursor","pointer",3,"src","click"],[1,"text-xl","font-bold"],[1,"col-9",2,"padding","10px 0px 0px 0px"],[3,"value","showValue","color"],[1,"col-3",2,"padding","10px 0px 0px 0px"],["aria-label","Status",3,"value","showValue","color"],[3,"severity","value"],[1,"lg:col-6","md:col-6"],[1,"card","p-fluid",2,"padding","20px 20px 20px 20px","background-color","#e6e7ff","min-height","100%"],["thumbClass","white-scrollbars",1,"scroll-event","sddd"],["styleClass","",3,"value"],["pTemplate","content"],["pTemplate","opposite"],[1,"p-text-secondary"],[1,"flex"],[1,"col-10"],["align","alternate","styleClass","customized-timeline ",3,"value"],["pTemplate","marker"],[1,"custom-marker","shadow-2","iconstyling"],[1,"pi","pi-check"],[3,"header","subheader"],["type","button","pButton","","pRipple","","icon","pi pi-arrow-down","pTooltip","Download","title","Download File","styleClass","p-button-text",1,"p-button-text","mr-2",3,"click"],[2,"display","flex"],["type","button","pButton","","pRipple","","icon","pi pi-arrow-down","class","ml-2",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","icon","pi pi-arrow-down",1,"ml-2",3,"click"],[3,"colSpan"],[1,"p-formgrid"],[3,"history"],["header","View Image",3,"visible","modal","draggable","resizable","closable","visibleChange","onHide"],["alt","image",3,"src"],["type","button","pButton","",3,"click"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0)(1,"p-table",1,2),e.NdJ("onLazyLoad",function(r){return t.lazyload(r)}),e.YNc(3,X,6,1,"ng-template",3),e.YNc(4,oe,3,2,"ng-template",4),e.YNc(5,Re,3,3,"ng-template",5),e.YNc(6,Ue,3,1,"ng-template",6),e.qZA(),e.TgZ(7,"p-paginator",7),e.NdJ("onPageChange",function(r){return t.onPageChange(r)}),e.qZA(),e._UZ(8,"p-confirmPopup",8),e.TgZ(9,"p-dialog",9),e.NdJ("visibleChange",function(r){return t.tenderVisible=r})("onHide",function(){return t.resetform()}),e.TgZ(10,"div",10),e.YNc(11,Ie,2,0,"ng-template",4),e.TgZ(12,"div",11)(13,"div",12)(14,"div",13)(15,"h5"),e._uU(16,"Government Order"),e.qZA(),e.TgZ(17,"div",14)(18,"div",15)(19,"span"),e._uU(20,"Number: "),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"div",15)(23,"span"),e._uU(24,"Department: "),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"div",15)(27,"span"),e._uU(28,"Date: "),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"div",15)(31,"span"),e._uU(32,"Actual GO value: "),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div",15)(35,"span"),e._uU(36,"GO value: "),e.qZA(),e._uU(37),e.qZA()()()()(),e.TgZ(38,"div",11)(39,"div",12)(40,"div",13)(41,"h5"),e._uU(42,"Tender"),e.qZA(),e.TgZ(43,"div",14)(44,"div",15)(45,"span"),e._uU(46,"Work Number: "),e.qZA(),e._uU(47),e.qZA(),e.TgZ(48,"div",15)(49,"span"),e._uU(50,"Division: "),e.qZA(),e._uU(51),e.qZA(),e.TgZ(52,"div",15)(53,"span"),e._uU(54,"District: "),e.qZA(),e._uU(55),e.qZA(),e.TgZ(56,"div",15)(57,"span"),e._uU(58,"Work Published Date: "),e.qZA(),e._uU(59),e.qZA(),e.TgZ(60,"div",15)(61,"span"),e._uU(62,"Awarded Date: "),e.qZA(),e._uU(63),e.qZA(),e.TgZ(64,"div",15)(65,"span"),e._uU(66,"Work Commencement Date: "),e.qZA(),e._uU(67),e.qZA(),e.TgZ(68,"div",15)(69,"span"),e._uU(70,"Work Completion Date: "),e.qZA(),e._uU(71),e.qZA(),e.TgZ(72,"div",15)(73,"span"),e._uU(74,"Tender Opened Date: "),e.qZA(),e._uU(75),e.qZA(),e.TgZ(76,"div",15)(77,"span"),e._uU(78,"Class: "),e.qZA(),e._uU(79),e.qZA(),e.TgZ(80,"div",15)(81,"span"),e._uU(82,"Category: "),e.qZA(),e._uU(83),e.qZA(),e.TgZ(84,"div",15)(85,"span"),e._uU(86,"Main Category: "),e.qZA(),e._uU(87),e.qZA(),e.TgZ(88,"div",15)(89,"span"),e._uU(90,"Name of the work: "),e.qZA(),e._uU(91),e.qZA(),e.TgZ(92,"div",15)(93,"span"),e._uU(94,"Service Type: "),e.qZA(),e._uU(95),e.qZA(),e.TgZ(96,"div",15)(97,"span"),e._uU(98,"Category Type: "),e.qZA(),e._uU(99),e.qZA(),e.TgZ(100,"div",15)(101,"span"),e._uU(102,"Bid Type: "),e.qZA(),e._uU(103),e.qZA(),e.TgZ(104,"div",15)(105,"span"),e._uU(106,"Contractor Name: "),e.qZA(),e._uU(107),e.qZA(),e.TgZ(108,"div",15)(109,"span"),e._uU(110,"Division: "),e.qZA(),e._uU(111),e.qZA(),e.TgZ(112,"div",15)(113,"span"),e._uU(114,"District: "),e.qZA(),e._uU(115),e.qZA(),e.TgZ(116,"div",15)(117,"span"),e._uU(118,"Contractor Category: "),e.qZA(),e._uU(119),e.qZA(),e.TgZ(120,"div",15)(121,"span"),e._uU(122,"Tender Value: "),e.qZA(),e._uU(123),e.qZA(),e.TgZ(124,"div",15)(125,"span"),e._uU(126,"Awarded Value: "),e.qZA(),e._uU(127),e.qZA()()()()(),e.YNc(128,qe,38,8,"div",16),e.YNc(129,Le,33,1,"div",16),e.TgZ(130,"div",17),e.YNc(131,Oe,8,1,"div",18),e.YNc(132,Qe,10,1,"div",18),e.qZA()()(),e.TgZ(133,"p-dialog",19),e.NdJ("visibleChange",function(r){return t.bookVisible=r})("onHide",function(){return t.resetform()}),e.TgZ(134,"div",10),e.YNc(135,We,2,0,"ng-template",4),e.TgZ(136,"div",11)(137,"div",12)(138,"div",20)(139,"div",14)(140,"div",15)(141,"span"),e._uU(142,"M-Book Number: "),e.qZA(),e._uU(143),e.qZA(),e.TgZ(144,"div",15)(145,"span"),e._uU(146,"Work Number: "),e.qZA(),e._uU(147),e.qZA(),e.TgZ(148,"div",15)(149,"span"),e._uU(150,"Work Type: "),e.qZA(),e._uU(151),e.qZA(),e.TgZ(152,"div",15)(153,"span"),e._uU(154,"Sub Work Type: "),e.qZA(),e._uU(155),e.qZA(),e.TgZ(156,"div",15)(157,"span"),e._uU(158,"Strength: "),e.qZA(),e._uU(159),e.qZA(),e.TgZ(160,"div",15)(161,"span"),e._uU(162,"Code: "),e.qZA(),e._uU(163),e.qZA(),e.TgZ(164,"div",15)(165,"span"),e._uU(166,"Milestone Name: "),e.qZA(),e._uU(167),e.qZA(),e.TgZ(168,"div",15)(169,"span"),e._uU(170,"District: "),e.qZA(),e._uU(171),e.qZA(),e.TgZ(172,"div",15)(173,"span"),e._uU(174,"Division: "),e.qZA(),e._uU(175),e.qZA(),e.TgZ(176,"div",15)(177,"span"),e._uU(178,"Start Date: "),e.qZA(),e._uU(179),e.qZA(),e.TgZ(180,"div",15)(181,"span"),e._uU(182,"End Date: "),e.qZA(),e._uU(183),e.qZA(),e.TgZ(184,"div",15)(185,"span"),e._uU(186,"Planned Value: "),e.qZA(),e._uU(187),e.qZA()()()()(),e.TgZ(188,"div",21)(189,"h5"),e._uU(190,"Milestone Files"),e.qZA(),e.TgZ(191,"table",22)(192,"thead")(193,"tr")(194,"th"),e._uU(195,"S. No"),e.qZA(),e.TgZ(196,"th"),e._uU(197,"Name"),e.qZA(),e.TgZ(198,"th"),e._uU(199,"Saved by"),e.qZA(),e.TgZ(200,"th"),e._uU(201,"Saved date"),e.qZA(),e.TgZ(202,"th"),e._uU(203,"Action"),e.qZA()()(),e.TgZ(204,"tbody"),e.YNc(205,He,11,4,"tr",23),e.qZA()()(),e.TgZ(206,"form",24)(207,"fieldset",25)(208,"div",26)(209,"div",27)(210,"div",28)(211,"label",29),e._uU(212,"Date"),e.qZA(),e._UZ(213,"p-calendar",30)(214,"app-error-msg",31),e.qZA(),e.TgZ(215,"div",28)(216,"label",29),e._uU(217,"Actuals"),e.qZA(),e._UZ(218,"input",32)(219,"app-error-msg",31),e.qZA(),e.TgZ(220,"div",33)(221,"label",29),e._uU(222,"Notes"),e.qZA(),e._UZ(223,"textarea",34)(224,"app-error-msg",31),e.qZA()()(),e.TgZ(225,"div",35)(226,"div",36)(227,"h5"),e._uU(228,"Document"),e.qZA()()(),e._UZ(229,"p-confirmPopup",8),e.qZA(),e.TgZ(230,"div",37)(231,"div",38)(232,"div",12)(233,"table",39)(234,"thead")(235,"tr")(236,"th"),e._uU(237,"S.No"),e.qZA(),e.TgZ(238,"th"),e._uU(239,"File Type"),e.qZA(),e.TgZ(240,"th"),e._uU(241,"Uploaded Document Name"),e.qZA(),e.TgZ(242,"th"),e._uU(243,"Action"),e.qZA()()(),e.TgZ(244,"tbody"),e.YNc(245,Ve,9,4,"tr",23),e.YNc(246,je,3,1,"tr",40),e.qZA()()()()()(),e.YNc(247,Ge,2,0,"h5",40),e.YNc(248,Ke,4,1,"div",41),e.qZA()(),e.YNc(249,Xe,4,9,"p-dialog",42),e.qZA()),2&i){let l,r;e.xp6(1),e.Q6J("columns",t.cols)("value",t.records)("exportFilename",t.fileName+"_Report")("customSort",!0)("paginator",!1)("rows",10)("lazy",!0)("totalRecords",t.total)("loading",!1)("tableStyle",e.DdM(90,et)),e.xp6(2),e.Q6J("ngStyle",e.DdM(91,tt)),e.xp6(4),e.Q6J("showCurrentPageReport",!0)("first",t.first)("rows",t.rows)("totalRecords",t.total)("rowsPerPageOptions",t.rowsPerPageOptions),e.xp6(2),e.Akn(e.DdM(92,P)),e.Q6J("visible",t.tenderVisible)("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),e.xp6(12),e.hij(" ",t.tender&&t.tender.goNumber?t.tender.goNumber:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.goDepartment?t.tender.goDepartment:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.goDate?t.dc(t.tender.goDate):""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.goRevisedAmount?t.tender.goRevisedAmount:t.tender&&t.tender.goTotalAmount?t.tender.goTotalAmount:""," ",t.tender&&t.tender.goRevisedAmount?" ("+t.convertoWordsIND(t.tender.goRevisedAmount)+")":t.tender&&t.tender.goTotalAmount?" ("+t.convertoWordsIND(t.tender.goTotalAmount)+")":""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.goTotalAmount?t.tender.goTotalAmount:""," ",t.tender&&t.tender.goTotalAmount?" ("+t.convertoWordsIND(t.tender.goTotalAmount)+")":""," "),e.xp6(10),e.hij("",t.tender&&t.tender.tenderNumber?t.tender.tenderNumber:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.divisionName?t.tender.divisionName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.districtName?t.tender.districtName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.startDate?t.dc(t.tender.startDate):""," "),e.xp6(4),e.hij("",t.tender&&t.tender.endDate?t.dc(t.tender.endDate):""," "),e.xp6(4),e.hij(" ",t.tender&&t.tender.workCommencementDate?t.dc(t.tender.workCommencementDate):""," "),e.xp6(4),e.hij("",t.tender&&t.tender.workCompletionDate?t.dc(t.tender.workCompletionDate):""," "),e.xp6(4),e.hij(" ",t.tender&&t.tender.tenderOpenedDate?t.dc(t.tender.tenderOpenedDate):""," "),e.xp6(4),e.hij("",t.tender&&t.tender.class?t.tender.class:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.category?t.tender.category:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.mainCategory?t.tender.mainCategory:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.subcategory?t.tender.subcategory:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.service_type_main?t.tender.service_type_main:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.category_type_main?t.tender.category_type_main:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.bidType?t.tender.bidType:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorName?t.tender.contractorName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorDivision?t.tender.contractorDivision:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorDistrict?t.tender.contractorDistrict:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorCategory?t.tender.contractorCategory:""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.tenderFinalAmount?t.tender.tenderFinalAmount:t.tender&&t.tender.workValue?t.tender.workValue:"","",t.tender&&t.tender.tenderFinalAmount?" ("+t.convertoWordsIND(t.tender.tenderFinalAmount)+")":t.tender&&t.tender.workValue?" ("+t.convertoWordsIND(t.tender.workValue)+")":""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.workValue?t.tender.workValue:"","",t.tender&&t.tender.workValue?" ("+t.convertoWordsIND(t.tender.workValue)+")":""," "),e.xp6(1),e.Q6J("ngIf",t.templateWithMilestone&&t.templateWithMilestone.milestones),e.xp6(1),e.Q6J("ngIf",t.templateWithMilestone&&t.templateWithMilestone.milestones),e.xp6(2),e.Q6J("ngIf",t.activitiesevents&&t.activitiesevents.length>0),e.xp6(1),e.Q6J("ngIf",t.events&&t.events.length>0),e.xp6(1),e.Akn(e.DdM(93,P)),e.Q6J("visible",t.bookVisible)("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),e.xp6(10),e.hij("",t.mBookDetails&&t.mBookDetails.mBookNumber?t.mBookDetails.mBookNumber:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.tenderNumber?t.mBookDetails.tenderNumber:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.workType?t.mBookDetails.workType:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.subWorkType?t.mBookDetails.subWorkType:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.strength?t.mBookDetails.strength:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.milestoneCode?t.mBookDetails.milestoneCode:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.milestoneName?t.mBookDetails.milestoneName:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.districtName?t.mBookDetails.districtName:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.divisionName?t.mBookDetails.divisionName:""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.startDate?t.dc(t.mBookDetails.startDate):""," "),e.xp6(4),e.hij("",t.mBookDetails&&t.mBookDetails.endDate?t.dc(t.mBookDetails.endDate):""," "),e.xp6(4),e.AsE("",t.mBookDetails&&t.mBookDetails.milestoneAmount?t.mBookDetails.milestoneAmount:""," ",t.mBookDetails&&t.mBookDetails.milestoneAmount?" ("+t.convertoWordsIND(t.mBookDetails.milestoneAmount)+")":""," "),e.xp6(18),e.Q6J("ngForOf",t.filesList),e.xp6(1),e.Q6J("formGroup",t.mBookForm),e.xp6(1),e.Q6J("disabled",!0),e.xp6(6),e.Q6J("showIcon",!0),e.xp6(1),e.Q6J("control",t.mBookForm.get("date")),e.xp6(4),e.Q6J("maxlength",10),e.xp6(1),e.Q6J("control",t.mBookForm.get("actuals")),e.xp6(5),e.Q6J("control",t.mBookForm.get("notes")),e.xp6(21),e.Q6J("ngForOf",null==t.mBookDetails?null:t.mBookDetails.files),e.xp6(1),e.Q6J("ngIf",!(null!=t.mBookDetails&&t.mBookDetails.files)),e.xp6(1),e.Q6J("ngIf",(null==t.mBookDetails?null:t.mBookDetails.approvalHistory)&&null!==(l=null==t.mBookDetails||null==t.mBookDetails.approvalHistory?null:t.mBookDetails.approvalHistory.length)&&void 0!==l&&l),e.xp6(1),e.Q6J("ngIf",(null==t.mBookDetails?null:t.mBookDetails.approvalHistory)&&null!==(r=null==t.mBookDetails||null==t.mBookDetails.approvalHistory?null:t.mBookDetails.approvalHistory.length)&&void 0!==r&&r),e.xp6(1),e.Q6J("ngIf",t.imgDetails)}},dependencies:[c.mk,c.sg,c.O5,c.PC,p._Y,p.Fj,p.JJ,p.JL,p.nD,p.On,A.jx,g.f,I.Hq,I.zx,F.o,E.g,p.sg,p.u,O.u,Y.P,L.V,k.iA,k.lQ,k.Ei,k.fz,Q.k,W.u,H.D,$.T,V.Z,j.V,G.KC,K.N,c.rS,z.L],styles:[".boldlabel[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.boldlabelinsiderow[_ngcontent-%COMP%]{padding:10px!important}.boldlabelinsiderow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.boldlabelhiegr[_ngcontent-%COMP%]{padding:0!important}.boldlabelhiegr[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:650;font-size:13px}.sssdt[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .sssdt[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#e6e7ff;padding:10px}.stablediv[_ngcontent-%COMP%]{padding:15px;background-color:#e6e7ff;border-radius:10px}.iconstyling[_ngcontent-%COMP%]{padding:10px;border-radius:5px;background-color:#aaf}  .p-card .p-card-content{padding:.25rem 0}  .p-card .p-card-title{font-size:1 rem}  .setheight{min-height:599px;max-height:600px;overflow:auto}  .sddd{min-height:599px;max-height:600px}.control-error-msg[_ngcontent-%COMP%]{margin-top:5px;color:#e24c4c}.wd[_ngcontent-%COMP%]   .dttable[_ngcontent-%COMP%], .wd[_ngcontent-%COMP%]   .p-datatable[_ngcontent-%COMP%]{padding:5px 1rem!important}.wd[_ngcontent-%COMP%]     .p-datatable-header{padding:5px 1rem!important}.wd[_ngcontent-%COMP%]   .extradttable[_ngcontent-%COMP%]{padding:15px 1rem!important}  .p-datatable-header{display:flex}"]}),s})();function ot(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"span",16),e._uU(2),e.qZA()()),2&n){const o=s.$implicit;e.xp6(2),e.Oqu(o.text)}}const S=function(){return{width:"100%",margin:"0px 20px"}};function nt(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",4)(1,"p-multiSelect",14),e.NdJ("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.selectedStatuses=t)})("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.sttausChanged(t))}),e.YNc(2,ot,3,1,"ng-template",8),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("options",o.statusList)("ngModel",o.selectedStatuses)("showClear",!0)("ngStyle",e.DdM(4,S))}}function lt(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",4)(1,"p-dropdown",17),e.NdJ("onChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.dayschanged(t.value))})("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.selectedDays=t)}),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.DdM(4,S))("options",o.daysRange)("showClear",!0)("ngModel",o.selectedDays)}}function st(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"span",16),e._uU(2),e.qZA()()),2&n){const o=s.$implicit;e.xp6(2),e.Oqu(o.text)}}function rt(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"span",16),e._uU(2),e.qZA()()),2&n){const o=s.$implicit;e.xp6(2),e.Oqu(o.text)}}function at(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"span",16),e._uU(2),e.qZA()()),2&n){const o=s.$implicit;e.xp6(2),e.Oqu(o.text)}}function dt(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",4)(1,"p-multiSelect",18),e.NdJ("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.selecteddepartments=t)})("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.departmentChanged(t))}),e.YNc(2,at,3,1,"ng-template",8),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("options",o.departments)("ngModel",o.selecteddepartments)("ngStyle",e.DdM(4,S))("showClear",!0)}}function pt(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"span",16),e._uU(2),e.qZA()()),2&n){const o=s.$implicit;e.xp6(2),e.Oqu(o.text)}}const J=function(){return{width:"100%",margin:"0px 20px",top:"10px"}};function ct(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",4)(1,"p-multiSelect",19),e.NdJ("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.selectedscheme=t)})("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.schemechanged(t))}),e.YNc(2,pt,3,1,"ng-template",8),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("options",o.schemes)("ngModel",o.selectedscheme)("showClear",!0)("ngStyle",e.DdM(4,J))}}function mt(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"span",16),e._uU(2),e.qZA()()),2&n){const o=s.$implicit;e.xp6(2),e.Oqu(o.text)}}function _t(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",4)(1,"p-multiSelect",20),e.NdJ("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.selectedPacakges=t)})("ngModelChange",function(t){e.CHM(o);const l=e.oxw();return e.KtG(l.packagechanged(t))}),e.YNc(2,mt,3,1,"ng-template",8),e.qZA()()}if(2&n){const o=e.oxw();e.xp6(1),e.Q6J("options",o.goPackageNo)("ngModel",o.selectedPacakges)("showClear",!0)("ngStyle",e.DdM(4,J))}}const ut=function(n){return{width:"100%",margin:"0px 20px",top:n}},gt=function(){return{icon:"pi pi-home"}};let ht=(()=>{var n;class s{constructor(i,t,l,r,M,y,_){this.router=i,this.route=t,this.cdr=l,this.tenderService=r,this.reportFacade=M,this.reportsService=y,this.layoutService=_,this.selecteddivisions=[],this.dashboardQueryParams={},this.selectedStatuses=[],this.selectedDistricts=[],this.selectedPacakges=[],this.types=["GO","Tender","Milestone","M-Book"],this.selectedtype="TENDER",this.selecteddepartments=[],this.selectedYear=[(new Date).getFullYear().toString()],this.yearList=[],this.rangeDates=[],this.selectedscheme=[],this.title="Reports",this.first=0,this.rows=25,this.total=0,this.defaultSortField="startDate",this.defaultSortOrder=1,this.actions=[],this.canShowAction=!0,this.breadcrumbItems=[],this.showscheme=!0,this.daysRange=[{label:"0-20",value:"0-20"},{label:"20-80",value:"20-80"},{label:"80-1000",value:"80-1000"}],this.selectedDays=null,this.previousType="",this.colsInitialized=!1}ngOnInit(){if(this.cols=[],this.route.queryParams.subscribe(i=>{i.Type&&(this.selectedtype=i.Type),i.Year&&(this.yearList=Array.isArray(i.Year)?i.Year:[i.Year]),i.Status&&(this.selectedStatuses=Array.isArray(i.Status)?i.Status:[i.Status]),i.days&&(this.selectedDays=i.days),i.division&&(this.selecteddivisions=Array.isArray(i.division)?i.division:[i.division]),i.scheme&&(this.selectedscheme=Array.isArray(i.scheme)?i.scheme:[i.scheme]),i.district&&(this.selectedDistricts=Array.isArray(i.district)?i.district:[i.district])}),this.filterModelTender={columnSearch:null,contractor:null,contractorDistrict:null,cost:null,days:this.selectedDays??null,delay:null,districtId:null,divisionId:null,duration:null,goNumber:null,searchString:null,skip:0,sorting:{fieldName:"startDate",sort:"ASC"},workStatus:null,strength:null,subWorkTypeId:null,take:25,where:null,workTypeId:null,mainCategory:null,subcategory:null,contractorCompanyName:null,contractorMobile:null,departmentList:null,divisionList:this.selecteddivisions??null,statusList:this.selectedStatuses??null,districtList:this.selectedDistricts??null,schemeList:this.selectedscheme??null,packageList:this.selectedPacakges??null,workNumber:null,fromDate:null,toDate:null},this.yearList&&this.yearList.length>0){const i=Number(this.yearList[0]),t=Number(this.yearList[this.yearList.length-1]);!isNaN(i)&&!isNaN(t)&&(this.filterModelTender.fromDate=m(new Date(i,0,1)).format("YYYY-MM-DD"),this.filterModelTender.toDate=m(new Date(t,11,31)).format("YYYY-MM-DD"),this.rangeDates=[m(this.filterModelTender.fromDate,"YYYY-MM-DD").toDate(),m(this.filterModelTender.toDate,"YYYY-MM-DD").toDate()],this.from=this.filterModelTender.fromDate,this.to=this.filterModelTender.toDate)}else this.rangeDates=[];this.filterModelMilestone={columnSearch:null,cost:null,districtId:null,divisionId:null,searchString:null,skip:0,sorting:null,strength:null,subWorkTypeId:null,take:25,workTypeId:null,departmentList:null,divisionList:null,statusList:null,actualCost:null,approvalStatusName:null,approvalStatusId:null,fromDate:null,paymentStatusId:null,paymentStatusName:null,districtList:null,toDate:null,workId:null},this.filterModelMbook={columnSearch:null,districtId:null,divisionId:null,searchString:null,skip:0,sorting:null,strength:null,subWorkTypeId:null,take:25,workTypeId:null,departmentList:null,divisionList:null,districtList:null,statusList:null,fromDate:null,paymentStatusId:null,paymentStatusName:null,toDate:null,workId:null,actionableRoleId:null,actualAmount:null,amount:null,statusId:null,statusName:null},this.filterModel=this.filterModelTender,this.freshfilterModelTender=this.filterModelTender,this.freshfilterModelMilestone=this.filterModelMilestone,this.freshfilterModelMbook=this.filterModelMbook,this.reportFacade.getReports(this.filterModel,this.selectedtype),this.reportsService.getreportform().subscribe(i=>{this.types=i.data.types,this.divisions=i.data.divisions,this.statusList=i.data.statusList,this.departments=i.data.departments,this.dtistrictsList=i.data.districts,this.schemes=i.data.schemes,this.goPackageNo=i.data.goPackageNo},i=>{}),console.log("init",this.cols),this.cols=a.OM.map(i=>({...i})),console.log("init comp",this.cols),this.filterColumns=this.cols.filter(i=>1==i.isAnchortagforFilter),this.actions=[{icon:"pi pi-info",title:"View Details",type:"VIEW",isIcon:!0}],this.reportFacade.selectBreadCrumb$.subscribe(i=>{console.log(i),this.breadcrumbItems=[],this.reportBreadcrumbModel=i.slice().sort(t=>t.orderNumber),this.reportBreadcrumbModel.map(t=>{this.breadcrumbItems.push({label:`<h5> ${t.labelName}<span> (${t.label}1)</span></h5>`,escape:!1,queryParams:{field:t.fieldName,value:t.value}})}),this.filterbasedonBreadcrumb()}),this.reportFacade.selectReports$.subscribe(i=>{this.gridList=i.list,this.gridList=[],i.list?.forEach(t=>{this.gridList.push({...t,startDateString:this.dc(t.startDate),endDateString:this.dc(t.endDate),dateString:this.dc(t.date),WorkCommencementDate:t.workCompletionDate?this.dc(t.workCommencementDate):"",WorkCompletionDate:t.workCompletionDate?this.dc(t.workCompletionDate):""})}),this.total=i.totalRecords,(!this.colsInitialized||this.previousType!==this.selectedtype)&&("TENDER"==this.selectedtype?this.cols=a.OM.map(t=>({...t})):"MILESTONE"==this.selectedtype?this.cols=a.Ew.map(t=>({...t})):"GO"==this.selectedtype?this.cols=a.Ve.map(t=>({...t})):(this.cols=a.dA.map(t=>({...t})),this.showscheme=!1),this.colsInitialized=!0,this.previousType=this.selectedtype),this.reportBreadcrumbModel?.forEach(t=>{const l=this.cols.find(r=>r.field===t.fieldName);l&&(l.isAnchortagforFilter=!1)})})}ngOnChanges(){this.filtermodel={districtList:null,divisionList:null,fromDate:null,selectionType:this.selectedtype,searchString:null,skip:0,sorting:{fieldName:"startDate",sort:"ASC"},toDate:null,take:5,where:null,workType:null,year:null,columnSearch:null}}filterbasedonBreadcrumb(){var i=this.getFilterBasedonType();this.filterModel={...this.filterModel,...i,divisionList:this.selecteddivisions??[],districtList:this.selectedDistricts??[],schemeList:this.selectedscheme??[],departmentList:this.selecteddepartments??[],statusList:this.selectedStatuses??[],packageList:this.selectedPacakges??[],days:this.selectedDays??null},this.reportFacade.getReports(this.filterModel,this.selectedtype)}getFilterBasedonType(){return"TENDER"==this.selectedtype?{goNumber:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.goNumber)?.value??null,contractorDistrict:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.contractorDistrict)?.value??null,contractor:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.contractorName)?.value??null,cost:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.workValue)?.value??null,districtId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.districtName)?.value??null,divisionId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.divisionName)?.value??null,duration:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.workDurationInDays)?.value??null,subWorkTypeId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.subWorkType)?.value??null,searchString:null,skip:0,sorting:{fieldName:"startDate",sort:"ASC"},take:25,workTypeId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.workType)?.value??null,columnSearch:null,delay:null,mainCategory:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.mainCategory)?.value??null,subcategory:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.subcategory)?.value??null,workStatus:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.workStatusName)?.value??null,strength:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.strength)?.value??null,where:null,contractorCompanyName:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.contractorCompanyName)?.value??null,contractorMobile:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.contractorMobile)?.value??null,departmentList:this.selecteddepartments,divisionList:this.selecteddivisions,statusList:this.selectedStatuses,districtList:this.selectedDistricts,schemeList:this.selectedscheme,packageList:this.selectedPacakges,workNumber:this.reportBreadcrumbModel.find(t=>t.fieldName==a.t3.workNumber)?.value??null,fromDate:this.from,toDate:this.to,days:null}:"MILESTONE"==this.selectedtype?{columnSearch:null,cost:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.cost)?.value??null,districtId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.districtName)?.value??null,divisionId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.divisionName)?.value??null,searchString:null,skip:0,sorting:null,strength:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.strength)?.value??null,subWorkTypeId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.subWorkType)?.value??null,take:25,workTypeId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.workType)?.value??null,departmentList:this.selecteddepartments,divisionList:this.selecteddivisions,statusList:this.selectedStatuses,districtList:this.selectedDistricts,actualCost:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.actualCost)?.value??null,approvalStatusName:null,approvalStatusId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.approvalStatusName)?.value??null,fromDate:this.from,paymentStatusId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.paymentStatusName)?.value??null,paymentStatusName:null,toDate:this.to,workId:null}:"GO"==this.selectedtype?{columnSearch:null,districtId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.districtName)?.value??null,divisionId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.NC.divisionName)?.value??null,searchString:null,skip:0,sorting:null,take:25,departmentList:this.selecteddepartments,fromDate:this.from,toDate:this.to,where:null,divisionList:null,statusList:null}:{columnSearch:null,districtId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.districtName)?.value??null,divisionId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.divisionName)?.value??null,searchString:null,skip:0,sorting:null,strength:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.strength)?.value??null,subWorkTypeId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.subWorkType)?.value??null,take:25,workTypeId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.workType)?.value??null,departmentList:this.selecteddepartments,divisionList:this.selecteddivisions,statusList:this.selectedStatuses,districtList:this.selectedDistricts,fromDate:this.from,paymentStatusId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.paymentStatusName)?.value??null,paymentStatusName:null,toDate:this.to,workId:null,actionableRoleId:null,actualAmount:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.actualAmount)?.value??null,amount:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.milestoneAmount)?.value??null,statusId:this.reportBreadcrumbModel.find(t=>t.fieldName==a.a2.statusName)?.value??null,statusName:null}}changecolFilter(i){console.log("cols:",this.cols);var t=this.reportBreadcrumbModel.length,l=[];this.cols.map(r=>{if(r.field==i.type.field){l=[...l,{...r,isAnchortagforFilter:!1}],r.isAnchortagforFilter=!1;var M=i.type.field,y=i.record[M],_=this.getfieldname(i,M);this.reportFacade.saveBreadcrumbs([...this.reportBreadcrumbModel,{fieldName:i.type.field,label:i.type.header,labelName:y,orderNumber:t+1,value:_}])}else l=[...l,{...r}]}),this.cols=l,console.log("cols compss:",this.cols)}getfieldname(i,t){return"TENDER"==this.selectedtype?i.record[a.MQ.find(l=>l.fieldName==t)?.fieldNameId??""]:"MILESTONE"==this.selectedtype?i.record[a.pt.find(l=>l.fieldName==t)?.fieldNameId??""]:i.record[a.Fv.find(l=>l.fieldName==t)?.fieldNameId??""]}onbreadCrumbClick(i){var t=[];if(i?.item?.queryParams){var l=(i?.item?.queryParams).field,r=this.reportBreadcrumbModel.find(y=>y.fieldName==l)?.orderNumber??0,M=0;this.reportBreadcrumbModel.map(y=>{var _=this.cols;r>=y.orderNumber?(M+=1,_.map(h=>{h.field==y.fieldName&&(h.isAnchortagforFilter=!1)}),t.push({...y,orderNumber:M})):_.map(h=>{h.field==y.fieldName&&(h.isAnchortagforFilter=!0)}),this.cols=_})}else this.reportBreadcrumbModel.map(y=>{var _=this.cols;_.map(h=>{h.field==y.fieldName&&(h.isAnchortagforFilter=!0)}),this.cols=_});console.log("onckij",this.cols),this.reportFacade.saveBreadcrumbs([...t])}resetflag(){}divisionChanged(i){this.filterModel={...this.filterModel,divisionList:i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}sttausChanged(i){this.filterModel={...this.filterModel,statusList:i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}districtChanged(i){this.filterModel={...this.filterModel,districtList:i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}departmentChanged(i){this.filterModel={...this.filterModel,departmentList:i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}schemechanged(i){this.filterModel={...this.filterModel,schemeList:i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}packagechanged(i){this.filterModel={...this.filterModel,packageList:i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}changeyear(i){if(i&&i[0]&&i[1]){const t=m(i[0]).format("YYYY-MM-DD"),l=m(i[1]).format("YYYY-MM-DD");this.filterModel={...this.filterModel,fromDate:t,toDate:l},this.from=t,this.to=l,this.reportFacade.getReports(this.filterModel,this.selectedtype)}else this.filterModel={...this.filterModel,fromDate:null,toDate:null},this.from=null,this.to=null,this.reportFacade.getReports(this.filterModel,this.selectedtype)}changefilter(i){this.filterModel={...this.filterModel,...i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}typeChanged(i){this.selectedtype=i,"TENDER"==i?(this.filterModel={...this.freshfilterModelTender,departmentList:this.selecteddepartments,divisionList:this.selecteddivisions,statusList:this.selectedStatuses,districtList:this.selectedDistricts,fromDate:this.from,toDate:this.to},this.showscheme=!0):"MILESTONE"==i||"GO"==i?(this.filterModel={...this.freshfilterModelMilestone,departmentList:this.selecteddepartments,divisionList:this.selecteddivisions,statusList:this.selectedStatuses,districtList:this.selectedDistricts,fromDate:this.from,toDate:this.to},this.showscheme=!1):(this.filterModel={...this.freshfilterModelMbook,departmentList:this.selecteddepartments,divisionList:this.selecteddivisions,statusList:this.selectedStatuses,districtList:this.selectedDistricts,fromDate:this.from,toDate:this.to},this.showscheme=!1),this.reportFacade.saveBreadcrumbs([]),this.reportFacade.getReports(this.filterModel,i)}ngOnDestroy(){this.reportFacade.reset()}dc(i){return(0,a.ql)(i)}dcwt(i){return(0,a.gv)(i)}dayschanged(i){this.filterModel={...this.filterModel,days:i},this.reportFacade.getReports(this.filterModel,this.selectedtype)}}return(n=s).\u0275fac=function(i){return new(i||n)(e.Y36(b.F0),e.Y36(b.gz),e.Y36(e.sBO),e.Y36(w.$),e.Y36(u.H),e.Y36(f.F),e.Y36(D.P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-report-mainfilters"]],features:[e.TTD],decls:24,vars:40,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,"col-12","md:col-6","lg:col-12"],[1,"col-12",2,"display","flex","flex-wrap","wrap"],[1,"col-2","md:col-3","lg:col-2"],["ngClass","dd","placeholder","Select a Type","optionLabel","text","optionValue","value",3,"ngStyle","options","ngModel","ngModelChange"],["class","col-2 md:col-3 lg:col-2",4,"ngIf"],["placeholder","Select a Division","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","showClear","ngStyle","ngModelChange"],["pTemplate","item"],["placeholder","Select a District","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","showClear","ngStyle","ngModelChange"],["selectionMode","range","placeholder","Select from - to Date","view","month","dateFormat","mm/yy",3,"ngModel","ngStyle","showClear","readonlyInput","ngModelChange"],[2,"margin-top","10px"],[3,"model","home","onItemClick"],["fileName","Report",3,"actions","canShowAction","cols","filterModel","defaultSortField","filterColumns","defaultSortOrder","rows","total","records","changecolFilter","changefilter"],["placeholder","Select a Status","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","showClear","ngStyle","ngModelChange"],[1,"flex","align-items-center"],[1,"ml-2"],["ngClass","dd","placeholder","Select delay in days","optionLabel","label","optionValue","value",3,"ngStyle","options","showClear","ngModel","onChange","ngModelChange"],["placeholder","Select a Department","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","ngStyle","showClear","ngModelChange"],["placeholder","Select a Scheme","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","showClear","ngStyle","ngModelChange"],["placeholder","Select Package","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","showClear","ngStyle","ngModelChange"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"p-dropdown",5),e.NdJ("ngModelChange",function(r){return t.typeChanged(r)})("ngModelChange",function(r){return t.selectedtype=r}),e.qZA()(),e.YNc(8,nt,3,5,"div",6),e.YNc(9,lt,2,5,"div",6),e.TgZ(10,"div",4)(11,"p-multiSelect",7),e.NdJ("ngModelChange",function(r){return t.selecteddivisions=r})("ngModelChange",function(r){return t.divisionChanged(r)}),e.YNc(12,st,3,1,"ng-template",8),e.qZA()(),e.TgZ(13,"div",4)(14,"p-multiSelect",9),e.NdJ("ngModelChange",function(r){return t.selectedDistricts=r})("ngModelChange",function(r){return t.districtChanged(r)}),e.YNc(15,rt,3,1,"ng-template",8),e.qZA()(),e.YNc(16,dt,3,5,"div",6),e.YNc(17,ct,3,5,"div",6),e.YNc(18,_t,3,5,"div",6),e.TgZ(19,"div",4)(20,"p-calendar",10),e.NdJ("ngModelChange",function(r){return t.rangeDates=r})("ngModelChange",function(r){return t.changeyear(r)}),e.qZA()()()(),e.TgZ(21,"div",11)(22,"p-breadcrumb",12),e.NdJ("onItemClick",function(r){return t.onbreadCrumbClick(r)}),e.qZA()(),e.TgZ(23,"app-report-milestone",13),e.NdJ("changecolFilter",function(r){return t.changecolFilter(r)})("changefilter",function(r){return t.changefilter(r)}),e.qZA()()),2&i&&(e.xp6(4),e.Oqu(t.title),e.xp6(3),e.Q6J("ngStyle",e.DdM(34,S))("options",t.types)("ngModel",t.selectedtype),e.xp6(1),e.Q6J("ngIf","GO"!=t.selectedtype),e.xp6(1),e.Q6J("ngIf",t.showscheme),e.xp6(2),e.Q6J("options",t.divisions)("ngModel",t.selecteddivisions)("showClear",!0)("ngStyle",e.DdM(35,S)),e.xp6(3),e.Q6J("options",t.dtistrictsList)("ngModel",t.selectedDistricts)("showClear",!0)("ngStyle",e.DdM(36,S)),e.xp6(2),e.Q6J("ngIf",t.showscheme),e.xp6(1),e.Q6J("ngIf",t.showscheme),e.xp6(1),e.Q6J("ngIf",t.showscheme),e.xp6(2),e.Q6J("ngModel",t.rangeDates)("ngStyle",e.VKq(37,ut,"TENDER"==t.selectedtype?"10px":null))("showClear",!0)("readonlyInput",!0),e.xp6(2),e.Q6J("model",t.breadcrumbItems)("home",e.DdM(39,gt)),e.xp6(1),e.Q6J("actions",t.actions)("canShowAction",t.canShowAction)("cols",t.cols)("canShowAction",!1)("filterModel",t.tableFilterModel)("defaultSortField",t.defaultSortField)("filterColumns",t.filterColumns)("defaultSortOrder",t.defaultSortOrder)("rows",25)("total",t.total)("records",t.gridList))},dependencies:[c.mk,c.O5,c.PC,p.JJ,p.On,A.jx,g.f,C.Lt,x.NU,v.a,it],styles:[".dd>.p-multiselect{width:100%}  .dd>.p-dropdown{width:100%}"]}),s})()},84478:(R,T,d)=>{d.d(T,{IR:()=>e,JY:()=>u,Ox:()=>w,SD:()=>b,ZD:()=>f,_8:()=>m,dO:()=>D,mc:()=>c});var a=d(84221);const m=(0,a.PH)("[Reports] Get Reports",(0,a.Ky)()),e=(0,a.PH)("[Reports] Get Reports Milestone",(0,a.Ky)()),b=(0,a.PH)("[Reports] Get Reports GO",(0,a.Ky)()),w=(0,a.PH)("[Reports] Get Reports Mbook",(0,a.Ky)()),u=(0,a.PH)("[Reports] Get Reports Success",(0,a.Ky)()),f=(0,a.PH)("[Reports] Get Breadcrumbs"),D=(0,a.PH)("[Reports] Save Breadcrumb",(0,a.Ky)()),c=(0,a.PH)("[Reports] s Reset")},57853:(R,T,d)=>{d.d(T,{H:()=>D});var a=d(84221),m=d(27909);const e=(0,a.ZF)(m.WX),b=(0,a.P1)(e,c=>({list:c.list,totalRecords:c.recordCount})),w=(0,a.P1)(e,c=>c.breadcrumbs);var u=d(84478),f=d(65879);let D=(()=>{var c;class p{constructor(g){this.store=g,this.selectReports$=this.store.select(b),this.selectBreadCrumb$=this.store.select(w)}getReports(g,C){this.store.dispatch("TENDER"==C?u._8({model:g,selectedType:C}):"MILESTONE"==C?u.IR({model:g}):"GO"==C?u.SD({model:g}):u.Ox({model:g}))}getbreadcrumbsList(){this.store.dispatch(u.ZD())}saveBreadcrumbs(g){this.store.dispatch(u.dO({breadcrumb:g}))}reset(){this.store.dispatch(u.mc())}}return(c=p).\u0275fac=function(g){return new(g||c)(f.LFG(a.yh))},c.\u0275prov=f.Yz7({token:c,factory:c.\u0275fac}),p})()},27909:(R,T,d)=>{d.d(T,{WX:()=>e,wU:()=>w});var a=d(84221),m=d(84478);const e="ReportState",w=(0,a.Lq)({list:[],recordCount:0,breadcrumbs:[]},(0,a.on)(m.JY,(u,{list:f})=>({...u,list:f.data,recordCount:f.totalRecordCount})),(0,a.on)(m.dO,(u,{breadcrumb:f})=>({...u,breadcrumbs:f})),(0,a.on)(m.mc,u=>({...u,list:[],recordCount:0,breadcrumbs:[]})))},65031:(R,T,d)=>{d.d(T,{F:()=>u});var a=d(20553),m=d(21525),e=d(65879),b=d(18068),w=d(69862);let u=(()=>{var f;class D{constructor(p,A){this.router=p,this.http=A}getreports(p){return this.http.post(`${a.N.apiUrl}/Report/Work_Get`,p,m.c)}getMilesonereports(p){return this.http.post(`${a.N.apiUrl}/Report/Milestone_Get`,p,m.c)}getGoreports(p){return this.http.post(`${a.N.apiUrl}/Report/GO_Get`,p,m.c)}getMbookreports(p){return this.http.post(`${a.N.apiUrl}/Report/MBook_Get`,p,m.c)}getreportform(){return this.http.get(`${a.N.apiUrl}/Report/Alert_Filter_Form`,m.c)}}return(f=D).\u0275fac=function(p){return new(p||f)(e.LFG(b.F0),e.LFG(w.eN))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),D})()},67338:(R,T,d)=>{d.d(T,{_:()=>A});var a=d(86656),m=d(96814),e=d(65879);let A=(()=>{var g;class C{}return g=C,(0,a.Z)(C,"\u0275fac",function(v){return new(v||g)}),(0,a.Z)(C,"\u0275mod",e.oAB({type:g})),(0,a.Z)(C,"\u0275inj",e.cJS({imports:[m.ez]})),C})()}}]);