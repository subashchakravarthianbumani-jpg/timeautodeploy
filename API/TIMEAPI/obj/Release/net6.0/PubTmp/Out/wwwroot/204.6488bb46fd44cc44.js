"use strict";(self.webpackChunkUI_Base=self.webpackChunkUI_Base||[]).push([[204],{49204:(ci,B,d)=>{d.r(B),d.d(B,{TendersModule:()=>pi});var _=d(96814),b=d(18068),e=d(65879);let Se=(()=>{var i;class n{}return(i=n).\u0275fac=function(r){return new(r||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tenders"]],decls:1,vars:0,template:function(r,o){1&r&&e._UZ(0,"router-outlet")},dependencies:[b.lC]}),n})();var K=d(15861),P=d(97582),y=d(85219),$=d(20553),f=d(31290),g=d(78791),v=d(85571),l=d(84221);const z=(0,l.PH)("[Tender] Get Work List",(0,l.Ky)()),X=(0,l.PH)("[Tender] Get Work List Success",(0,l.Ky)()),V=(0,l.PH)("[Tender] Get Work By ID",(0,l.Ky)()),ee=(0,l.PH)("[Tender] Get Work By ID Success",(0,l.Ky)()),te=(0,l.PH)("[Tender] Get Template List",(0,l.Ky)()),ne=(0,l.PH)("[Tender] Get Template List Success",(0,l.Ky)()),ie=(0,l.PH)("[Tender] Get Template With Milestone List",(0,l.Ky)()),oe=(0,l.PH)("[Tender] Get Template With Milestone List Success",(0,l.Ky)()),re=(0,l.PH)("[Tender]  Save Template ",(0,l.Ky)()),se=(0,l.PH)("[Tender] Save Template Success",(0,l.Ky)()),ae=(0,l.PH)("[Tender] Save Template Status"),le=(0,l.PH)("[Tender]  Save Template Milestone",(0,l.Ky)()),de=(0,l.PH)("[Tender] Save Template Milestone Success",(0,l.Ky)()),pe=(0,l.PH)("[Tender] Save Template Milestone Status"),Ne=(0,l.PH)("[Tender] Get Work Template With Milestone List",(0,l.Ky)()),G=((0,l.PH)("[Tender] Get Work Template With Milestone List Success",(0,l.Ky)()),(0,l.PH)("[Tender] Get Work Template ",(0,l.Ky)())),ce=(0,l.PH)("[Tender] Get Work Template  Success",(0,l.Ky)()),ue=(0,l.PH)("[Tender] Get division List"),me=(0,l.PH)("[Tender] Get division List Success",(0,l.Ky)()),ge=(0,l.PH)("[Tender] Save Percentage",(0,l.Ky)()),_e=(0,l.PH)("[Tender] Save Percentage Success",(0,l.Ky)()),he=(0,l.PH)("[Tender] Update Save Percentage Status"),fe=(0,l.PH)("[Tender] s Reset"),ve="TenderState",De=(0,l.Lq)({tenders:[],totalRecordCount:0,tender:null,Templates:[],saveStatus:null,milestoneSaveStatus:null,TemplateWithMilestones:null,WorkTemplate:null,WorkTemplateWithMilestones:null,Divisions:[],savePercenategStatus:null},(0,l.on)(X,(i,{tenders:n})=>({...i,tenders:n.data,totalRecordCount:n.totalRecordCount})),(0,l.on)(V,(i,{})=>({...i,tender:null})),(0,l.on)(ee,(i,{tender:n})=>({...i,tender:n})),(0,l.on)(ne,(i,{templates:n})=>({...i,Templates:n})),(0,l.on)(oe,(i,{templates:n})=>({...i,TemplateWithMilestones:n})),(0,l.on)(se,(i,{template:n})=>({...i,saveStatus:{Status:n.status,message:n.message,id:n?.data?.id}})),(0,l.on)(ae,i=>({...i,saveStatus:null})),(0,l.on)(de,(i,{milestone:n})=>({...i,milestoneSaveStatus:{Status:n.status,message:n.message,id:n?.data?.id}})),(0,l.on)(pe,i=>({...i,milestoneSaveStatus:null})),(0,l.on)(G,i=>({...i,WorkTemplate:null,TemplateWithMilestones:null})),(0,l.on)(ce,(i,{template:n})=>({...i,WorkTemplate:n})),(0,l.on)(me,(i,{divisions:n})=>({...i,Divisions:n})),(0,l.on)(_e,(i,{response:n})=>({...i,savePercenategStatus:{Status:n.status,message:n.message,id:n.data.id}})),(0,l.on)(he,i=>({...i,savePercenategStatus:null})),(0,l.on)(fe,i=>({...i,tenders:[],totalRecordCount:0,tender:null,Templates:[],saveStatus:null,milestoneSaveStatus:null,TemplateWithMilestones:null,WorkTemplate:null,WorkTemplateWithMilestones:null,Divisions:[],savePercenategStatus:null}))),Z=(0,l.ZF)(ve),We=(0,l.P1)(Z,i=>({tenders:i.tenders,totalRecords:i.totalRecordCount})),Pe=(0,l.P1)(Z,i=>i.tender),Fe=(0,l.P1)(Z,i=>i.Templates),Ee=(0,l.P1)(Z,i=>i.TemplateWithMilestones),Je=(0,l.P1)(Z,i=>i.saveStatus),Oe=(0,l.P1)(Z,i=>i.milestoneSaveStatus),Ve=(0,l.P1)(Z,i=>i.savePercenategStatus),Ge=(0,l.P1)(Z,i=>i.WorkTemplate),Le=(0,l.P1)(Z,i=>i.WorkTemplateWithMilestones),Qe=(0,l.P1)(Z,i=>i.Divisions);let D=(()=>{var i;class n{constructor(r){this.store=r,this.selectTenders$=this.store.select(We),this.selectTender$=this.store.select(Pe),this.selectTemplates$=this.store.select(Fe),this.selectTemplateWithMilestones$=this.store.select(Ee),this.selectSaveStatus$=this.store.select(Je),this.selectWorkTemplate$=this.store.select(Ge),this.selecttWorkTemplateWithMilestones$=this.store.select(Le),this.selectmilestoneSaveStatus$=this.store.select(Oe),this.selectsavePercenategStatus$=this.store.select(Ve),this.selectDivisions$=this.store.select(Qe)}getTenders(r){this.store.dispatch(z({filterRequest:r}))}getTenderById(r){this.store.dispatch(V({id:r}))}getTemplates(r,o,s,p,c){this.store.dispatch(te({isActive:r,subcategory:o,mainCategory:s,serviceType:p,categoryType:c}))}templateWithMilestoneListGet(r,o=!0,s=!0,p){this.store.dispatch(ie({IsActive_template:s,IsActive_milestone:o,Id:r,WorkTypeId:p}))}updatesaveStatus(){this.store.dispatch(ae())}saveTemplates(r,o){this.store.dispatch(re({id:r,TemplateID:o}))}updatemilestonessaveStatus(){this.store.dispatch(pe())}savemilestones(r){this.store.dispatch(le({milestone:r}))}getWorktemplate(r){this.store.dispatch(G({WorkId:r}))}WorktemplateWithMilestoneListGet(r="",o,s,p){this.store.dispatch(Ne({IsActive:o,Id:r,WorkTemplateId:s,WorkId:p}))}divisionListGet(){this.store.dispatch(ue())}updatesavePercentageStatus(){this.store.dispatch(he())}savePercentage(r){this.store.dispatch(ge({model:r}))}reset(){this.store.dispatch(fe())}}return(i=n).\u0275fac=function(r){return new(r||i)(e.LFG(l.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),n})();var I,F=d(80290),Te=d(99907),be=d(69862),a=d(56223),W=d(40707),Re=d(38057),L=d(63722),Ze=d(33259),E=d(38253);function Ye(i,n){if(1&i&&(e.TgZ(0,"div",17)(1,"a",29),e._UZ(2,"button",30),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("href",t.tender.workorder,e.LSH)}}function He(i,n){if(1&i&&(e.TgZ(0,"div",17)(1,"a",29),e._UZ(2,"button",31),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("href",t.tender.negotiation_signed_doc,e.LSH)}}function je(i,n){if(1&i&&(e.TgZ(0,"div",17)(1,"a",29),e._UZ(2,"button",32),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("href",t.tender.others_doc,e.LSH)}}function Be(i,n){if(1&i&&(e.TgZ(0,"div")(1,"h5"),e._uU(2,"Uploaded documents from Tender"),e.qZA(),e.YNc(3,Ye,3,1,"div",28),e.YNc(4,He,3,1,"div",28),e.YNc(5,je,3,1,"div",28),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.tender&&t.tender.workorder&&"not upload"!=t.tender.workorder.toLocaleLowerCase()),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.negotiation_signed_doc&&"not upload"!=t.tender.negotiation_signed_doc.toLocaleLowerCase()),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.others_doc&&"not upload"!=t.tender.others_doc.toLocaleLowerCase())}}function Ke(i,n){1&i&&e._UZ(0,"button",33)}function $e(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.download(o.tender.letterOfAcceptanceId,"LetterOfAcceptance"))}),e.qZA()}}function ze(i,n){1&i&&e._UZ(0,"button",33)}function Xe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.download(o.tender.agreementCopyId,"AgreementCopy"))}),e.qZA()}}function et(i,n){1&i&&e._UZ(0,"button",33)}function tt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.download(o.tender.otherFileId,"Other"))}),e.qZA()}}function nt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",35)(1,"p-checkbox",36),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.isVerified=o)})("onChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.verify())}),e.qZA(),e.TgZ(2,"label",37),e._uU(3,"I have verified the above tender award and its related documents"),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.isVerified)("binary",!0)}}function it(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1," The above tender award and its related documents have been verified "),e.qZA())}function ot(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.next())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.tender)("disabled",t.requiresVerification&&!t.tender.isVerified)}}const rt=function(){return{float:"right"}},Q=function(){return{width:"80%"}};let R=((I=class{constructor(n,t,r,o,s,p,c,u){this.tenderFacade=n,this.messageService=t,this.router=r,this.route=o,this._location=s,this.tenderService=p,this.generalService=c,this.http=u,this.isVerified=!1,this.privlegess=f.UR,this.title="Manage Work",this.LetterOfAcceptancefiles=[],this.WorkOrderfiles=[],this.Otherfiles=[],this.AgreementCopyfiles=[]}back(){this._location.back()}ngOnDestroy(){this.routeSub.unsubscribe(),this.tenderFacade.reset()}ngOnInit(){this.tenderFacade.selectTender$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.tender=n)}),this.routeSub=this.route.params.pipe((0,g.t)(this)).subscribe(n=>{this.id=n.id,this.tenderFacade.getTenderById(this.id)})}onUpload(n){}clear(){}onSend(n,t){if(n.files&&n.files.length>0){const r=new FormData;r.append("file",n.files[0]),r.append("type",t),r.append("workId",this.tender.id),this.http.post(`${$.N.apiUrl}/Work/Work_UploadFile`,r).subscribe(o=>{"LetterOfAcceptance"===t?this.LetterOfAcceptancefiles=[]:"AgreementCopy"===t?this.AgreementCopyfiles=[]:"Other"===t&&(this.Otherfiles=[]),this.tenderFacade.getTenderById(this.id),this.messageService.add({severity:"success",summary:"Success",detail:"Uploaded Successfully"})},o=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to Upload! Please try again"})})}}download(n,t){const r=this.tender.files?.find(o=>o.type===t);this.generalService.downloads(n,r?.originalFileName??"File.png")}downloaddoc(n,t){this.generalService.DocumentsDownload(n).subscribe(function(){var r=(0,K.Z)(function*(o){let s=o;const p=new Blob([s.body],{type:s.body?.type});if(""!=p.type){const c=document.createElement("a");c.setAttribute("style","display:none;"),document.body.appendChild(c),c.download=t,c.href=URL.createObjectURL(p),c.target="_blank",c.click(),document.body.removeChild(c)}});return function(o){return r.apply(this,arguments)}}())}get requiresVerification(){return!!(this.tender?.agreementCopyId||this.tender?.letterOfAcceptanceId||this.tender?.otherFileId)}dc(n){return(0,f.ql)(n)}resetform(){this._location.back()}next(){this.router.navigate(["tender/milestone-preparation",this.tender.tenderId])}convertoWordsIND(n){return(0,f.i7)(n)}verify(){this.tenderService.IstenderVerified(this.tender.tenderId).subscribe(n=>{!n||n.status!=v.cH&&n.status!=v.nQ?n&&(this.messageService.add({severity:"success",summary:"Success",detail:n?.message}),this.tenderFacade.getTenderById(this.id)):this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:n.message})})}}).\u0275fac=function(n){return new(n||I)(e.Y36(D),e.Y36(y.ez),e.Y36(b.F0),e.Y36(b.gz),e.Y36(_.Ye),e.Y36(F.$),e.Y36(Te.m),e.Y36(be.eN))},I.\u0275cmp=e.Xpm({type:I,selectors:[["app-gnrte-work-id"]],features:[e._Bn([y.ez])],decls:111,vars:48,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between"],[1,"col"],["pButton","","pRipple","","label","Back","icon","pi pi-arrow-left",1,"p-button-secondary",3,"click"],[1,"grid","formgrid","mb-3",2,"padding-bottom","10px","margin-top","10px"],[2,"display","flex","flex-wrap","wrap"],[1,"lg:col-6","md:col-12","sm:col-12"],[1,"p-fluid"],[1,"p-formgrid","grid",2,"margin-left","0px"],[1,"col-12","row","mb-4","indi-card"],[1,"lg:col-8","md:col-8","sm:col-12","boldlabelhiegr"],[1,"lg:col-4","md:col-4","sm:col-12","boldlabelhiegr"],[1,"lg:col-6","md:col-6","sm:col-12","boldlabelinsiderow"],[1,"lg:col-6","md:col-12","sm:col-12",2,"padding","25px 10px"],[2,"margin-bottom","20px"],[1,"p-formgrid"],[4,"ngIf"],[1,"field",2,"display","flex"],["mode","basic","chooseLabel","Choose Work Award / Choose Letter of Acceptance (Optional)","tooltipPosition","left","pTooltip","Work Award / Choose Letter of Acceptance","accept","image/*, .doc,.docx,.xml,application/msword, .pdf, .xls, .xlsx",3,"ngStyle","customUpload","files","auto","maxFileSize","uploadHandler"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle","class","p-button-rounded  p-button-success ml-2",4,"ngIf"],["pButton","","pRipple","","icon","pi pi-arrow-down","class","ml-2",3,"click",4,"ngIf"],["mode","basic","chooseLabel","Choose Aggreement Copy (Optional)","pTooltip","Signed Agreement Copy","tooltipPosition","left","accept","image/*, .doc,.docx,.xml,application/msword, .pdf, .xls, .xlsx",3,"ngStyle","customUpload","files","auto","maxFileSize","uploadHandler"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle","class","p-button-rounded   p-button-success ml-2",4,"ngIf"],["mode","basic","chooseLabel","Others (Optional)","tooltipPosition","left","pTooltip","Other Document(s)","accept","image/*, .doc,.docx,.xml,application/msword, .pdf, .xls, .xlsx",3,"ngStyle","customUpload","files","auto","maxFileSize","uploadHandler"],["class","field",4,"ngIf"],[1,"col-12",2,"justify-content","end","display","flex"],["pButton","","type","button","style","margin-right: 10px;","label","Next",3,"disabled","click",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Cancel",1,"p-button-secondary",3,"click"],["class","field","style","display: flex;",4,"ngIf"],["target","_blank",3,"href"],["pButton","","type","button","icon","pi pi-arrow-down","iconPos","right","label","Work Award / Choose Letter of Acceptance",1,"p-button-success"],["pButton","","type","button","icon","pi pi-arrow-down","iconPos","right","label","Aggrement copy",1,"p-button-success"],["pButton","","type","button","icon","pi pi-arrow-down","iconPos","right","label","Other",1,"p-button-success"],["pButton","","pRipple","","type","button","icon","pi pi-check-circle",1,"p-button-rounded","p-button-success","ml-2"],["pButton","","pRipple","","icon","pi pi-arrow-down",1,"ml-2",3,"click"],[1,"field"],["id","rememberme1","styleClass","mr-2",3,"ngModel","binary","ngModelChange","onChange"],["for","rememberme1"],["pButton","","type","button","label","Next",2,"margin-right","10px",3,"disabled","click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return t.back()}),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"span"),e._uU(15),e.qZA()(),e.TgZ(16,"div",11)(17,"span"),e._uU(18),e.qZA()()(),e.TgZ(19,"div",9)(20,"div",12)(21,"span"),e._uU(22,"Work Type:"),e.qZA(),e._uU(23),e.qZA(),e.TgZ(24,"div",12)(25,"span"),e._uU(26,"Work Sub Type: "),e.qZA(),e._uU(27),e.qZA(),e.TgZ(28,"div",12)(29,"span"),e._uU(30,"Strength: "),e.qZA(),e._uU(31),e.qZA(),e.TgZ(32,"div",12)(33,"span"),e._uU(34,"Division: "),e.qZA(),e._uU(35),e.qZA(),e.TgZ(36,"div",12)(37,"span"),e._uU(38,"District: "),e.qZA(),e._uU(39),e.qZA(),e.TgZ(40,"div",12)(41,"span"),e._uU(42,"GO Number: "),e.qZA(),e._uU(43),e.qZA()(),e.TgZ(44,"div",9)(45,"div",12)(46,"span"),e._uU(47,"Work Published date: "),e.qZA(),e._uU(48),e.qZA(),e.TgZ(49,"div",12)(50,"span"),e._uU(51,"Awarded Date: "),e.qZA(),e._uU(52),e.qZA(),e.TgZ(53,"div",12)(54,"span"),e._uU(55,"Completion Date: "),e.qZA()()(),e.TgZ(56,"div",9)(57,"div",12)(58,"span"),e._uU(59,"Awarded Value: "),e.qZA(),e._uU(60),e.qZA(),e.TgZ(61,"div",12)(62,"span"),e._uU(63,"Work EMD Value: "),e.qZA()(),e.TgZ(64,"div",12)(65,"span"),e._uU(66,"Work ASD Value: "),e.qZA()()(),e.TgZ(67,"div",9)(68,"div",12)(69,"span"),e._uU(70,"Contractor: "),e.qZA(),e._uU(71),e.qZA(),e.TgZ(72,"div",12)(73,"span"),e._uU(74,"Contractor District: "),e.qZA(),e._uU(75),e.qZA(),e.TgZ(76,"div",12)(77,"span"),e._uU(78,"Contractor Company Name: "),e.qZA(),e._uU(79),e.qZA(),e.TgZ(80,"div",12)(81,"span"),e._uU(82,"Contractor Phone: "),e.qZA(),e._uU(83),e.qZA()()()()(),e.TgZ(84,"div",13)(85,"div",14)(86,"h5"),e._uU(87,"Submit Documents"),e.qZA()(),e.TgZ(88,"div",15),e.YNc(89,Be,6,3,"div",16),e.TgZ(90,"div")(91,"h5"),e._uU(92,"Please upload the required Documents"),e.qZA(),e.TgZ(93,"div",17)(94,"p-fileUpload",18),e.NdJ("uploadHandler",function(o){return t.onSend(o,"LetterOfAcceptance")}),e.qZA(),e.YNc(95,Ke,1,0,"button",19),e.YNc(96,$e,1,0,"button",20),e.qZA(),e.TgZ(97,"div",17)(98,"p-fileUpload",21),e.NdJ("uploadHandler",function(o){return t.onSend(o,"AgreementCopy")}),e.qZA(),e.YNc(99,ze,1,0,"button",22),e.YNc(100,Xe,1,0,"button",20),e.qZA(),e.TgZ(101,"div",17)(102,"p-fileUpload",23),e.NdJ("uploadHandler",function(o){return t.onSend(o,"Other")}),e.qZA(),e.YNc(103,et,1,0,"button",22),e.YNc(104,tt,1,0,"button",20),e.qZA()(),e.YNc(105,nt,4,2,"div",24),e._UZ(106,"br"),e.YNc(107,it,2,0,"div",16),e.qZA()(),e.TgZ(108,"div",25),e.YNc(109,ot,1,2,"button",26),e.TgZ(110,"button",27),e.NdJ("click",function(){return t.resetform()}),e.qZA()()()()()),2&n&&(e.xp6(4),e.Oqu(t.title),e.xp6(2),e.Akn(e.DdM(44,rt)),e.xp6(9),e.hij("",t.tender&&t.tender.tenderNumber?t.tender.tenderNumber:""," "),e.xp6(3),e.Oqu(t.tender&&t.tender.subcategory?t.tender.subcategory:""),e.xp6(5),e.hij(" ",t.tender&&t.tender.subcategory?t.tender.workType:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.subWorkType?t.tender.subWorkType:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.strength?t.tender.strength:""," "),e.xp6(4),e.hij(" ",t.tender&&t.tender.divisionName?t.tender.divisionName:""," "),e.xp6(4),e.hij(" ",t.tender&&t.tender.districtName?t.tender.districtName:""," "),e.xp6(4),e.hij(" ",t.tender&&t.tender.goNumber?t.tender.goNumber:""," "),e.xp6(5),e.hij(" ",t.tender&&t.tender.startDate?t.dc(t.tender.startDate):""," "),e.xp6(4),e.hij(" ",t.tender&&t.tender.endDate?t.dc(t.tender.endDate):""," "),e.xp6(8),e.AsE("",t.tender&&t.tender.workValue?t.tender.workValue:"","",t.tender&&t.tender.workValue?" ("+t.convertoWordsIND(t.tender.workValue)+")":""," "),e.xp6(11),e.hij(" ",t.tender&&t.tender.contractorName?t.tender.contractorName:""," "),e.xp6(4),e.hij(" ",t.tender&&t.tender.contractorDistrict?t.tender.contractorDistrict:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorCompanyName?t.tender.contractorCompanyName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorMobile?t.tender.contractorMobile:""," "),e.xp6(6),e.Q6J("ngIf",t.tender.workorder&&t.tender.negotiation_signed_doc&&"not upload"!=t.tender.others_doc),e.xp6(5),e.Q6J("ngStyle",e.DdM(45,Q))("customUpload",!0)("files",t.LetterOfAcceptancefiles)("auto",!0)("maxFileSize",2e6),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.letterOfAcceptanceId),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.letterOfAcceptanceId),e.xp6(2),e.Q6J("ngStyle",e.DdM(46,Q))("customUpload",!0)("files",t.AgreementCopyfiles)("auto",!0)("maxFileSize",2e6),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.agreementCopyId),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.agreementCopyId),e.xp6(2),e.Q6J("ngStyle",e.DdM(47,Q))("customUpload",!0)("files",t.Otherfiles)("auto",!0)("maxFileSize",2e6),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.otherFileId),e.xp6(1),e.Q6J("ngIf",t.tender&&t.tender.otherFileId),e.xp6(1),e.Q6J("ngIf",(t.tender.agreementCopyId||t.tender.letterOfAcceptanceId||t.tender.otherFileId||"not upload"!=t.tender.others_doc||"not upload"!=t.tender.negotiation_signed_doc||"not upload"!=t.tender.workorder)&&0==t.tender.isVerified),e.xp6(2),e.Q6J("ngIf",t.tender.isVerified),e.xp6(2),e.Q6J("ngxPermissionsOnly",t.privlegess.TENDER_WORK_CREATE))},dependencies:[_.O5,_.PC,a.JJ,a.On,W.Hq,Re.XZ,L.p,Ze.u,E.gE],styles:[".boldlabel[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.boldlabelinsiderow[_ngcontent-%COMP%]{padding:0!important;margin-bottom:5px}.boldlabelinsiderow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.boldlabelhiegr[_ngcontent-%COMP%]{padding:0!important}.boldlabelhiegr[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:650;font-size:13px}.indi-card[_ngcontent-%COMP%]{padding:10px 30px!important;background-color:#e6e7ff;border-radius:10px}"]}),I);R=(0,P.gn)([(0,g.c)()],R);var M,st=d(93838),at=d(6593),ye=d(53714),Ce=d(53965),lt=d(77902),dt=d(96218),pt=d(27561),ct=d(27213),ut=d(66651),mt=d(8720),gt=d(94532),_t=d(6263),we=d(14953),ht=d(48804);function ft(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateamount())}),e.qZA()}}const C=function(i){return[i]};function vt(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,ft,1,0,"button",24),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.TENDER_AMOUNT_REVISION))}}function Tt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.redirecttofileupdate())}),e.qZA()}}function bt(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,Tt,1,0,"button",26),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.TENDER_EDIT))}}function Zt(i,n){if(1&i&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"h5"),e._uU(4,"Tender History"),e.qZA(),e.TgZ(5,"div",7)(6,"div",8)(7,"span"),e._uU(8,"Work Number: "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"span"),e._uU(12,"Division: "),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"div",8)(15,"span"),e._uU(16,"District: "),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"div",8)(19,"span"),e._uU(20,"Notification Date: "),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"div",8)(23,"span"),e._uU(24,"Awarded Date: "),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"div",8)(27,"span"),e._uU(28,"Work Commencement Date: "),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"div",8)(31,"span"),e._uU(32,"Work Completion Date: "),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div",8)(35,"span"),e._uU(36,"Class: "),e.qZA(),e._uU(37),e.qZA(),e.TgZ(38,"div",8)(39,"span"),e._uU(40,"Category: "),e.qZA(),e._uU(41),e.qZA(),e.TgZ(42,"div",8)(43,"span"),e._uU(44,"Main Category: "),e.qZA(),e._uU(45),e.qZA(),e.TgZ(46,"div",8)(47,"span"),e._uU(48,"Name of the work: "),e.qZA(),e._uU(49),e.qZA(),e.TgZ(50,"div",8)(51,"span"),e._uU(52,"Service Type: "),e.qZA(),e._uU(53),e.qZA(),e.TgZ(54,"div",8)(55,"span"),e._uU(56,"Category Type: "),e.qZA(),e._uU(57),e.qZA(),e.TgZ(58,"div",8)(59,"span"),e._uU(60,"Bid Type: "),e.qZA(),e._uU(61),e.qZA(),e.TgZ(62,"div",8)(63,"span"),e._uU(64,"Contractor Name: "),e.qZA(),e._uU(65),e.qZA(),e.TgZ(66,"div",8)(67,"span"),e._uU(68,"Division: "),e.qZA(),e._uU(69),e.qZA(),e.TgZ(70,"div",8)(71,"span"),e._uU(72,"District: "),e.qZA(),e._uU(73),e.qZA(),e.TgZ(74,"div",8)(75,"span"),e._uU(76,"Contractor Category: "),e.qZA(),e._uU(77),e.qZA(),e.TgZ(78,"div",8)(79,"span"),e._uU(80,"Tender Value: "),e.qZA(),e._uU(81),e.qZA(),e.TgZ(82,"div",8)(83,"span"),e._uU(84,"Awarded Value: "),e.qZA(),e._uU(85),e.qZA()()(),e.YNc(86,bt,2,3,"div",9),e.qZA()()),2&i){const t=e.oxw();e.xp6(9),e.hij("",t.tender&&t.tender.tenderNumber?t.tender.tenderNumber:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.divisionName?t.tender.divisionName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.districtName?t.tender.districtName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.startDate?t.dc(t.tender.startDate):""," "),e.xp6(4),e.hij("",t.tender&&t.tender.endDate?t.dc(t.tender.endDate):""," "),e.xp6(4),e.hij(" ",t.tender.workCommencementDate?t.dc(t.tender.workCommencementDate):""," "),e.xp6(4),e.hij("",t.tender.workCompletionDate?t.dc(t.tender.workCompletionDate):""," "),e.xp6(4),e.hij("",t.tender&&t.tender.class?t.tender.class:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.category?t.tender.category:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.mainCategory?t.tender.mainCategory:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.subcategory?t.tender.subcategory:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.service_type_main?t.tender.service_type_main:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.category_type_main?t.tender.category_type_main:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.bidType?t.tender.bidType:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorName?t.tender.contractorName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorDivision?t.tender.contractorDivision:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorDistrict?t.tender.contractorDistrict:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorCategory?t.tender.contractorCategory:""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.tenderFinalAmount?t.tender.tenderFinalAmount:t.tender&&t.tender.workValue?t.tender.workValue:"","",t.tender&&t.tender.tenderFinalAmount?" ("+t.convertoWordsIND(t.tender.tenderFinalAmount)+")":t.tender&&t.tender.workValue?" ("+t.convertoWordsIND(t.tender.workValue)+")":""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.workValue?t.tender.workValue:"","",t.tender&&t.tender.workValue?" ("+t.convertoWordsIND(t.tender.workValue)+")":""," "),e.xp6(1),e.Q6J("ngIf",t.tender&&"Completed"!=t.tender.tenderStatus)}}function yt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.download(o.tender.agreementCopyId,"AgreementCopy"))}),e.qZA()}}function Ct(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDocPdf(o.tender.agreementCopyId,"AgreementCopy"))}),e.qZA()}}function wt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"a",30),e._UZ(2,"button",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("href",t.tender.negotiation_signed_doc,e.LSH)}}function kt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.download(o.tender.letterOfAcceptanceId,"LetterOfAcceptance"))}),e.qZA()}}function At(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDocPdf(o.tender.letterOfAcceptanceId,"LetterOfAcceptance"))}),e.qZA()}}function xt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"a",30),e._UZ(2,"button",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("href",t.tender.workorder,e.LSH)}}function It(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.download(o.tender.otherFileId,"Other"))}),e.qZA()}}function Mt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showDocPdf(o.tender.otherFileId,"Other"))}),e.qZA()}}function qt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"a",30),e._UZ(2,"button",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("href",t.tender.others_doc,e.LSH)}}function St(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",32)(1,"span",33),e._uU(2,"Files"),e.qZA(),e.TgZ(3,"div",34)(4,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.downloadMilestoneFiles(o.currentFileId,o.currentFileName))}),e.qZA()()()}}function Nt(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"iframe",36),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.pdfSrc,e.uOi)}}function Ut(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"img",37),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)}}function Dt(i,n){if(1&i&&(e.ynx(0),e._UZ(1,"video",38),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.videoSrc,e.LSH)}}function Wt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.redirecttoTemplateupdate())}),e.qZA()}}function Pt(i,n){if(1&i&&(e.TgZ(0,"div",23),e.YNc(1,Wt,1,0,"button",39),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.TENDER_MILESTONE_EDIT))}}function Ft(i,n){if(1&i&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"h5"),e._uU(4,"Template"),e.qZA(),e.TgZ(5,"div",7)(6,"div",8)(7,"span"),e._uU(8,"Work Template Name: "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div",8)(11,"span"),e._uU(12,"Work Type: "),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"div",8)(15,"span"),e._uU(16,"Sub Work Type: "),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"div",8)(19,"span"),e._uU(20,"Service Type: "),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"div",8)(23,"span"),e._uU(24,"Category Type: "),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"div",8)(27,"span"),e._uU(28,"Strength: "),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"div",8)(31,"span"),e._uU(32,"Template Code: "),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div",8)(35,"span"),e._uU(36,"Duration in Days: "),e.qZA(),e._uU(37),e.qZA()()(),e.YNc(38,Pt,2,3,"div",9),e.qZA()()),2&i){const t=e.oxw();e.xp6(9),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.workTemplateName?t.templateWithMilestone.workTemplateName:""," "),e.xp6(4),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.workType?t.templateWithMilestone.workType:""," "),e.xp6(4),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.subWorkType?t.templateWithMilestone.subWorkType:""," "),e.xp6(4),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.serviceType?t.templateWithMilestone.serviceType:""," "),e.xp6(4),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.categoryType?t.templateWithMilestone.categoryType:""," "),e.xp6(4),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.strength?t.templateWithMilestone.strength:""," "),e.xp6(4),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.templateCode?t.templateWithMilestone.templateCode:""," "),e.xp6(4),e.hij("",t.templateWithMilestone&&t.templateWithMilestone.workDurationInDays?t.templateWithMilestone.workDurationInDays:""," "),e.xp6(1),e.Q6J("ngIf",t.tender&&"Completed"!=t.tender.tenderStatus)}}function Et(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.opencommentModal(o.id,"MILESTONE"))}),e.qZA()}}function Jt(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Et,1,0,"button",50),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.TENDER_REVIEW_COMMENT))}}function Ot(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.updatePercentage(o.id,o.percentageCompleted))}),e.qZA()}}function Vt(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ot,1,0,"button",52),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.MILESTONE_PERCENTAGE_UPDATE))}}function Gt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.openMbook(o.workTemplateMilestoneMbookId))}),e.qZA()}}function Lt(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Gt,1,0,"button",54),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.MBOOK_VIEW))}}function Qt(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,Jt,2,3,"div",17),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"div",12)(17,"div",44),e._UZ(18,"p-progressBar",45),e.qZA(),e.TgZ(19,"div",46),e._uU(20),e.ALo(21,"round"),e.qZA()()(),e.TgZ(22,"td")(23,"div",12)(24,"div",44),e._UZ(25,"p-progressBar",47),e.qZA(),e.TgZ(26,"div",46),e._uU(27),e.ALo(28,"round"),e.qZA()()(),e.TgZ(29,"td"),e._uU(30),e.qZA(),e.TgZ(31,"td"),e._UZ(32,"p-tag",48),e.qZA(),e.TgZ(33,"td"),e._UZ(34,"p-tag",48),e.qZA(),e.TgZ(35,"td",49),e.YNc(36,Vt,2,3,"div",17),e.YNc(37,Lt,2,3,"div",17),e.qZA()()),2&i){const t=n.$implicit,r=n.index,o=e.oxw(2);e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Q6J("ngIf",o.tender&&"Completed"!=o.tender.tenderStatus),e.xp6(2),e.Oqu(t.milestoneName),e.xp6(2),e.Oqu(t.milestoneCode),e.xp6(2),e.Oqu(o.dc(t.startDate)),e.xp6(2),e.Oqu(t.durationInDays),e.xp6(2),e.Oqu(o.dc(t.endDate)),e.xp6(4),e.Q6J("value",t.percentageCompleted)("showValue",!1)("color",o.getcolorforProgress(t.percentageCompleted,"percentageCompleted")),e.xp6(2),e.hij(" ",e.lcZ(21,22,t.percentageCompleted),"% "),e.xp6(5),e.Q6J("value",t.paymentPercentage)("showValue",!1)("color",o.getcolorforProgress(t.paymentPercentage,"paymentPercentage")),e.xp6(2),e.hij(" ",e.lcZ(28,24,t.paymentPercentage),"% "),e.xp6(3),e.Oqu(t.milestoneAmount),e.xp6(2),e.Q6J("severity",o.getBtnSeverity(t.paymentStatusName))("value",t.paymentStatusName),e.xp6(2),e.Q6J("severity",o.getBtnSeverity(t.milestoneStatusName))("value",t.milestoneStatusName),e.xp6(2),e.Q6J("ngIf",t.isSubmitted&&o.tender&&"Completed"!=o.tender.tenderStatus),e.xp6(1),e.Q6J("ngIf",t.isSubmitted&&t.workTemplateMilestoneMbookId&&t.percentageCompleted>0&&t.paymentPercentage>0)}}function Rt(i,n){1&i&&(e.TgZ(0,"span",77),e._uU(1,"Add Comments"),e.qZA())}function Yt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",78),e._UZ(1,"button",79),e.TgZ(2,"button",73),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.resetCommentform())}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("disabled",!t.AddcommentsForm.valid)}}function Ht(i,n){if(1&i&&(e.TgZ(0,"span",77),e._uU(1,"Update Percentage"),e.qZA(),e.TgZ(2,"span",80),e._uU(3),e.qZA()),2&i){const t=e.oxw(3);let r;e.xp6(3),e.hij("",null==(r=t.updateForm.get("completedPercentage"))?null:r.value," %")}}function jt(i,n){1&i&&(e.TgZ(0,"div",81)(1,"div"),e._uU(2,"Please choose any file"),e.qZA()())}function Bt(i,n){if(1&i&&e._UZ(0,"button",79),2&i){const t=e.oxw(3);e.Q6J("disabled",!t.updateForm.valid)}}function Kt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",82),e.NdJ("click",function(){const s=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.downloadMilestoneFiles(s.id,s.originalFileName))}),e.qZA(),e.TgZ(11,"button",83),e.NdJ("click",function(){const s=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.DeleteMilestoneFile(s.typeId,s.id))}),e.qZA()()()}if(2&i){const t=n.$implicit,r=n.index,o=e.oxw(3);e.xp6(2),e.Oqu(r+1),e.xp6(2),e.Oqu(t.originalFileName),e.xp6(2),e.Oqu(t.createdByUserName),e.xp6(2),e.Oqu(o.dcwt(t.createdDate))}}function $t(i,n){1&i&&(e.TgZ(0,"span",77),e._uU(1,"Update Work Difference Value"),e.qZA())}function zt(i,n){if(1&i&&e._UZ(0,"button",79),2&i){const t=e.oxw(4);e.Q6J("disabled",!t.amountupdateForm.valid)}}function Xt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",78),e.YNc(1,zt,1,1,"button",72),e.TgZ(2,"button",73),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.resetform())}),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.TENDER_AMOUNT_REVISION))}}const Y=function(){return{width:"50vw"}},en=function(){return{width:"40%"}},tn=function(){return{width:"80%"}};function nn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"form",56),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.submitcomment())}),e.TgZ(2,"p-dialog",57),e.NdJ("visibleChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.commentmodalvisible=o)})("onHide",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.resetCommentform())}),e.YNc(3,Rt,2,0,"ng-template",19),e.TgZ(4,"div",58)(5,"div",5)(6,"div",59)(7,"div",60)(8,"label",61),e._uU(9,"Type"),e.qZA(),e._UZ(10,"p-dropdown",62),e.qZA(),e.TgZ(11,"div",60)(12,"label",63),e._uU(13,"Notes"),e.qZA(),e._UZ(14,"textarea",64)(15,"app-error-msg",65),e.qZA()()()(),e.YNc(16,Yt,3,1,"ng-template",66),e.qZA()(),e.TgZ(17,"form",56),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.submit())}),e.TgZ(18,"p-dialog",57),e.NdJ("visibleChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.modalvisible=o)})("onHide",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.resetform())}),e.YNc(19,Ht,4,1,"ng-template",19),e.TgZ(20,"div",58)(21,"div",5)(22,"div",59)(23,"div",60)(24,"label",67),e._uU(25,"Completion Percentage"),e.qZA(),e._UZ(26,"p-slider",68),e.qZA(),e.TgZ(27,"div",60)(28,"label",67),e._uU(29,"File(s)"),e.qZA(),e.TgZ(30,"p-fileUpload",69),e.NdJ("onSelect",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onselectfiles(o))})("onRemove",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onRemovefile(o))}),e.qZA(),e.YNc(31,jt,3,0,"div",70),e.qZA(),e.TgZ(32,"div",60)(33,"label",63),e._uU(34,"Notes"),e.qZA(),e._UZ(35,"textarea",64)(36,"app-error-msg",65),e.qZA()()()(),e.TgZ(37,"div",71),e.YNc(38,Bt,1,1,"button",72),e._uU(39," \xa0 "),e.TgZ(40,"button",73),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.resetform())}),e.qZA()(),e.TgZ(41,"div",74)(42,"h5"),e._uU(43,"Milestone Files"),e.qZA(),e.TgZ(44,"table",42)(45,"thead")(46,"tr")(47,"th"),e._uU(48,"S. No"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Name"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Saved by"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Saved date"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Action"),e.qZA()()(),e.TgZ(57,"tbody"),e.YNc(58,Kt,12,4,"tr",43),e.qZA()()()()(),e.TgZ(59,"form",56),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.amountUpdateSubmit())}),e.TgZ(60,"p-dialog",57),e.NdJ("visibleChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.amountmodalvisible=o)})("onHide",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.resetform())}),e.YNc(61,$t,2,0,"ng-template",19),e.TgZ(62,"div",58)(63,"div",5)(64,"div",59)(65,"div",60)(66,"label",61),e._uU(67,"Difference Value"),e.qZA(),e._UZ(68,"input",75)(69,"app-error-msg",65),e.qZA(),e.TgZ(70,"div",60)(71,"label",63),e._uU(72,"Reason for Revision"),e.qZA(),e._UZ(73,"textarea",76)(74,"app-error-msg",65),e.qZA()()()(),e.YNc(75,Xt,3,3,"ng-template",66),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.AddcommentsForm),e.xp6(1),e.Akn(e.DdM(45,Y)),e.Q6J("visible",t.commentmodalvisible)("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),e.xp6(8),e.Akn(e.DdM(46,en)),e.Q6J("options",t.commentType)("showClear",!1),e.xp6(5),e.Q6J("control",t.updateForm.get("notes")),e.xp6(2),e.Q6J("formGroup",t.updateForm),e.xp6(1),e.Akn(e.DdM(47,Y)),e.Q6J("visible",t.modalvisible)("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),e.xp6(8),e.Q6J("min",0)("max",100),e.xp6(4),e.Q6J("ngStyle",e.DdM(48,tn))("customUpload",!0)("files",t.Otherfiles)("showCancelButton",!0)("showUploadButton",!1)("multiple",!0)("maxFileSize",2e6),e.xp6(1),e.Q6J("ngIf",t.fileerror),e.xp6(5),e.Q6J("control",t.updateForm.get("notes")),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.VKq(49,C,t.privlegess.MILESTONE_PERCENTAGE_UPDATE)),e.xp6(20),e.Q6J("ngForOf",t.filesList),e.xp6(1),e.Q6J("formGroup",t.amountupdateForm),e.xp6(1),e.Akn(e.DdM(51,Y)),e.Q6J("visible",t.amountmodalvisible)("modal",!0)("draggable",!1)("resizable",!1)("closable",!0),e.xp6(8),e.Q6J("maxlength",250),e.xp6(1),e.Q6J("control",t.amountupdateForm.get("increasedAmount")),e.xp6(5),e.Q6J("control",t.amountupdateForm.get("updatedNote"))}}function on(i,n){if(1&i&&(e.TgZ(0,"div",41)(1,"h5"),e._uU(2,"Stage of work"),e.qZA(),e.TgZ(3,"table",42)(4,"thead")(5,"tr")(6,"th"),e._uU(7,"S. No"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Review"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Milestone Name"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Milestone Code"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Start Date"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Days"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"End Date"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Completed Percentage"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Payment Percentage"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Payment Value"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Payment Status"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Milestone Status"),e.qZA(),e.TgZ(30,"th"),e._uU(31,"Action"),e.qZA()()(),e.TgZ(32,"tbody"),e.YNc(33,Qt,38,26,"tr",43),e.qZA()(),e.YNc(34,nn,76,52,"div",17),e.qZA()),2&i){const t=e.oxw();e.xp6(33),e.Q6J("ngForOf",t.templateWithMilestone.milestones),e.xp6(1),e.Q6J("ngIf",t.tender&&"Completed"!=t.tender.tenderStatus)}}function rn(i,n){if(1&i&&(e.TgZ(0,"small",90),e._uU(1),e.qZA()),2&i){const t=n.$implicit,r=e.oxw(2);e.xp6(1),e.Oqu(r.dcwt(t.createdDate))}}function sn(i,n){1&i&&e._uU(0),2&i&&e.hij(" ",n.$implicit.activityMessage," ")}function an(i,n){if(1&i&&(e.TgZ(0,"div",84)(1,"div",85)(2,"h5"),e._uU(3,"Activity Log"),e.qZA(),e.TgZ(4,"ng-scrollbar",86)(5,"p-timeline",87),e.YNc(6,rn,2,1,"ng-template",88),e.YNc(7,sn,1,1,"ng-template",89),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("value",t.activitiesevents)}}function ln(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",98),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.opencommentModal("","TENDER"))}),e.qZA()}}function dn(i,n){if(1&i&&(e.TgZ(0,"div",96),e.YNc(1,ln,1,0,"button",97),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,C,t.privlegess.TENDER_ADD_COMMENT))}}function pn(i,n){1&i&&(e.TgZ(0,"span",99),e._UZ(1,"i",100),e.qZA()),2&i&&e.Udp("background-color",n.$implicit.color)}function cn(i,n){if(1&i&&(e.TgZ(0,"p-card",101)(1,"p"),e._uU(2),e.qZA()()),2&i){const t=n.$implicit,r=e.oxw(2);e.Q6J("header",t.subjectText)("subheader",r.dcwt(t.commentDate)),e.xp6(2),e.hij(" ",t.commentsText," ")}}function un(i,n){if(1&i&&(e.TgZ(0,"div",84)(1,"div",4)(2,"div",91)(3,"div",92)(4,"h5"),e._uU(5,"Comments"),e.qZA()(),e.YNc(6,dn,2,3,"div",93),e.qZA(),e.TgZ(7,"ng-scrollbar",86)(8,"p-timeline",94),e.YNc(9,pn,2,2,"ng-template",95),e.YNc(10,cn,3,3,"ng-template",88),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.tender&&"Completed"!=t.tender.tenderStatus),e.xp6(2),e.Q6J("value",t.events)}}const mn=function(){return{float:"right"}},gn=function(){return{width:"95vw",height:"90vh"}};let J=((M=class{constructor(n,t,r,o,s,p,c,u,h,T){this.tenderFacade=n,this.messageService=t,this.tenderService=r,this.router=o,this.route=s,this.titlecasePipe=p,this.generalService=c,this.http=u,this.datepipe=h,this.sanitizer=T,this.canUpdate=!1,this.modalvisible=!1,this.amountmodalvisible=!1,this.commentmodalvisible=!1,this.commentCount=0,this.activityCount=0,this.commentfiletrModel={columnSearch:null,searchString:null,skip:0,sorting:null,take:5e5},this.privlegess=f.UR,this.fileerror=!1,this.Otherfiles=[],this.filesList=[],this.showViewer=!1,this.fileType=null,this.commentType=(0,f.Gs)()}ngOnInit(){this.tenderFacade.selectTender$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.tender=n,this.tender&&this.tender.workTemplateId&&this.tenderFacade.getWorktemplate(this.tender.id))}),this.tenderFacade.selectWorkTemplate$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.templateWithMilestone=n)}),this.routeSub=this.route.params.pipe((0,g.t)(this)).subscribe(n=>{this.id=n.id,this.canUpdate=n.update,this.tenderFacade.getTenderById(this.id)}),this.updateForm=new a.cw({workMilestoneId:new a.NI("",a.kI.required),completedPercentage:new a.NI("",[a.kI.required,a.kI.min(1)]),notes:new a.NI("",[a.kI.required])}),this.amountupdateForm=new a.cw({tenderId:new a.NI("",a.kI.required),updatedNote:new a.NI("",a.kI.required),increasedAmount:new a.NI("",[a.kI.required])}),this.AddcommentsForm=new a.cw({type:new a.NI("",a.kI.required),typeId:new a.NI("",a.kI.required),subject:new a.NI("",a.kI.required),notes:new a.NI("",[a.kI.required])}),this.getlatestComments(),this.getlatestActivities(),this.tenderFacade.selectsavePercenategStatus$.pipe((0,g.t)(this)).subscribe(n=>{!n||n.Status!=v.cH&&n.Status!=v.nQ?n&&(this.resetform(),this.messageService.add({severity:"success",summary:"Success",detail:n?.message}),this.getlatestComments(),this.getlatestActivities(),this.tenderFacade.getWorktemplate(this.tender.id),this.tenderFacade.getTenderById(this.id)):this.messageService.add({severity:"error",life:8e4,summary:"Error",detail:n.message})})}opencommentModal(n,t){"TENDER"===t&&(n=this.id),this.AddcommentsForm.get("type")?.patchValue(t),this.AddcommentsForm.get("typeId")?.patchValue(n),this.AddcommentsForm.get("subject")?.patchValue("Review Comment"),this.commentmodalvisible=!0,this.AddcommentsForm.get("type")?.disable({onlySelf:!0})}submitcomment(){this.tenderService.saveComment({id:st.i.create().toString(),commentsText:this.AddcommentsForm.get("notes")?.value,type:this.AddcommentsForm.get("type")?.value,typeId:this.AddcommentsForm.get("typeId")?.value,subjectText:this.AddcommentsForm.get("subject")?.value}).subscribe(n=>{this.messageService.add({severity:"success",summary:"Success",detail:n?.message}),this.commentmodalvisible=!1,this.AddcommentsForm.reset(),this.getlatestComments(),this.getlatestActivities()},n=>{})}getlatestComments(){this.tenderService.getCommentList({...this.commentfiletrModel,where:{type:"TENDER",typeId:this.id}}).subscribe({next:n=>{this.events=n.data.sort((t,r)=>new Date(t.commentDate).getTime()-new Date(r.commentDate).getTime()),this.commentCount=n.totalRecordCount},error:n=>{console.error("Error loading comments",n)}})}getlatestActivities(){this.tenderService.getactivityList({skip:0,take:5e5,where:{type:"TENDER",typeId:this.id},ids:null,types:null,searchString:null,sorting:null,columnSearch:null}).subscribe({next:n=>{this.activitiesevents=n.data.sort((t,r)=>new Date(t.createdDate).getTime()-new Date(r.createdDate).getTime()),this.activityCount=n.totalRecordCount},error:n=>{console.error("Error loading activities",n)}})}getBtnSeverity(n){return(0,f.x)(n)}back(){this.router.navigate(["tender"])}resetCommentform(){this.commentmodalvisible=!1,this.AddcommentsForm.reset()}updatePercentage(n,t){this.updateForm.get("workMilestoneId")?.patchValue(n),this.updateForm.get("completedPercentage")?.patchValue(t),this.updateForm.get("notes")?.patchValue(""),this.getMilestoneFiles(n)}updateamount(){this.amountupdateForm.get("tenderId")?.patchValue(this.tender.tenderId),this.amountupdateForm.get("updatedNote")?.patchValue(""),this.amountupdateForm.get("increasedAmount")?.patchValue(0),this.amountmodalvisible=!0}dc(n){return(0,f.ql)(n)}dcwt(n){return(0,f.gv)(n)}submit(){var n=this;return(0,K.Z)(function*(){n.updateForm.invalid||(n.Otherfiles&&n.Otherfiles.length>0?(yield n.onSend(n.Otherfiles),n.fileerror=!1,n.tenderFacade.savePercentage({completedPercentage:n.updateForm.get("completedPercentage")?.value,workMilestoneId:n.updateForm.get("workMilestoneId")?.value,percentageUpdateNote:n.updateForm.get("notes")?.value})):n.fileerror=!0)})()}amountUpdateSubmit(){this.tenderService.UpdateAmount({tenderId:this.amountupdateForm.get("tenderId")?.value,updatedNote:this.amountupdateForm.get("updatedNote")?.value,increasedAmount:this.amountupdateForm.get("increasedAmount")?.value}).subscribe(n=>{!n||n.data.Status!=v.cH&&n.data.Status!=v.nQ?n&&(this.resetform(),this.messageService.add({severity:"success",summary:"Success",detail:n?.message}),this.getlatestComments(),this.getlatestActivities(),this.tenderFacade.getWorktemplate(this.tender.id),this.tenderFacade.getTenderById(this.tender.tenderId)):this.messageService.add({severity:"error",life:8e4,summary:"Error",detail:n.message})},n=>{this.messageService.add({severity:"error",life:8e4,summary:"Error",detail:n.message})})}redirecttofileupdate(){this.router.navigate(["tender","generate",this.id])}redirecttoTemplateupdate(){this.router.navigate(["tender","milestone-preparation",this.id])}resetform(){this.modalvisible=!1,this.fileerror=!1,this.updateForm.reset(),this.Otherfiles=[],this.amountmodalvisible=!1,this.amountupdateForm.reset()}getcolorforProgress(n,t){return(0,f.xM)(n,t)}onSend(n){if(n&&n.length>0){const t=new FormData;n.forEach(r=>{t.append("files",r)}),t.append("MilestoneId",this.updateForm.get("workMilestoneId")?.value),this.http.post(`${$.N.apiUrl}/Work/UploadMilestoneFile`,t).subscribe(r=>{this.Otherfiles=[],this.filesList.push(r.data)},r=>{this.messageService.add({severity:"error",summary:"Error",detail:"Failed to Upload! Please try again"})})}else this.fileerror=!0}ngOnDestroy(){this.tenderFacade.reset()}getMilestoneFiles(n){this.tenderService.MilestoneFiles(n).subscribe(t=>{t&&(this.filesList=t.data),this.modalvisible=!0})}downloadMilestoneFiles(n,t){this.generalService.downloads(n,t??"File.png")}DeleteMilestoneFile(n,t){this.tenderService.DeleteMilestoneFile(n,t).subscribe(r=>{r&&r.data&&this.getMilestoneFiles(n),this.modalvisible=!0})}onselectfiles(n){this.fileerror=!1,this.Otherfiles=n.currentFiles}onRemovefile(n){this.Otherfiles=this.Otherfiles.filter(t=>n.file.name!=t.name)}convertoWordsIND(n){return(0,f.i7)(n)}openMbook(n){this.router.navigate(["m-book-manage","view",n])}showDocPdf(n,t){this.currentFileId=n,this.currentFileName=t;const r=this.tender.files?.find(o=>o.type===t);this.generalService.showPdf(n,r?.originalFileName??"File").subscribe(o=>{const s=URL.createObjectURL(o);let p="";if(r?.originalFileName?p=r.originalFileName.split(".").pop()?.toLowerCase()||"":o.type&&(o.type.includes("pdf")?p="pdf":o.type.includes("image")?p="image":o.type.includes("video")&&(p="video")),["pdf","doc","docx","xls","xlsx","ppt","pptx","txt"].includes(p))this.fileType="pdf",this.pdfSrc=this.sanitizer.bypassSecurityTrustResourceUrl(s);else if(["png","jpg","jpeg","gif","bmp","webp"].includes(p))this.fileType="image",this.imgSrc=this.sanitizer.bypassSecurityTrustResourceUrl(s);else{if(!["mp4","webm","ogg"].includes(p))return void console.warn("Unsupported file type:",p,o.type);this.fileType="video",this.videoSrc=this.sanitizer.bypassSecurityTrustResourceUrl(s)}this.showViewer=!0})}download(n,t){this.currentFileId=n,this.currentFileName=t;const r=this.tender.files?.find(o=>o.type===t);this.generalService.downloads(n,r?.originalFileName??"File.png")}}).\u0275fac=function(n){return new(n||M)(e.Y36(D),e.Y36(y.ez),e.Y36(F.$),e.Y36(b.F0),e.Y36(b.gz),e.Y36(_.rS),e.Y36(Te.m),e.Y36(be.eN),e.Y36(_.uU),e.Y36(at.H7))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-view-work-id"]],features:[e._Bn([_.rS])],decls:83,vars:37,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","margin-bottom","10px"],[1,"col"],["pButton","","pRipple","","label","Back","icon","pi pi-arrow-left",1,"p-button-secondary",3,"click"],[1,"card","p-fluid",2,"padding","20px 20px 20px 20px","background-color","#e6e7ff"],[1,"p-formgrid","grid"],[1,"col-11"],[1,"col-12","row"],[1,"lg:col-4","md:col-4","sm:col-12","boldlabelinsiderow"],["class","col-1","style","display: flex; justify-content: center",4,"ngIf"],["class","card p-fluid","style","padding: 20px 20px 20px 20px; background-color: #e6e7ff",4,"ngIf"],[1,"card","p-fluid",2,"padding","20px","background-color","#e6e7ff"],[1,"row"],[1,"col-4"],[1,"d-flex","align-items-center"],["pButton","","pRipple","","icon","pi pi-arrow-down","pTooltip","Uploaded documents from Time portal","class","ml-2",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","icon","pi pi-eye","pTooltip","View","class","p-button-text","title","View File",3,"click",4,"ngIf"],[4,"ngIf"],["styleClass","milestone-popup",3,"visible","modal","dismissableMask","visibleChange"],["pTemplate","header"],[1,"viewer-container"],["style","padding: 20px; margin-bottom: 10px","class","stablediv",4,"ngIf"],["class","lg:col-6 md:col-6",4,"ngIf"],[1,"col-1",2,"display","flex","justify-content","center"],["type","button","pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Click to enter tender value","class","p-button-text mr-2","title","Edit","styleClass","p-button-text",3,"click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Click to enter tender value","title","Edit","styleClass","p-button-text",1,"p-button-text","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Click to edit work documents","class","p-button-text mr-2","title","Edit","styleClass","p-button-text","on","",3,"click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Click to edit work documents","title","Edit","styleClass","p-button-text","on","",1,"p-button-text","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-arrow-down","pTooltip","Uploaded documents from Time portal",1,"ml-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-eye","pTooltip","View","title","View File",1,"p-button-text",3,"click"],["target","_blank",3,"href"],["pButton","","type","button","pTooltip","Uploaded documents from Tender portal","icon","pi pi-eye","iconPos","right",1,"p-button-success","ml-2"],[1,"header-container"],[1,"header-title","center"],[1,"header-actions"],["type","button","pButton","","icon","pi pi-arrow-down","pTooltip","Download",1,"icon-download-btn",3,"click"],["frameborder","0",1,"viewer-full",3,"src"],["alt","Preview",1,"viewer-full",3,"src"],["controls","",1,"viewer-full",3,"src"],["type","button","pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Click to edit milestone","class","p-button-text mr-2","title","Edit","styleClass","p-button-text",3,"click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Click to edit milestone","title","Edit","styleClass","p-button-text",1,"p-button-text","mr-2",3,"click"],[1,"stablediv",2,"padding","20px","margin-bottom","10px"],[1,"table","sssdt"],[4,"ngFor","ngForOf"],[1,"col-9",2,"padding","10px 0px 0px 0px"],[3,"value","showValue","color"],[1,"col-3",2,"padding","10px 0px 0px 0px"],["aria-label","Status",3,"value","showValue","color"],[3,"severity","value"],[2,"display","flex"],["type","button","pButton","","pRipple","","icon","pi pi-envelope","pTooltip","Click to add review comments","class","p-button-text mr-2","title","Add Review Comments","styleClass"," p-button-text",3,"click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","icon","pi pi-envelope","pTooltip","Click to add review comments","title","Add Review Comments","styleClass"," p-button-text",1,"p-button-text","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-check","pTooltip","Click to update percentage","class","p-button-text mr-2","title","Update Percentage","styleClass","p-button-text",3,"click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","icon","pi pi-check","pTooltip","Click to update percentage","title","Update Percentage","styleClass","p-button-text",1,"p-button-text","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-fw pi-book","pTooltip","Click to open M-Book","class","p-button-text mr-2","title","M-Book","styleClass","p-button-text",3,"click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","icon","pi pi-fw pi-book","pTooltip","Click to open M-Book","title","M-Book","styleClass","p-button-text",1,"p-button-text","mr-2",3,"click"],[1,"col-12",3,"formGroup","ngSubmit"],["header","Header",3,"visible","modal","draggable","resizable","closable","visibleChange","onHide"],[1,"p-fluid"],[1,"col-12","flex","md:col-12","lg:col-12",2,"flex-wrap","wrap"],[1,"field","col-12","md:col-12","lg:col-12"],["htmlFor","type",2,"margin-bottom","20px"],["optionLabel","text","optionValue","value","placeholder","Select a Type","formControlName","type",3,"options","showClear"],["htmlFor","Notes"],["rows","5","pInputTextarea","","formControlName","notes"],[3,"control"],["pTemplate","footer"],["htmlFor","Notes",2,"margin-bottom","20px"],["formControlName","completedPercentage",3,"min","max"],["chooseLabel","Choose","tooltipPosition","left","pTooltip","Milestone Documents","accept","image/*, .doc,.docx,.xml,application/msword, .pdf, .xls, .xlsx",3,"ngStyle","customUpload","files","showCancelButton","showUploadButton","multiple","maxFileSize","onSelect","onRemove"],["class","control-error-msg",4,"ngIf"],[2,"text-align","right","margin-bottom","20px"],["pButton","","type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Cancel",1,"p-button-secondary",3,"click"],[1,"stablediv",2,"padding","20px","margin-bottom","10px","margin-top","10px","text-align","left"],["pInputText","","formControlName","increasedAmount","type","text",3,"maxlength"],["rows","5","pInputTextarea","","formControlName","updatedNote"],[1,"text-xl","font-bold"],[1,"row",2,"justify-content","end"],["pButton","","type","submit","label","Submit",3,"disabled"],[1,"font-medium","text-xl",2,"color","blue"],[1,"control-error-msg"],["type","button","pButton","","pRipple","","icon","pi pi-arrow-down","pTooltip","Download","title","Download File","styleClass","p-button-text",1,"p-button-text","mr-2",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-times","pTooltip","Delete","title","Delete File","styleClass","p-button-text",1,"p-button-text","mr-2",3,"click"],[1,"lg:col-6","md:col-6"],[1,"card","p-fluid",2,"padding","20px 20px 20px 20px","background-color","#e6e7ff","min-height","100%"],["thumbClass","white-scrollbars",1,"scroll-event","sddd"],["styleClass","customized-timeline ",3,"value"],["pTemplate","content"],["pTemplate","opposite"],[1,"p-text-secondary"],[1,"flex"],[1,"col-10"],["class","col-2",4,"ngIf"],["align","alternate","styleClass","customized-timeline ",3,"value"],["pTemplate","marker"],[1,"col-2"],["type","button","pTooltip","Click to add comments","pButton","","pRipple","","icon","pi pi-envelope","class","p-button-text mr-2","title","Add Comments","styleClass"," p-button-text",3,"click",4,"ngxPermissionsOnly"],["type","button","pTooltip","Click to add comments","pButton","","pRipple","","icon","pi pi-envelope","title","Add Comments","styleClass"," p-button-text",1,"p-button-text","mr-2",3,"click"],[1,"custom-marker","shadow-2","iconstyling"],[1,"pi","pi-check"],[3,"header","subheader"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Work Details"),e.qZA()(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return t.back()}),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"h5"),e._uU(11,"Government Order"),e.qZA(),e.TgZ(12,"div",7)(13,"div",8)(14,"span"),e._uU(15,"Number: "),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"div",8)(18,"span"),e._uU(19,"Department: "),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"div",8)(22,"span"),e._uU(23,"Date: "),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"div",8)(26,"span"),e._uU(27,"Actual GO value: "),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"div",8)(30,"span"),e._uU(31,"GO value: "),e.qZA(),e._uU(32),e.qZA(),e.TgZ(33,"div",8)(34,"span"),e._uU(35,"Scheme Name: "),e.qZA(),e._uU(36),e.qZA(),e.TgZ(37,"div",8)(38,"span"),e._uU(39,"Work Serial No: "),e.qZA(),e._uU(40),e.qZA(),e.TgZ(41,"div",8)(42,"span"),e._uU(43,"Tender Opened Date: "),e.qZA(),e._uU(44),e.qZA()()(),e.YNc(45,vt,2,3,"div",9),e.qZA()(),e.YNc(46,Zt,87,23,"div",10),e.TgZ(47,"div",11)(48,"h5"),e._uU(49,"Uploaded Documents"),e.qZA(),e.TgZ(50,"div",12)(51,"div",13)(52,"h5"),e._uU(53,"Agreement Copy"),e.qZA(),e.TgZ(54,"div",14),e.YNc(55,yt,1,0,"button",15),e.YNc(56,Ct,1,0,"button",16),e.YNc(57,wt,3,1,"div",17),e.qZA()(),e.TgZ(58,"div",13)(59,"h5"),e._uU(60,"Letter of Acceptance"),e.qZA(),e.TgZ(61,"div",14),e.YNc(62,kt,1,0,"button",15),e.YNc(63,At,1,0,"button",16),e.YNc(64,xt,3,1,"div",17),e.qZA()(),e.TgZ(65,"div",13)(66,"h5"),e._uU(67,"Other Files"),e.qZA(),e.TgZ(68,"div",14),e.YNc(69,It,1,0,"button",15),e.YNc(70,Mt,1,0,"button",16),e.YNc(71,qt,3,1,"div",17),e.qZA()(),e.TgZ(72,"p-dialog",18),e.NdJ("visibleChange",function(o){return t.showViewer=o}),e.YNc(73,St,5,0,"ng-template",19),e.TgZ(74,"div",20),e.YNc(75,Nt,2,1,"ng-container",17),e.YNc(76,Ut,2,1,"ng-container",17),e.YNc(77,Dt,2,1,"ng-container",17),e.qZA()()()(),e.YNc(78,Ft,39,9,"div",10),e.YNc(79,on,35,2,"div",21),e.TgZ(80,"div",12),e.YNc(81,an,8,1,"div",22),e.YNc(82,un,11,2,"div",22),e.qZA()()),2&n&&(e.xp6(6),e.Akn(e.DdM(35,mn)),e.xp6(10),e.hij(" ",t.tender&&t.tender.goNumber?t.tender.goNumber:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.goDepartment?t.tender.goDepartment:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.goDate?t.dc(t.tender.goDate):""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.goRevisedAmount?t.tender.goRevisedAmount:t.tender&&t.tender.goTotalAmount?t.tender.goTotalAmount:""," ",t.tender&&t.tender.goRevisedAmount?" ("+t.convertoWordsIND(t.tender.goRevisedAmount)+")":t.tender&&t.tender.goTotalAmount?" ("+t.convertoWordsIND(t.tender.goTotalAmount)+")":""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.goTotalAmount?t.tender.goTotalAmount:""," ",t.tender&&t.tender.goTotalAmount?" ("+t.convertoWordsIND(t.tender.goTotalAmount)+")":""," "),e.xp6(4),e.hij("",t.tender&&t.tender.schemeName?t.tender.schemeName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.workSerialNumber?t.tender.workSerialNumber:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.tenderOpenedDate?t.dc(t.tender.tenderOpenedDate):""," "),e.xp6(1),e.Q6J("ngIf",t.tender&&"Completed"!=t.tender.tenderStatus),e.xp6(1),e.Q6J("ngIf",t.tender&&""!=t.tender.id),e.xp6(9),e.Q6J("ngIf",null==t.tender?null:t.tender.agreementCopyId),e.xp6(1),e.Q6J("ngIf",null==t.tender?null:t.tender.agreementCopyId),e.xp6(1),e.Q6J("ngIf","not upload"!==(null==t.tender||null==t.tender.negotiation_signed_doc?null:t.tender.negotiation_signed_doc.toLowerCase())),e.xp6(5),e.Q6J("ngIf",null==t.tender?null:t.tender.letterOfAcceptanceId),e.xp6(1),e.Q6J("ngIf",null==t.tender?null:t.tender.letterOfAcceptanceId),e.xp6(1),e.Q6J("ngIf","not upload"!==(null==t.tender||null==t.tender.workorder?null:t.tender.workorder.toLowerCase())),e.xp6(5),e.Q6J("ngIf",null==t.tender?null:t.tender.otherFileId),e.xp6(1),e.Q6J("ngIf",null==t.tender?null:t.tender.otherFileId),e.xp6(1),e.Q6J("ngIf","not upload"!==(null==t.tender||null==t.tender.others_doc?null:t.tender.others_doc.toLowerCase())),e.xp6(1),e.Akn(e.DdM(36,gn)),e.Q6J("visible",t.showViewer)("modal",!0)("dismissableMask",!0),e.xp6(3),e.Q6J("ngIf","pdf"===t.fileType),e.xp6(1),e.Q6J("ngIf","image"===t.fileType),e.xp6(1),e.Q6J("ngIf","video"===t.fileType),e.xp6(1),e.Q6J("ngIf",t.templateWithMilestone&&t.templateWithMilestone.milestones),e.xp6(1),e.Q6J("ngIf",t.templateWithMilestone&&t.templateWithMilestone.milestones),e.xp6(2),e.Q6J("ngIf",t.activitiesevents&&t.activitiesevents.length>0),e.xp6(1),e.Q6J("ngIf",t.events&&t.events.length>0))},dependencies:[_.sg,_.O5,_.PC,a._Y,a.Fj,a.JJ,a.JL,a.nD,y.jx,W.Hq,ye.o,Ce.Lt,lt.iR,dt.g,a.sg,a.u,pt.u,ct.V,L.p,ut.k,Ze.u,mt.T,gt.Z,_t.V,we.KC,E.gE,ht.L],styles:[".boldlabel[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.boldlabelinsiderow[_ngcontent-%COMP%]{padding:10px!important}.boldlabelinsiderow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.boldlabelhiegr[_ngcontent-%COMP%]{padding:0!important}.boldlabelhiegr[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:650;font-size:13px}.sssdt[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .sssdt[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#e6e7ff;padding:10px}.stablediv[_ngcontent-%COMP%]{padding:15px;background-color:#f7f7fa;border-radius:10px}.iconstyling[_ngcontent-%COMP%]{padding:10px;border-radius:5px;background-color:#aaf}  .p-card .p-card-content{padding:.25rem 0}  .p-card .p-card-title{font-size:1 rem}  .setheight{min-height:599px;max-height:600px;overflow:auto}  .sddd{min-height:599px;max-height:600px}.control-error-msg[_ngcontent-%COMP%]{margin-top:5px;color:#e24c4c}  .file-preview-popup.p-dialog{border-radius:12px;overflow:hidden;box-shadow:0 6px 20px #00000040}  .file-preview-popup .p-dialog-header{background-color:#f4f6f8;padding:.75rem 1rem;border-bottom:1px solid #ddd}.header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.header-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.15rem}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.25rem}.icon-download-btn[_ngcontent-%COMP%]{background-color:transparent!important;border:none!important;width:36px!important;height:36px!important;border-radius:50%!important;display:flex;align-items:center;justify-content:center;cursor:pointer}.icon-download-btn[_ngcontent-%COMP%]:hover{background-color:#00960014!important}.icon-download-btn[_ngcontent-%COMP%]   .pi[_ngcontent-%COMP%]{font-size:1.2rem;color:#0d6efd}.viewer-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:calc(90vh - 70px);background-color:#fff}.viewer-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%], .viewer-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .viewer-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;border:none}  .file-preview-popup .p-dialog-content{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}  .customized-timeline .p-timeline-event-connector{background-color:#000!important;width:2px!important}"]}),M);J=(0,P.gn)([(0,g.c)()],J);let _n=(()=>{var i;class n{}return(i=n).\u0275fac=function(r){return new(r||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-mnge-work-id"]],decls:2,vars:0,template:function(r,o){1&r&&(e.TgZ(0,"p"),e._uU(1,"mnge-work-id works!"),e.qZA())}}),n})();var S,q=d(16676),ke=d(40987),Ae=d(52543),hn=d(23212),fn=d(90354),vn=d(45609),Tn=d(31494),O=d(68352);const bn=function(){return{"margin-left":"10px"}};function Zn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.generate())}),e.qZA()}if(2&i){const t=e.oxw(2);e.Akn(e.DdM(3,bn)),e.Q6J("disabled",""===t.selectedTemplate)}}const yn=function(){return{width:"40%"}};function Cn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"h6"),e._uU(3,"Choose the template for the milestone"),e.qZA(),e.TgZ(4,"p-dropdown",15),e.NdJ("onChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeRole(o))})("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.selectedTemplate=o)}),e.qZA(),e.YNc(5,Zn,1,4,"button",16),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Akn(e.DdM(6,yn)),e.Q6J("options",t.configurationList)("ngModel",t.selectedTemplate)("showClear",!1),e.xp6(1),e.Q6J("ngxPermissionsOnly",t.privlegess.TENDER_TEMPLATE_EDIT)}}function wn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"p-button",42),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(3);return e.KtG(s.delete(o))}),e.qZA()()}}function kn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",35)(1,"div",36)(2,"span"),e._uU(3,"Name:"),e.qZA(),e.TgZ(4,"input",37),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.name=o)}),e.qZA()(),e.TgZ(5,"div",36)(6,"span"),e._uU(7,"Code:"),e.qZA(),e.TgZ(8,"input",37),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.templateCode=o)}),e.qZA()(),e.TgZ(9,"div",36)(10,"span"),e._uU(11,"Duration:"),e.qZA(),e.TgZ(12,"p-inputNumber",38),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.durationInDays=o)}),e.qZA()(),e.TgZ(13,"div",36)(14,"span"),e._uU(15,"Strength:"),e.qZA(),e.TgZ(16,"input",39),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.strength=o)}),e.qZA()(),e.TgZ(17,"div",36)(18,"span"),e._uU(19,"Work Type:"),e.qZA(),e.TgZ(20,"input",37),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.workType=o)}),e.qZA()(),e.TgZ(21,"div",36)(22,"span"),e._uU(23,"Sub Work:"),e.qZA(),e.TgZ(24,"input",37),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.subWorkType=o)}),e.qZA()(),e.TgZ(25,"div",36)(26,"span"),e._uU(27,"Service Type:"),e.qZA(),e.TgZ(28,"input",37),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.serviceType=o)}),e.qZA()(),e.TgZ(29,"div",36)(30,"span"),e._uU(31,"Category Type:"),e.qZA(),e.TgZ(32,"input",37),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.categoryType=o)}),e.qZA()(),e.YNc(33,wn,2,0,"div",40),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.name),e.xp6(4),e.Q6J("ngModel",t.templateCode),e.xp6(4),e.Q6J("ngModel",t.durationInDays),e.xp6(4),e.Q6J("ngModel",t.strength),e.xp6(4),e.Q6J("ngModel",t.workType),e.xp6(4),e.Q6J("ngModel",t.subWorkType),e.xp6(4),e.Q6J("ngModel",t.serviceType),e.xp6(4),e.Q6J("ngModel",t.categoryType),e.xp6(1),e.Q6J("ngxPermissionsOnly",t.privlegess.TEMPLATE_REASSIGN)}}function An(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",41)(1,"p-button",42),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(3);return e.KtG(s.delete(o))}),e.qZA()()}}function xn(i,n){if(1&i&&(e.TgZ(0,"div",35)(1,"div",43)(2,"span"),e._uU(3,"Name: "),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div",43)(6,"span"),e._uU(7,"Code: "),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"div",43)(10,"span"),e._uU(11,"Duration: "),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"div",43)(14,"span"),e._uU(15,"Strength: "),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"div",43)(18,"span"),e._uU(19,"Work Type: "),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"div",43)(22,"span"),e._uU(23,"Sub Work: "),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"div",43)(26,"span"),e._uU(27,"Service Type: "),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"div",43)(30,"span"),e._uU(31,"Category Type: "),e.qZA(),e._uU(32),e.qZA(),e.YNc(33,An,2,0,"div",40),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.name||""," "),e.xp6(4),e.hij(" ",t.templateCode||""," "),e.xp6(4),e.hij(" ",t.durationInDays||0," - Days "),e.xp6(4),e.hij(" ",t.strength||""," "),e.xp6(4),e.hij(" ",t.workType||""," "),e.xp6(4),e.hij(" ",t.subWorkType||""," "),e.xp6(4),e.hij(" ",t.serviceType||""," "),e.xp6(4),e.hij(" ",t.categoryType||""," "),e.xp6(1),e.Q6J("ngxPermissionsOnly",t.privlegess.TEMPLATE_REASSIGN)}}const In=function(){return{"margin-right":"20px;"}};function Mn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"p-button",46),e.NdJ("onClick",function(o){e.CHM(t);const s=e.oxw(3);return e.KtG(s.addnewRow(o))}),e.qZA()}2&i&&e.Q6J("ngStyle",e.DdM(1,In))}function qn(i,n){if(1&i&&(e.TgZ(0,"div",44),e.YNc(1,Mn,1,2,"p-button",45),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.defaultstatus)}}function Sn(i,n){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.milestoneNameErrorMsg)}}function Nn(i,n){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.milestoneCodeErrorMsg)}}function Un(i,n){if(1&i&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.startdateErrorMsg)}}function Dn(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw().index,r=e.oxw(2);e.xp6(1),e.hij(" ",r.milestoneList[t].controls.isPaymentRequired.value?"YES":"NO"," ")}}function Wn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"p-inputSwitch",59),e.NdJ("onChange",function(o){e.CHM(t);const s=e.oxw().index,p=e.oxw(2);return p.isPaymentRequired(o),e.KtG(p.milestoneList[s].controls.paymentPercentage.setValue(0))}),e.qZA()}}function Pn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(o){e.CHM(t);const s=e.oxw(2).$implicit,p=e.oxw().index,c=e.oxw(2);return e.KtG(c.actioInvoked(s.type,p,o))}),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.Q6J("icon",t.icon)("title",t.title)}}const Fn=function(i){return[i]};function En(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Pn,1,2,"button",60),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngxPermissionsOnly",e.VKq(1,Fn,t.privlegess.TENDER_MILESTONE_EDIT))}}function Jn(i,n){if(1&i&&(e.ynx(0),e.YNc(1,En,2,3,"div",12),e.BQk()),2&i){const t=n.$implicit,r=e.oxw(),o=r.index,s=r.$implicit,p=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(!p.defaultstatus&&!p.milestoneList[o].controls.id.value&&!p.getdragdisableorNot(s)&&"DELETE"==t.type||!p.defaultstatus&&p.milestoneList[o].controls.id.value&&!p.getdragdisableorNot(s)&&"INACTIVATE"==t.type||p.defaultstatus&&"ACTIVATE"==t.type)&&0==p.milestoneList[o].controls.percentageCompleted.value)}}function On(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"tr",47)(1,"td",48),e._UZ(2,"i",49),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._UZ(5,"input",50),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"input",51),e.qZA(),e.TgZ(8,"td")(9,"p-calendar",52),e.NdJ("ngModelChange",function(){const s=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.datechanged(s))}),e.qZA()(),e.TgZ(10,"td")(11,"p-inputNumber",53),e.NdJ("ngModelChange",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.daychanged())}),e.qZA()(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td",54),e.YNc(15,Dn,2,1,"div",55),e.YNc(16,Wn,1,0,"ng-template",null,56,e.W1O),e.qZA(),e.TgZ(18,"td"),e._UZ(19,"p-inputNumber",57),e.qZA(),e.TgZ(20,"td"),e.YNc(21,Jn,2,1,"ng-container",58),e.qZA()()}if(2&i){const t=n.$implicit,r=n.index,o=e.MAs(17),s=e.oxw(2);e.Q6J("cdkDragDisabled",s.getdragdisableorNot(t))("formGroupName",r),e.xp6(3),e.hij(" ",r+1," "),e.xp6(2),e.Q6J("maxlength",250),e.xp6(2),e.Q6J("maxlength",250),e.xp6(1),e.Akn(s.isNew?"display:none":"display:revert"),e.xp6(1),e.Q6J("dateFormat","dd-mm-yy")("readonlyInput",!0)("showIcon",!0),e.xp6(2),e.Q6J("max",1095),e.xp6(1),e.Akn(s.isNew?"display:none":"display:revert"),e.xp6(1),e.hij(" ",s.milestoneList[r].controls.endDate.value?s.dc(s.milestoneList[r].controls.endDate.value):""," "),e.xp6(2),e.Q6J("ngIf",s.isNew)("ngIfElse",o),e.xp6(4),e.Q6J("max",100)("readonly",!s.milestoneList[r].controls.isPaymentRequired.value),e.xp6(1),e.Akn(s.isNew?"display:none":"display:revert"),e.xp6(1),e.Q6J("ngForOf",s.actions)}}function Vn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.submit(!1))}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",!t.milestoneForm.valid||t.durationErrorMsg||t.milestoneNameErrorMsg||t.paymentreqErrorMsg||t.startdateErrorMsg)}}function Gn(i,n){if(1&i&&e._UZ(0,"button",68),2&i){const t=e.oxw(3);e.Q6J("disabled",!t.milestoneForm.valid||t.durationErrorMsg||t.milestoneNameErrorMsg||t.paymentreqErrorMsg||t.startdateErrorMsg)}}const xe=function(i,n){return[i,n]};function Ln(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63),e.YNc(2,Vn,1,1,"button",64),e.qZA(),e.TgZ(3,"div",63),e.YNc(4,Gn,1,1,"button",65),e.qZA(),e.TgZ(5,"div",2)(6,"button",66),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.resetForm())}),e.qZA()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngxPermissionsOnly",e.WLB(2,xe,t.privlegess.TENDER_MILESTONE_SET,t.privlegess.TENDER_MILESTONE_EDIT)),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.WLB(5,xe,t.privlegess.TENDER_MILESTONE_SET,t.privlegess.TENDER_MILESTONE_EDIT))}}function Qn(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",18)(2,"div",14)(3,"div",19),e.YNc(4,kn,34,9,"div",20),e.YNc(5,xn,34,9,"div",20),e.qZA(),e.YNc(6,qn,2,1,"div",21),e.TgZ(7,"div",22)(8,"form",23),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submit())}),e.TgZ(9,"div",24)(10,"fieldset",25)(11,"div",6)(12,"table",26)(13,"thead")(14,"tr")(15,"th"),e._uU(16,"S.No"),e.qZA(),e.TgZ(17,"th",27),e._uU(18," Milestone Name "),e._UZ(19,"br"),e.YNc(20,Sn,2,1,"span",28),e.qZA(),e.TgZ(21,"th",29),e._uU(22," Milestone Code "),e._UZ(23,"br"),e.YNc(24,Nn,2,1,"span",28),e.qZA(),e.TgZ(25,"th"),e._uU(26," Start Date"),e._UZ(27,"br"),e.YNc(28,Un,2,1,"span",28),e.qZA(),e.TgZ(29,"th"),e._uU(30," Duration In Days "),e.TgZ(31,"span",30),e._uU(32),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"span",31),e._uU(35),e.qZA()(),e.TgZ(36,"th"),e._uU(37," End Date "),e.qZA(),e.TgZ(38,"th"),e._uU(39,"is Payment Required"),e.qZA(),e.TgZ(40,"th"),e._uU(41," Payment Percentage "),e.TgZ(42,"span",30),e._uU(43),e.qZA(),e._UZ(44,"br"),e.TgZ(45,"span",31),e._uU(46),e.qZA()(),e.TgZ(47,"th"),e._uU(48," Action "),e.qZA()()(),e.TgZ(49,"tbody",32),e.NdJ("cdkDropListDropped",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.drop(o))}),e.YNc(50,On,22,21,"tr",33),e.qZA()()()(),e.YNc(51,Ln,7,8,"div",34),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",!t.isNew&&!t.isEditMode),e.xp6(1),e.Q6J("ngIf",t.isEditMode||t.isNew),e.xp6(1),e.Q6J("ngIf",t.showDetail&&!t.isNew),e.xp6(2),e.Q6J("formGroup",t.milestoneForm),e.xp6(2),e.Q6J("disabled",t.isNew),e.xp6(10),e.Q6J("ngIf",t.milestoneNameErrorMsg),e.xp6(4),e.Q6J("ngIf",t.milestoneCodeErrorMsg),e.xp6(1),e.Akn(t.isNew?"display:none":"display:revert"),e.xp6(3),e.Q6J("ngIf",t.startdateErrorMsg),e.xp6(4),e.hij("(",t.totaldays,")"),e.xp6(3),e.Oqu(t.durationErrorMsg),e.xp6(1),e.Akn(t.isNew?"display:none":"display:revert"),e.xp6(7),e.hij("(",t.totalpercenatge,")"),e.xp6(3),e.Oqu(t.paymentreqErrorMsg),e.xp6(1),e.Akn(t.isNew?"display:none":"display:revert"),e.xp6(3),e.Q6J("ngForOf",t.t.controls),e.xp6(1),e.Q6J("ngIf",!t.defaultstatus&&!t.isNew)}}const Rn=function(){return{float:"right"}},Yn=function(){return{float:"right","margin-right":"10px"}};let H=((S=class{get f(){return this.milestoneForm.controls}get t(){return this.f.milestones}get milestoneList(){return this.t.controls}get milestoneNameErrorMsg(){var n;return this.milestoneList.map(t=>{t.controls.milestoneName.errors&&(n=t.controls.milestoneName.errors)}),this.defaultstatus?null:n&&n.required?"Required":null}get milestoneCodeErrorMsg(){var n;return this.milestoneList.map(t=>{t.controls.milestoneCode.errors&&(n=t.controls.milestoneCode.errors)}),this.defaultstatus?null:n&&n.required?"Required":null}get startdateErrorMsg(){var n,t,r=0,o=0;return this.milestoneList.map(s=>{r+=1,s.controls.startDate.errors&&(n=s.controls.startDate.errors),this.milestoneList.map(p=>{var c=s.controls.startDate.value;(o+=1)!=r&&p.controls.startDate.value<c&&c<p.controls.endDate.value&&(t=!0)}),o=0}),n&&n.required?"Required":t?"Start Date is colloiding":null}get durationErrorMsg(){var n;return this.milestoneList.map(t=>{t.controls.durationInDays.errors&&(n=t.controls.durationInDays.errors)}),this.defaultstatus?null:n&&n.required?"Required":n&&n.min?"Minimun (day)s should be 1":this.totaldays!=(this.durationInDays??0)?`Sum of days should be ${this.durationInDays??0}`:null}get paymentreqErrorMsg(){var n,t;return this.milestoneList.map(r=>{r.controls.paymentPercentage.errors&&(n=r.controls.paymentPercentage.errors),r.controls.isPaymentRequired.value&&r.controls.paymentPercentage.value<=0&&(t=!0)}),this.defaultstatus?null:n&&n.required?"Required":t?"% should be greater than 0":100!=this.totalpercenatge?"Sum of % should be 100":null}get totaldays(){let n=0;return this.milestoneList.map(t=>n+=t.controls.durationInDays.value),n}get totalpercenatge(){let n=0;return this.milestoneList.map(t=>n+=t.controls.paymentPercentage.value),n}constructor(n,t,r,o,s,p,c,u,h,T,U){this.messageService=n,this.router=t,this.cdr=r,this.confirmationService=o,this.route=s,this.formBuilder=p,this.tenderFacade=c,this._location=u,this.service=h,this.Tservice=T,this.templateConfigFacade=U,this.title="Milestone Preparation",this.defaultstatus=!1,this.actions=[],this.showDetail=!1,this.isNew=!0,this.isUpdating=!1,this.selectedTemplate="",this.privlegess=f.UR,this.isMilestoneSubmit=!1,this.isEditMode=!1,this.currentStatus=!0}ngOnInit(){this.route.params.pipe((0,g.t)(this)).subscribe(n=>{this.tenderID=n.id,this.tenderID&&this.tenderFacade.getTenderById(this.tenderID)}),this.tenderFacade.selectTender$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.tender=n,this.gworkId=this.tender.id,this.workTemplateId=this.tender.workTemplateId,this.workTemplateId?(this.isNew=!1,this.showDetail=!0,this.tenderFacade.getWorktemplate(this.gworkId)):this.tenderFacade.getTemplates(!0,this.tender.subcategory,this.tender.mainCategory,this.tender.service_type_main,this.tender.category_type_main))}),this.milestoneForm=this.formBuilder.group({milestones:new a.Oe([])}),this.tenderFacade.selectSaveStatus$.pipe((0,g.t)(this)).subscribe(n=>{!n||n.Status!=v.cH&&n.Status!=v.nQ?n&&(this.resetForm(),this.messageService.add({severity:"success",summary:"Success",detail:n?.message}),this.tenderFacade.updatesaveStatus(),this.isNew=!1,this.showDetail=!0,this.tenderFacade.getWorktemplate(this.gworkId)):this.messageService.add({severity:"error",life:8e4,summary:"Error",detail:n.message})}),this.tenderFacade.selectmilestoneSaveStatus$.pipe((0,g.t)(this)).subscribe(n=>{!n||n.Status!=v.cH&&n.Status!=v.nQ?n&&(this.tenderFacade.updatemilestonessaveStatus(),this.isMilestoneSubmit&&this.router.navigate(["tender"]),this.resetForm(),this.tenderFacade.getWorktemplate(this.gworkId),this.messageService.add({severity:"success",summary:"Success",detail:n?.message})):this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:n.message})}),this.tenderFacade.selectTemplateWithMilestones$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.templateWithMilestone=n,this.workType=n.workType,this.workTypeId=n.workTypeId,this.templateNumber=n.templateNumber,this.name=n.name,this.templateCode=n.templateCode,this.strength=n.strength,this.subWorkType=n.subWorkType,this.subWorkTypeId=n.subWorkTypeId,this.durationInDays=n.durationInDays,this.serviceType=n.serviceType,this.serviceTypeId=n.serviceTypeId,this.categoryType=n.categoryType,this.categoryTypeId=n.categoryTypeId,this.generateDefaultRows(this.templateWithMilestone.templateMilestones),this.cdr.markForCheck())}),this.tenderFacade.selectTemplates$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.configurationList=n.filter(t=>1==t.isPublished))}),this.tenderFacade.selectWorkTemplate$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.templateWithMilestone=n,this.workType=n.workType,this.workTypeId=n.workTypeId,this.templateNumber=n.workTemplateNumber,this.workTemplateId=n.id,this.name=n.workTemplateName,this.templateCode=n.templateCode,this.strength=n.strength,this.subWorkType=n.subWorkType,this.subWorkTypeId=n.subWorkTypeId,this.templateId=n.templateId,this.durationInDays=n.workDurationInDays,this.generateDefaultRows(this.templateWithMilestone.milestones),this.disablecompletedmilestone())}),this.actions=[{icon:"pi pi-trash",title:"Delete",type:"DELETE"},{icon:"pi pi-times",title:"Delete",type:"INACTIVATE"}],this.templateForm=new a.cw({name:new a.NI("",[a.kI.required,a.kI.maxLength(200),a.kI.minLength(3)]),durationInDays:new a.NI("",[a.kI.required,a.kI.min(1),a.kI.max(3650)]),workTypeId:new a.NI("",[a.kI.required]),strength:new a.NI("",[a.kI.required]),templateCode:new a.NI("",[a.kI.required]),subWorkTypeId:new a.NI("",[a.kI.required])})}disablecompletedmilestone(){this.milestoneList.map(n=>{n.controls.percentageCompleted.value&&100===n.controls.percentageCompleted.value&&(n.disable(),this.isEditMode=!0)})}datechanged(n){let t=null,r=0;this.isUpdating||(this.isUpdating=!0,this.milestoneList.map(o=>{if(r++,r>n)if(o.controls.percentageCompleted.value&&100===o.controls.percentageCompleted.value)t=o.controls.endDate.value;else{1!=r&&r!=n+1&&o.controls.startDate.patchValue(q(t).add(1,"day").toDate());const s=o.controls.startDate.value;t=s;const p=o.controls.durationInDays.value??0,c=q(s).add(p,"days");o.controls.endDate.patchValue(c),t=c}}),this.isUpdating=!1)}daychanged(){let n=null,t=0;this.isUpdating||(this.isUpdating=!0,this.milestoneList.map(r=>{if(t++,r.controls.percentageCompleted.value&&100===r.controls.percentageCompleted.value)n=r.controls.endDate.value;else{1!=t&&r.controls.startDate.patchValue(q(n).add(1,"day").toDate());const o=r.controls.startDate.value;n=o;const s=r.controls.durationInDays.value??0,p=q(o).add(s,"days");r.controls.endDate.patchValue(p),n=p}}),this.isUpdating=!1)}generate(){this.tenderFacade.saveTemplates(this.gworkId,this.selectedTemplate)}changeRole(n){this.showDetail=!0,this.tenderFacade.templateWithMilestoneListGet(this.selectedTemplate,!this.defaultstatus,!0,""),this.milestoneForm.disable()}drop(n){this.moveItemInArrayIfAllowed(this.milestoneList,n.previousIndex,n.currentIndex);let t=0;this.t.controls.map(r=>{t++,r.controls.orderNumber.setValue(t)}),this.daychanged()}moveItemInArrayIfAllowed(n,t,r){const o=this.clamp(t,n.length-1),s=this.clamp(r,n.length-1);if(o===s)return;const p=n[o],c=s<o?-1:1;if(!n.filter((h,T)=>c>0?T>=o&&T<=s:T>=s&&T<=o).some(h=>h.disabled)){for(let h=o;h!==s;h+=c)n[h]=n[h+c];n[s]=p}}clamp(n,t){return Math.max(0,Math.min(t,n))}changeEvent(n){this.actions=n.checked?[{icon:"pi pi-undo",title:"Activate",type:"ACTIVATE"}]:[{icon:"pi pi-trash",title:"Delete",type:"DELETE"},{icon:"pi pi-times",title:"Delete",type:"INACTIVATE"}]}generateDefaultRows(n){this.t.clear(),n&&n.forEach(t=>{this.t.push(this.formBuilder.group({id:[t.id],workTemplateId:[t.workTemplateId,[a.kI.required]],milestoneName:[t.milestoneName,[a.kI.required]],milestoneCode:[t.milestoneCode,[a.kI.required]],orderNumber:[t.orderNumber,[a.kI.required]],durationInDays:[t.durationInDays,[a.kI.required,a.kI.min(1)]],startDate:[q(t.startDate).toDate(),[a.kI.required]],endDate:[q(t.endDate).toDate(),[a.kI.required]],isPaymentRequired:[t.isPaymentRequired,[a.kI.required]],paymentPercentage:[t.paymentPercentage,[a.kI.required]],percentageCompleted:[t.percentageCompleted,[a.kI.required]],isActive:[!0,[a.kI.required]],isSubmitted:[!1],workId:[t.workId],paymentStatus:[t.paymentStatus],milestoneStatus:[t.milestoneStatus],milestoneAmount:[t.milestoneAmount],isCompleted:[t.isCompleted],workTemplateName:[t.workTemplateName],strength:[t.strength],templateCode:[t.templateCode]}))})}dc(n){return(0,f.ql)(n)}addnewRow(n){this.confirmationService.confirm({key:"confirm2",target:n.target||new EventTarget,message:"Are you sure that you want to Add?",icon:"pi pi-exclamation-triangle",accept:()=>{this.t.push(this.formBuilder.group({id:[null],workId:[this.gworkId,[a.kI.required]],workTemplateId:[this.workTemplateId,[a.kI.required]],milestoneName:[null,[a.kI.required]],milestoneCode:[null,[a.kI.required]],orderNumber:[1,[a.kI.required]],startDate:[null,[a.kI.required]],endDate:[null,[a.kI.required]],durationInDays:[null,[a.kI.required,a.kI.min(1)]],isPaymentRequired:[!1,[a.kI.required]],paymentPercentage:[0,[a.kI.required]],percentageCompleted:[0],isActive:[!0],isSubmitted:[!1],paymentStatus:[null],milestoneStatus:[null],milestoneAmount:[0],isCompleted:[!1],workTemplateName:[null],strength:[null],templateCode:[null]}))},reject:()=>{}})}isPaymentRequired(n){}submit(n=!0){if(this.milestoneForm.valid){this.isMilestoneSubmit=n,n&&this.milestoneList.forEach(s=>{s.controls.isSubmitted.patchValue(n)});const o=this.milestoneForm.controls.milestones.getRawValue().map((s,p)=>({...s,orderNumber:p+1}));this.tenderFacade.savemilestones(o)}const t={id:this.templateId||"",name:this.name,templateCode:this.templateCode,durationInDays:String(this.durationInDays),workId:this.gworkId,strength:this.strength,workTypeId:this.workTypeId||"",workTemplateId:this.workTemplateId,subWorkTypeId:this.subWorkTypeId||"",isActive:!0};this.service.EditWorkTemplates(t).subscribe(r=>{r?.status!==v.cH&&r?.status!==v.nQ||this.messageService.add({severity:"error",life:8e3,summary:"Error",detail:r.message})})}publish(n){this.confirmationService.confirm({key:"confirm2",target:n.target||new EventTarget,message:"Are you sure that you want to Publish?",icon:"pi pi-exclamation-triangle",accept:()=>{},reject:()=>{}})}resetForm(){this.tenderFacade.getWorktemplate(this.gworkId)}backtoDoc(){this.router.navigate(["tender/generate",this.tender.tenderId],{})}back(){this.router.navigate(["tender"])}getdragdisableorNot(n){var t=n.controls.percentageCompleted;return!(!t.value||100!==t.value)}actioInvoked(n,t,r){"INACTIVATE"==n||"DELETE"==n?this.confirmationService.confirm({key:"confirm2",target:r.target||new EventTarget,message:"Are you sure that you want to Delete?",icon:"pi pi-exclamation-triangle",accept:()=>{this.t.removeAt(t),this.messageService.add({severity:"success",summary:"Success",detail:"Deleted successfully"})},reject:()=>{}}):"ACTIVATE"==n&&this.confirmationService.confirm({key:"confirm2",target:r.target||new EventTarget,message:"Are you sure that you want to Activate?",icon:"pi pi-exclamation-triangle",accept:()=>{this.t.controls[t].controls.isActive.setValue(!0),this.submit(!1)},reject:()=>{}})}ngOnDestroy(){this.tenderFacade.reset()}convertoWordsIND(n){return(0,f.i7)(n)}Edit(n){this.isEditMode=!0,this.defaultstatus=!1}delete(n){this.confirmationService.confirm({key:"confirm2",target:n.target||new EventTarget,message:'"Clicking on "Delete" will also delete milestones. Are you sure you want to proceed?"',icon:"pi pi-exclamation-triangle",accept:()=>{this.Tservice.DeleteWorkTemplate(this.tender.workId).subscribe(t=>{!t||t.status!=v.cH&&t.status!=v.nQ?t&&(this.messageService.add({severity:"success",summary:"Success",detail:t?.message}),location.reload(),this.isNew=!0,this.tenderFacade.getTemplates(!0)):this.messageService.add({severity:"error",summary:"Error",life:8e4,detail:t.message})})},reject:()=>{}})}}).\u0275fac=function(n){return new(n||S)(e.Y36(y.ez),e.Y36(b.F0),e.Y36(e.sBO),e.Y36(y.YP),e.Y36(b.gz),e.Y36(a.qu),e.Y36(D),e.Y36(_.Ye),e.Y36(Ae.b),e.Y36(F.$),e.Y36(ke.S))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-milestone-preparation"]],features:[e._Bn([y.YP,ke.S])],decls:89,vars:29,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,""],["pButton","","pRipple","","label","Back to List","icon","pi pi-arrow-left",1,"p-button-secondary",3,"click"],["pButton","","pRipple","","label","Work Documents","icon","pi pi-arrow-left",1,"p-button-info",3,"click"],[1,"card","p-fluid",2,"padding","20px 20px 20px 20px","background-color","#e6e7ff"],[1,"p-formgrid","grid"],[1,"col-11"],[1,"col-12","row"],[1,"lg:col-4","md:col-4","sm:col-12","boldlabelinsiderow"],["key","confirm2"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-12"],["optionLabel","name","optionValue","id","placeholder","Select a Template",3,"options","ngModel","showClear","onChange","ngModelChange"],["pButton","","type","button","label","Generate",3,"style","disabled","click",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Generate",3,"disabled","click"],[1,"grid","formgrid","mb-3"],[1,"card","p-fluid",2,"padding-bottom","10px","background-color","#e6e7ff"],["class","p-formgrid grid","style","text-align: left",4,"ngIf"],["class","col hedsr","style","text-align: end",4,"ngIf"],[1,"grid","formgrid","mb-3",2,"margin-bottom","40px !important"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"card","p-fluid",2,"padding-bottom","10px"],[3,"disabled"],[1,"table"],[2,"min-width","200px"],["class","tableheadererrormsg",4,"ngIf"],[2,"min-width","100px"],[2,"font-weight","300"],[1,"tableheadererrormsg"],["cdkDropList","","formArrayName","milestones",3,"cdkDropListDropped"],["cdkDrag","","cdkDragLockAxis","y",3,"cdkDragDisabled","formGroupName",4,"ngFor","ngForOf"],["class","col-12 md:col-12 lg:col-12","style","display: flex; justify-content: end",4,"ngIf"],[1,"p-formgrid","grid",2,"text-align","left"],[1,"col"],["pInputText","","disabled","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["pInputText","",3,"ngModel","ngModelChange"],["style","padding-top: 15px",4,"ngxPermissionsOnly"],[2,"padding-top","15px"],["label","Delete",3,"click"],[1,"col","boldlabel"],[1,"col","hedsr",2,"text-align","end"],["icon","pi pi-plus",3,"ngStyle","onClick",4,"ngIf"],["icon","pi pi-plus",3,"ngStyle","onClick"],["cdkDrag","","cdkDragLockAxis","y",3,"cdkDragDisabled","formGroupName"],["cdkDragHandle","",2,"cursor","grabbing"],[1,"pi","pi-bars","mr-2"],["pInputText","","formControlName","milestoneName","type","text",3,"maxlength"],["pInputText","","formControlName","milestoneCode","type","text",3,"maxlength"],["formControlName","startDate","inputId","icon",3,"dateFormat","readonlyInput","showIcon","ngModelChange"],["inputId","inputnumber","formControlName","durationInDays",3,"max","ngModelChange"],[2,"text-align","center"],[4,"ngIf","ngIfElse"],["switch",""],["inputId","inputnumber","formControlName","paymentPercentage",3,"max","readonly"],[4,"ngFor","ngForOf"],["formControlName","isPaymentRequired",3,"onChange"],["type","button","pButton","","pRipple","","class","p-button-text mr-2","styleClass","p-button-text",3,"icon","title","click",4,"ngxPermissionsOnly"],["type","button","pButton","","pRipple","","styleClass","p-button-text",1,"p-button-text","mr-2",3,"icon","title","click"],[1,"col-12","md:col-12","lg:col-12",2,"display","flex","justify-content","end"],[1,"",2,"margin-right","20px"],["pButton","","type","button","label","Save",3,"disabled","click",4,"ngxPermissionsOnly"],["pButton","","type","submit","label","Submit",3,"disabled",4,"ngxPermissionsOnly"],["pButton","","type","button","label","Reset",1,"p-button-secondary",3,"click"],["pButton","","type","button","label","Save",3,"disabled","click"],["pButton","","type","submit","label","Submit",3,"disabled"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return t.back()}),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return t.backtoDoc()}),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"h5"),e._uU(12,"Tender"),e.qZA(),e.TgZ(13,"div",8)(14,"div",9)(15,"span"),e._uU(16,"Work Number: "),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"div",9)(19,"span"),e._uU(20,"Division: "),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"div",9)(23,"span"),e._uU(24,"District: "),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"div",9)(27,"span"),e._uU(28,"Start Date: "),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"div",9)(31,"span"),e._uU(32,"End Date: "),e.qZA(),e._uU(33),e.qZA(),e.TgZ(34,"div",9)(35,"span"),e._uU(36,"Class: "),e.qZA(),e._uU(37),e.qZA(),e.TgZ(38,"div",9)(39,"span"),e._uU(40,"Category: "),e.qZA(),e._uU(41),e.qZA(),e.TgZ(42,"div",9)(43,"span"),e._uU(44,"Main Category: "),e.qZA(),e._uU(45),e.qZA(),e.TgZ(46,"div",9)(47,"span"),e._uU(48,"Name of the work: "),e.qZA(),e._uU(49),e.qZA(),e.TgZ(50,"div",9)(51,"span"),e._uU(52,"Service Type: "),e.qZA(),e._uU(53),e.qZA(),e.TgZ(54,"div",9)(55,"span"),e._uU(56,"Category Type: "),e.qZA(),e._uU(57),e.qZA(),e.TgZ(58,"div",9)(59,"span"),e._uU(60,"Bid Type: "),e.qZA(),e._uU(61),e.qZA(),e.TgZ(62,"div",9)(63,"span"),e._uU(64,"Name: "),e.qZA(),e._uU(65),e.qZA(),e.TgZ(66,"div",9)(67,"span"),e._uU(68,"Division: "),e.qZA(),e._uU(69),e.qZA(),e.TgZ(70,"div",9)(71,"span"),e._uU(72,"District: "),e.qZA(),e._uU(73),e.qZA(),e.TgZ(74,"div",9)(75,"span"),e._uU(76,"Category: "),e.qZA(),e._uU(77),e.qZA(),e.TgZ(78,"div",9)(79,"span"),e._uU(80,"Tender Value: "),e.qZA(),e._uU(81),e.qZA(),e.TgZ(82,"div",9)(83,"span"),e._uU(84,"Awarded Value: "),e.qZA(),e._uU(85),e.qZA()()()()(),e._UZ(86,"p-confirmPopup",10),e.YNc(87,Cn,6,7,"div",11),e.YNc(88,Qn,52,20,"div",12),e.qZA()),2&n&&(e.xp6(4),e.Oqu(t.title),e.xp6(2),e.Akn(e.DdM(27,Rn)),e.xp6(1),e.Akn(e.DdM(28,Yn)),e.xp6(10),e.hij("",t.tender&&t.tender.tenderNumber?t.tender.tenderNumber:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.divisionName?t.tender.divisionName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.districtName?t.tender.districtName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.startDate?t.dc(t.tender.startDate):""," "),e.xp6(4),e.hij("",t.tender&&t.tender.endDate?t.dc(t.tender.endDate):""," "),e.xp6(4),e.hij("",t.tender&&t.tender.class?t.tender.class:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.category?t.tender.category:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.mainCategory?t.tender.mainCategory:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.subcategory?t.tender.subcategory:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.service_type_main?t.tender.service_type_main:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.category_type_main?t.tender.category_type_main:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.bidType?t.tender.bidType:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorName?t.tender.contractorName:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorDivision?t.tender.contractorDivision:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorDistrict?t.tender.contractorDistrict:""," "),e.xp6(4),e.hij("",t.tender&&t.tender.contractorCategory?t.tender.contractorCategory:""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.tenderFinalAmount?t.tender.tenderFinalAmount:t.tender&&t.tender.workValue?t.tender.workValue:"","",t.tender&&t.tender.tenderFinalAmount?" ("+t.convertoWordsIND(t.tender.tenderFinalAmount)+")":t.tender&&t.tender.workValue?" ("+t.convertoWordsIND(t.tender.workValue)+")":""," "),e.xp6(4),e.AsE("",t.tender&&t.tender.workValue?t.tender.workValue:"","",t.tender&&t.tender.workValue?" ("+t.convertoWordsIND(t.tender.workValue)+")":""," "),e.xp6(2),e.Q6J("ngIf",t.isNew),e.xp6(1),e.Q6J("ngIf",t.showDetail))},dependencies:[_.sg,_.O5,_.PC,a._Y,a.Fj,a.JJ,a.JL,a.nD,a.On,hn.f,W.Hq,W.zx,ye.o,Ce.Lt,fn.Rn,vn.Ql,a.sg,a.u,a.x0,a.CE,Tn.P,O.Wj,O.Zt,O.Bh,E.gE],styles:[".hedsr button{margin-right:20px}.boldlabel[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.boldlabelinsiderow[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.tableheadererrormsg[_ngcontent-%COMP%]{font-weight:400;color:#ff0052}.camera-input-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;padding:12px 0;flex-wrap:wrap}.camera-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:220px}.camera-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:4px;color:#333}.camera-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid #ccc;border-radius:6px;background-color:#f0f6ff;transition:border-color .2s ease}.camera-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#1a73e8;outline:none}"]}),S);H=(0,P.gn)([(0,g.c)()],H);var N,Hn=d(34055),jn=d(87584);function Bn(i,n){if(1&i&&(e.TgZ(0,"div",9)(1,"span",10),e._uU(2),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.text)}}function Kn(i,n){if(1&i&&(e.TgZ(0,"div",9)(1,"span",10),e._uU(2),e.qZA()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}const Ie=function(){return{width:"100%",margin:"0px 20px"}};let j=((N=class{constructor(n,t,r,o,s){this.tenderFacade=n,this.messageService=t,this.router=r,this.route=o,this.titlecasePipe=s,this.currentStatus=!1,this.privlegess=f.UR,this.selecteddivisions=[],this.selectedYear=[(new Date).getFullYear().toString()],this.yearList=(0,f.S4)(),this.actions=[],this.title="Works",this.first=0,this.rows=25,this.total=0,this.defaultSortField="startDate",this.defaultSortOrder=1}ngOnInit(){this.filtermodel={districtList:null,divisionList:null,selectionType:null,fromDate:null,searchString:null,skip:0,sorting:{fieldName:"startDate",sort:"ASC"},toDate:null,take:25,where:null,workType:null,year:[this.selectedYear.toString()],columnSearch:null},this.tenderFacade.getTenders(this.filtermodel),this.tenderFacade.divisionListGet(),this.cols=[{field:"workProgress",header:"Work Progress",sortablefield:"workProgress",isSearchable:!0,isProgress:!0},{field:"divisionName",header:"Division",sortablefield:"divisionName",isSearchable:!0},{field:"districtName",header:"District",sortablefield:"districtName",isSortable:!0,isSearchable:!0},{field:"workType",header:"Work Type",sortablefield:"workType",isSortable:!0,isSearchable:!0},{field:"goNumber",header:"GO",sortablefield:"goNumber",isSortable:!0,isSearchable:!0},{field:"schemeName",header:"Scheme Name",sortablefield:"schemeName",isSortable:!0,isSearchable:!0},{field:"tenderNumber",header:"Work Number",customExportHeader:"Work Number",sortablefield:"tenderNumber",isSortable:!0,isSearchable:!0},{field:"bidType",header:"Bid Type",sortablefield:"bidType",isSortable:!0,isSearchable:!0},{field:"startDateString",header:"Work Published date",sortablefield:"startDate",isSortable:!0,isSearchable:!1},{field:"endDateString",header:"Awarded Date",sortablefield:"endDate",isSearchable:!1},{field:"workCommencementDate",header:"Work Commencement Date",sortablefield:"workCommencementDate",isSearchable:!0},{field:"workCompletionDate",header:"Work Completion Date",sortablefield:"workCompletionDate",isSearchable:!0},{field:"pannedValue",header:"Planned Value",sortablefield:"pannedValue",isSearchable:!0},{field:"actualValue",header:"Actual Value",sortablefield:"actualValue",isSearchable:!0},{field:"paymentValue",header:"Payment Value",sortablefield:"paymentValue",isSearchable:!0},{field:"tenderStatus",header:"Status",sortablefield:"tenderStatus",isSearchable:!0,isBadge:!0},{field:"lastUpdatedDateString",header:"Last Updated Date",sortablefield:"lastUpdatedDate",isSortable:!0}],this.searchableColumns=this.cols.filter(n=>1==n.isSearchable).flatMap(n=>n.field),this.actions=[{icon:"pi pi-plus",title:"Create Work",type:"CREATE",visibilityCheckFeild:"canCreateWork",privilege:this.privlegess.TENDER_WORK_CREATE,isIcon:!0},{icon:"pi pi-pencil",title:"Edit Work",type:"EDIT",privilege:this.privlegess.TENDER_WORK_CREATE,visibilityCheckFeild:"canEditWork",isIcon:!0},{icon:"pi pi-arrow-right",title:"Set Milestone",type:"SET_MILESTONE",privilege:this.privlegess.TENDER_MILESTONE_SET,visibilityCheckFeild:"canCreateTemplate",isIcon:!0},{icon:"pi pi-info",title:"View Details",type:"VIEW",privilege:this.privlegess.TENDER_VIEW,isIcon:!0}],this.tenderFacade.selectTenders$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.configurationList=[],n.tenders?.forEach(t=>{this.configurationList.push({...t,startDateString:this.dc(t.startDate),endDateString:this.dc(t.endDate),lastUpdatedDateString:this.dcwt(t.lastUpdatedDate),workCompletionDate:t.workCompletionDate?this.dc(t.workCompletionDate):"",workCommencementDate:t.workCommencementDate?this.dc(t.workCommencementDate):""})}),this.total=n.totalRecords)}),this.tenderFacade.selectDivisions$.pipe((0,g.t)(this)).subscribe(n=>{n&&(this.divisions=n)})}changeyear(n){this.filtermodel={...this.filtermodel,year:n},this.tenderFacade.getTenders(this.filtermodel)}divisionChanged(n){this.filtermodel={...this.filtermodel,divisionList:n},this.tenderFacade.getTenders(this.filtermodel)}changefilter(n){this.filtermodel={...this.filtermodel,...n},this.tenderFacade.getTenders(this.filtermodel)}actioInvoked(n){n&&"CREATE"==n.type?this.router.navigate(["generate",n.record.id],{relativeTo:this.route}):n&&"SET_MILESTONE"==n.type?this.router.navigate(["milestone-preparation",n.record.id],{relativeTo:this.route}):n&&"EDIT"==n.type?this.router.navigate(["generate",n.record.id],{relativeTo:this.route}):n&&"VIEW"==n.type&&this.router.navigate(["view",n.record.id],{relativeTo:this.route})}changeStatus(n){this.tenderFacade.getTenders(this.filtermodel),this.currentStatus=!n}ngOnDestroy(){this.tenderFacade.reset()}dc(n){return(0,f.ql)(n)}dcwt(n){return(0,f.gv)(n)}}).\u0275fac=function(n){return new(n||N)(e.Y36(D),e.Y36(y.ez),e.Y36(b.F0),e.Y36(b.gz),e.Y36(_.rS))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-tenderlist"]],features:[e._Bn([_.rS])],decls:12,vars:20,consts:[[1,"card"],[1,"grid","formgrid",2,"justify-content","space-between","padding","0rem 1rem","margin-bottom","10px"],[1,"col-12","md:col-6","lg:col-7"],[1,"col-12","md:col-3","lg:col-3"],["placeholder","Select a Division","optionLabel","text","optionValue","value","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","showClear","ngStyle","ngModelChange"],["pTemplate","item"],[1,"col-12","md:col-3","lg:col-2"],["placeholder","Select a Year","ngClass","dd",1,"multiselect-custom",3,"options","ngModel","ngStyle","ngModelChange"],[3,"records","cols","fileName","rows","total","actions","defaultSortField","defaultstatus","hasActiveInactive","filterModel","invokeAction","changeStatus","changefilter"],[1,"flex","align-items-center"],[1,"ml-2"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4),e.qZA()(),e.TgZ(5,"div",3)(6,"p-multiSelect",4),e.NdJ("ngModelChange",function(o){return t.selecteddivisions=o})("ngModelChange",function(o){return t.divisionChanged(o)}),e.YNc(7,Bn,3,1,"ng-template",5),e.qZA()(),e.TgZ(8,"div",6)(9,"p-multiSelect",7),e.NdJ("ngModelChange",function(o){return t.selectedYear=o})("ngModelChange",function(o){return t.changeyear(o)}),e.YNc(10,Kn,3,1,"ng-template",5),e.qZA()()(),e.TgZ(11,"app-datatable-pagination",8),e.NdJ("invokeAction",function(o){return t.actioInvoked(o)})("changeStatus",function(o){return t.changeStatus(o)})("changefilter",function(o){return t.changefilter(o)}),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(t.title),e.xp6(2),e.Q6J("options",t.divisions)("ngModel",t.selecteddivisions)("showClear",!0)("ngStyle",e.DdM(18,Ie)),e.xp6(3),e.Q6J("options",t.yearList)("ngModel",t.selectedYear)("ngStyle",e.DdM(19,Ie)),e.xp6(2),e.Q6J("records",t.configurationList)("cols",t.cols)("fileName","Tender")("rows",10)("total",t.total)("actions",t.actions)("defaultSortField",t.defaultSortField)("defaultstatus",!t.currentStatus)("hasActiveInactive",!1)("filterModel",t.tableFilterModel))},dependencies:[_.mk,_.PC,a.JJ,a.On,y.jx,Hn.NU,jn.b],styles:[".dd>.p-multiselect{width:100%}  .dd>.p-dropdown{width:100%}"]}),N);j=(0,P.gn)([(0,g.c)()],j);const zn=[{path:"",component:Se,children:[{path:"",component:j},{path:"generate/:id",component:R},{path:"view/:id",component:J},{path:"manage/:id",component:_n},{path:"milestone-preparation/:id",component:H},{path:"view/:id/:update",component:J},{path:"reports/:status",component:d(67741).n}]}];let Xn=(()=>{var i;class n{}return(i=n).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[b.Bz.forChild(zn),b.Bz]}),n})();var ei=d(44393),ti=d(9502),ni=d(74104),Me=d(39232),m=d(16465),w=d(22096),ii=d(9769),k=d(37398),A=d(26306),x=d(67634),oi=d(30505);let ri=(()=>{var i;class n{constructor(r,o,s,p){this.actions$=r,this.tenderService=o,this.twoColConfigService=s,this.templateService=p,this.getQuicklinks$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(z),(0,ii.z)(({filterRequest:c})=>this.tenderService.getTenders(c).pipe((0,k.U)(u=>X({tenders:u})),(0,A.K)(u=>(0,w.of)()))))),this.getAllDivisions$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(ue),(0,x.z)(({})=>this.twoColConfigService.getAllDivisions().pipe((0,k.U)(c=>me({divisions:c.data})),(0,A.K)(c=>(0,w.of)()))))),this.savePercentage$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(ge),(0,x.z)(({model:c})=>this.tenderService.UpdatePercentage(c).pipe((0,k.U)(u=>_e({response:u})),(0,A.K)(u=>(0,w.of)()))))),this.getTenderbyID$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(V),(0,x.z)(({id:c})=>this.tenderService.getTenderById(c).pipe((0,k.U)(u=>ee({tender:u.data})),(0,A.K)(u=>(0,w.of)()))))),this.gettemplates$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(te),(0,x.z)(({isActive:c,subcategory:u,mainCategory:h,serviceType:T,categoryType:U})=>this.templateService.getTemplates(c,u,h,T,U).pipe((0,k.U)(qe=>ne({templates:qe.data})),(0,A.K)(qe=>(0,w.of)()))))),this.getTemplateWithMilestone$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(ie),(0,x.z)(({IsActive_template:c,IsActive_milestone:u,Id:h,WorkTypeId:T})=>this.templateService.get_Template_With_Milestone(h,c,u,T).pipe((0,k.U)(U=>oe({templates:U.data[0]})),(0,A.K)(U=>(0,w.of)()))))),this.GetWorkTemplate$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(G),(0,x.z)(({WorkId:c})=>this.tenderService.GetWorkTemplate(c).pipe((0,k.U)(u=>ce({template:u.data[0]})),(0,A.K)(u=>(0,w.of)()))))),this.savetemplate$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(re),(0,x.z)(({id:c,TemplateID:u})=>this.tenderService.workTemplateCreate(c,u).pipe((0,k.U)(h=>se({template:h})),(0,A.K)(h=>(0,w.of)()))))),this.save_Milestone$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(le),(0,x.z)(({milestone:c})=>this.tenderService.SaveWorkTemplateMilestone(c).pipe((0,k.U)(u=>de({milestone:u})),(0,A.K)(u=>(0,w.of)())))))}}return(i=n).\u0275fac=function(r){return new(r||i)(e.LFG(m.eX),e.LFG(F.$),e.LFG(oi.g),e.LFG(Ae.b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),n})();var si=d(97680),ai=d(30442),li=d(67338),di=d(18275);let pi=(()=>{var i;class n{}return(i=n).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[D],imports:[_.ez,Xn,di.g,ai.W,Me.U$,W.hJ,si.L,ei.r,l.Aw.forFeature(ve,De),m.sQ.forFeature([ri]),ti.$,ni.EV,Me.U$,L.O,O._t,li._,we.kb,E.VI.forChild()]}),n})()}}]);